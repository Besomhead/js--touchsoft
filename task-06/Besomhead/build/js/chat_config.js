var config={chatFilePath:"https://rawgit.com/Besomhead/js--touchsoft/besomhead-task06-build/task-06/Besomhead/build/js/chat.js"},configFactory=function(e){var t="change",n="chat-configurator-chat-title",r="chat-configurator-chat-url",o="chat-configurator-chat-css-class",a="chat-configurator-ui-minimize",i="chat-configurator-ui-drag",c="chat-configurator-ui-require-name",s="chat-configurator-ui-show-date",d="chat-configurator-network",l="chat-configurator-updates",h='<script src="'+e.chatFilePath+"?",u='"><\/script>';function f(){}function g(e){return"'".concat(e).concat("'")}function m(e){return g(DM.getDOMElement(e).value)}function p(e){return DM.getDOMElement(e).checked?g("true"):g("false")}function D(e,t,n,r,o){var a=function(e){for(var t,n=DM.getDOMChildrenByTag(e,"div");!t;)t=DM.getDOMChildrenByTag(n.shift(),"input").find(function(e){return e.checked});return t}(e),i="";return a.id===t?i=g(n):a.id===r&&(i=g(o)),i}return f.prototype.createCodeExample=function(){var e;DM.getDOMElement("chat-configurator-code-source").value=[h,"chatTitle=",m(n),"&","chatURL=",m(r),"&","cssClass=",m(o),"&",(e="position=",DM.getDOMElement("chat-configurator-chat-position-right").selected?e=e.concat(g("right")):DM.getDOMElement("chat-configurator-chat-position-left").selected&&(e=e.concat(g("left"))),e),"&","allowMinimize=",p(a),"&","allowDrag=",p(i),"&","requireName=",p(c),"&","showDateTime=",p(s),"&","requests=".concat(D(DM.getDOMElement(d),"chat-configurator-network-xhr","xhr","chat-configurator-network-fetch","fetch")),"&","subscribeOnUpdates=".concat(D(DM.getDOMElement(l),"chat-configurator-updates-longpoll","longPolling","chat-configurator-updates-refetch","refetch")),u].join("")},f.prototype.initListeners=function(){DM.addListener(n,t,this.createCodeExample),DM.addListener(r,t,this.createCodeExample),DM.addListener(o,t,this.createCodeExample),DM.addListener("chat-configurator-chat-position",t,this.createCodeExample),DM.addListener(a,t,this.createCodeExample),DM.addListener(i,t,this.createCodeExample),DM.addListener(s,t,this.createCodeExample),DM.addListener(c,t,this.createCodeExample),DM.addListener(d,t,this.createCodeExample),DM.addListener(l,t,this.createCodeExample)},new f}(config),DM=function(){function e(){}return e.prototype.getDOMElement=function(e){return"string"==typeof e?document.getElementById(e):e},e.prototype.getDOMChildrenByTag=function(e,t){return Array.from(this.getDOMElement(e).getElementsByTagName(t))},e.prototype.getDOMChildrenByClass=function(e,t){return Array.from(this.getDOMElement(e).getElementsByClassName(t))},e.prototype.createDOMElement=document.createElement.bind(document),e.prototype.appendDOMElement=function(e,t){this.getDOMElement(e).appendChild(t)},e.prototype.removeDOMElement=function(e,t){this.getDOMElement(e).removeChild(this.getDOMElement(t))},e.prototype.addListener=function(e,t,n){this.getDOMElement(e).addEventListener(t,n)},e.prototype.removeListener=function(e,t,n){this.getDOMElement(e).removeEventListener(t,n)},e.prototype.addCSSClass=function(t){var n=this;Array.from(arguments).slice(1).forEach(function(e){n.getDOMElement(t).classList.add(e)})},e.prototype.removeCSSClass=function(e,t){this.getDOMElement(e).classList.remove(t)},new e}();window.addEventListener("load",function(){configFactory.initListeners(),configFactory.createCodeExample()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXRfY29uZmlnLmpzIl0sIm5hbWVzIjpbImNvbmZpZyIsImNoYXRGaWxlUGF0aCIsImNvbmZpZ0ZhY3RvcnkiLCJFVkVOVF9OQU1FIiwiQ0hBVF9USVRMRV9JRCIsIkNIQVRfVVJMX0lEIiwiQ0hBVF9DU1NfQ0xBU1NfSUQiLCJBTExPV19NSU5JTUlaRV9JRCIsIkFMTE9XX0RSQUdfSUQiLCJSRVFVSVJFX05BTUVfSUQiLCJTSE9XX0RBVEVfVElNRV9JRCIsIk5FVFdPUktfSUQiLCJVUERBVEVTX0lEIiwiQ09ERV9FWEFNUExFX1NUQVJUIiwiQ09ERV9FWEFNUExFX0VORCIsIkNvbmZpZ0ZhY3RvcnkiLCJ3cmFwV2l0aFF1b3RlcyIsInN0ciIsImNvbmNhdCIsImdldElucHV0VmFsdWUiLCJjb21wb25lbnRJRCIsIkRNIiwiZ2V0RE9NRWxlbWVudCIsInZhbHVlIiwiZ2V0Q2hlY2tCb3hWYWx1ZSIsImNoZWNrZWQiLCJnZXRTZWxlY3RlZFZhbHVlIiwidGFyZ2V0IiwiZmlyc3RPcHRpb24iLCJmaXJzdFZhbHVlIiwic2Vjb25kT3B0aW9uIiwic2Vjb25kVmFsdWUiLCJlbWl0dGVyIiwiY29udGFpbmVyIiwiYnV0dG9uIiwiZGl2cyIsImdldERPTUNoaWxkcmVuQnlUYWciLCJzaGlmdCIsImZpbmQiLCJlbCIsImdldFNlbGVjdGVkQnV0dG9uIiwiaWQiLCJwcm90b3R5cGUiLCJjcmVhdGVDb2RlRXhhbXBsZSIsInBvc2l0aW9uIiwic2VsZWN0ZWQiLCJqb2luIiwiaW5pdExpc3RlbmVycyIsImFkZExpc3RlbmVyIiwidGhpcyIsIkRPTU1hbmFnZXIiLCJpZHRmIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInJvb3QiLCJ0YWciLCJBcnJheSIsImZyb20iLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImdldERPTUNoaWxkcmVuQnlDbGFzcyIsImNsYXNzTmFtZSIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjcmVhdGVET01FbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImJpbmQiLCJhcHBlbmRET01FbGVtZW50IiwiZWxlbWVudCIsImFwcGVuZENoaWxkIiwicmVtb3ZlRE9NRWxlbWVudCIsInJlbW92ZUNoaWxkIiwiZXZlbnQiLCJjYWxsYmFjayIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRDU1NDbGFzcyIsInNlbGYiLCJhcmd1bWVudHMiLCJzbGljZSIsImZvckVhY2giLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmVDU1NDbGFzcyIsInJlbW92ZSIsIndpbmRvdyJdLCJtYXBwaW5ncyI6IkFBR0EsSUFBSUEsT0FBUyxDQUNYQyxhQUNFLHdHQU9BQyxjQUFnQixTQUE4QkYsR0FDaEQsSUFBSUcsRUFBYSxTQUNiQyxFQUFnQiwrQkFDaEJDLEVBQWMsNkJBQ2RDLEVBQW9CLG1DQUlwQkMsRUFBb0IsZ0NBQ3BCQyxFQUFnQiw0QkFDaEJDLEVBQWtCLG9DQUNsQkMsRUFBb0IsaUNBQ3BCQyxFQUFhLDRCQUdiQyxFQUFhLDRCQUliQyxFQUFxQixnQkFBa0JiLEVBQU9DLGFBQWUsSUFDN0RhLEVBQW1CLGVBRXZCLFNBQVNDLEtBRVQsU0FBU0MsRUFBZUMsR0FDdEIsTUFBTyxJQUFJQyxPQUFPRCxHQUFLQyxPQUFPLEtBR2hDLFNBQVNDLEVBQWNDLEdBQ3JCLE9BQU9KLEVBQWVLLEdBQUdDLGNBQWNGLEdBQWFHLE9BZXRELFNBQVNDLEVBQWlCSixHQUN4QixPQUFPQyxHQUFHQyxjQUFjRixHQUFhSyxRQUNqQ1QsRUFBZSxRQUNmQSxFQUFlLFNBa0JyQixTQUFTVSxFQUNQQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxHQUVBLElBQUlDLEVBdEJOLFNBQTJCQyxHQUl6QixJQUhBLElBQUlDLEVBQ0FDLEVBQU9kLEdBQUdlLG9CQUFvQkgsRUFBVyxRQUVyQ0MsR0FDTkEsRUFBU2IsR0FBR2Usb0JBQW9CRCxFQUFLRSxRQUFTLFNBQVNDLEtBQ3JELFNBQXNCQyxHQUNwQixPQUFPQSxFQUFH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QyxHQUVBdEIsS0FBSzNCLGNBQWNnQyxHQUFNb0Isb0JBQW9CSixFQUFPQyxJQUV0RHJCLEVBQVdSLFVBQVVpQyxZQUFjLFNBQXFCckIsR0FDdEQsSUFBSXNCLEVBQU8zQixLQUNYTyxNQUFNQyxLQUFLb0IsV0FDUkMsTUFBTSxHQUNOQyxRQUFRLFNBQW9CbkIsR0FDM0JnQixFQUFLdEQsY0FBY2dDLEdBQU0wQixVQUFVQyxJQUFJckIsTUFHN0NWLEVBQVdSLFVBQVV3QyxlQUFpQixTQUNwQzVCLEVBQ0FNLEdBRUFYLEtBQUszQixjQUFjZ0MsR0FBTTBCLFVBQVVHLE9BQU92QixJQUdyQyxJQUFJVixFQXhESixHQTJEVGtDLE9BQU9aLGlCQUFpQixPQUFRLFdBQzlCdEUsY0FBYzZDLGdCQUNkN0MsY0FBY3lDIiwiZmlsZSI6ImNoYXRfY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXhwb3J0ZWQgY29uZmlnICovXHJcbi8qIGdsb2JhbCBjb25maWdGYWN0b3J5ICovXHJcblxyXG52YXIgY29uZmlnID0ge1xyXG4gIGNoYXRGaWxlUGF0aDpcclxuICAgIFwiaHR0cHM6Ly9yYXdnaXQuY29tL0Jlc29taGVhZC9qcy0tdG91Y2hzb2Z0L2Jlc29taGVhZC10YXNrMDYtYnVpbGQvdGFzay0wNi9CZXNvbWhlYWQvYnVpbGQvanMvY2hhdC5qc1wiXHJcbn07XHJcblxyXG4vKiBleHBvcnRlZCBjb25maWdGYWN0b3J5ICovXHJcbi8qIGdsb2JhbCBETSAqL1xyXG4vKiBnbG9iYWwgY29uZmlnICovXHJcblxyXG52YXIgY29uZmlnRmFjdG9yeSA9IChmdW5jdGlvbiBjb25maWdGYWN0b3J5TW9kdWxlKGNvbmZpZykge1xyXG4gIHZhciBFVkVOVF9OQU1FID0gXCJjaGFuZ2VcIjtcclxuICB2YXIgQ0hBVF9USVRMRV9JRCA9IFwiY2hhdC1jb25maWd1cmF0b3ItY2hhdC10aXRsZVwiO1xyXG4gIHZhciBDSEFUX1VSTF9JRCA9IFwiY2hhdC1jb25maWd1cmF0b3ItY2hhdC11cmxcIjtcclxuICB2YXIgQ0hBVF9DU1NfQ0xBU1NfSUQgPSBcImNoYXQtY29uZmlndXJhdG9yLWNoYXQtY3NzLWNsYXNzXCI7XHJcbiAgdmFyIENIQVRfUE9TSVRJT05fUklHSFRfSUQgPSBcImNoYXQtY29uZmlndXJhdG9yLWNoYXQtcG9zaXRpb24tcmlnaHRcIjtcclxuICB2YXIgQ0hBVF9QT1NJVElPTl9MRUZUX0lEID0gXCJjaGF0LWNvbmZpZ3VyYXRvci1jaGF0LXBvc2l0aW9uLWxlZnRcIjtcclxuICB2YXIgQ0hBVF9QT1NJVElPTl9JRCA9IFwiY2hhdC1jb25maWd1cmF0b3ItY2hhdC1wb3NpdGlvblwiO1xyXG4gIHZhciBBTExPV19NSU5JTUlaRV9JRCA9IFwiY2hhdC1jb25maWd1cmF0b3ItdWktbWluaW1pemVcIjtcclxuICB2YXIgQUxMT1dfRFJBR19JRCA9IFwiY2hhdC1jb25maWd1cmF0b3ItdWktZHJhZ1wiO1xyXG4gIHZhciBSRVFVSVJFX05BTUVfSUQgPSBcImNoYXQtY29uZmlndXJhdG9yLXVpLXJlcXVpcmUtbmFtZVwiO1xyXG4gIHZhciBTSE9XX0RBVEVfVElNRV9JRCA9IFwiY2hhdC1jb25maWd1cmF0b3ItdWktc2hvdy1kYXRlXCI7XHJcbiAgdmFyIE5FVFdPUktfSUQgPSBcImNoYXQtY29uZmlndXJhdG9yLW5ldHdvcmtcIjtcclxuICB2YXIgTkVUV09SS19YSFJfSUQgPSBcImNoYXQtY29uZmlndXJhdG9yLW5ldHdvcmsteGhyXCI7XHJcbiAgdmFyIE5FVFdPUktfRkVUQ0hfSUQgPSBcImNoYXQtY29uZmlndXJhdG9yLW5ldHdvcmstZmV0Y2hcIjtcclxuICB2YXIgVVBEQVRFU19JRCA9IFwiY2hhdC1jb25maWd1cmF0b3ItdXBkYXRlc1wiO1xyXG4gIHZhciBVUERBVEVTX1JFRkVUQ0hfSUQgPSBcImNoYXQtY29uZmlndXJhdG9yLXVwZGF0ZXMtcmVmZXRjaFwiO1xyXG4gIHZhciBVUERBVEVTX0xPTkdfUE9MTElOR19JRCA9IFwiY2hhdC1jb25maWd1cmF0b3ItdXBkYXRlcy1sb25ncG9sbFwiO1xyXG4gIHZhciBDT0RFX0VYQU1QTEVfSUQgPSBcImNoYXQtY29uZmlndXJhdG9yLWNvZGUtc291cmNlXCI7XHJcbiAgdmFyIENPREVfRVhBTVBMRV9TVEFSVCA9ICc8c2NyaXB0IHNyYz1cIicgKyBjb25maWcuY2hhdEZpbGVQYXRoICsgXCI/XCI7XHJcbiAgdmFyIENPREVfRVhBTVBMRV9FTkQgPSAnXCI+PC9zY3JpcHQ+JztcclxuXHJcbiAgZnVuY3Rpb24gQ29uZmlnRmFjdG9yeSgpIHt9XHJcblxyXG4gIGZ1bmN0aW9uIHdyYXBXaXRoUXVvdGVzKHN0cikge1xyXG4gICAgcmV0dXJuIFwiJ1wiLmNvbmNhdChzdHIpLmNvbmNhdChcIidcIik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRJbnB1dFZhbHVlKGNvbXBvbmVudElEKSB7XHJcbiAgICByZXR1cm4gd3JhcFdpdGhRdW90ZXMoRE0uZ2V0RE9NRWxlbWVudChjb21wb25lbnRJRCkudmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0Q2hhdFBvc2l0aW9uKCkge1xyXG4gICAgdmFyIHBvc2l0aW9uID0gXCJwb3NpdGlvbj1cIjtcclxuXHJcbiAgICBpZiAoRE0uZ2V0RE9NRWxlbWVudChDSEFUX1BPU0lUSU9OX1JJR0hUX0lEKS5zZWxlY3RlZCkge1xyXG4gICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uLmNvbmNhdCh3cmFwV2l0aFF1b3RlcyhcInJpZ2h0XCIpKTtcclxuICAgIH0gZWxzZSBpZiAoRE0uZ2V0RE9NRWxlbWVudChDSEFUX1BPU0lUSU9OX0xFRlRfSUQpLnNlbGVjdGVkKSB7XHJcbiAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24uY29uY2F0KHdyYXBXaXRoUXVvdGVzKFwibGVmdFwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0Q2hlY2tCb3hWYWx1ZShjb21wb25lbnRJRCkge1xyXG4gICAgcmV0dXJuIERNLmdldERPTUVsZW1lbnQoY29tcG9uZW50SUQpLmNoZWNrZWRcclxuICAgICAgPyB3cmFwV2l0aFF1b3RlcyhcInRydWVcIilcclxuICAgICAgOiB3cmFwV2l0aFF1b3RlcyhcImZhbHNlXCIpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRCdXR0b24oY29udGFpbmVyKSB7XHJcbiAgICB2YXIgYnV0dG9uO1xyXG4gICAgdmFyIGRpdnMgPSBETS5nZXRET01DaGlsZHJlbkJ5VGFnKGNvbnRhaW5lciwgXCJkaXZcIik7XHJcblxyXG4gICAgd2hpbGUgKCFidXR0b24pIHtcclxuICAgICAgYnV0dG9uID0gRE0uZ2V0RE9NQ2hpbGRyZW5CeVRhZyhkaXZzLnNoaWZ0KCksIFwiaW5wdXRcIikuZmluZChcclxuICAgICAgICBmdW5jdGlvbiBmaW5kU2VsZWN0ZWQoZWwpIHtcclxuICAgICAgICAgIHJldHVybiBlbC5jaGVja2VkO1xyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYnV0dG9uO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRWYWx1ZShcclxuICAgIHRhcmdldCxcclxuICAgIGZpcnN0T3B0aW9uLFxyXG4gICAgZmlyc3RWYWx1ZSxcclxuICAgIHNlY29uZE9wdGlvbixcclxuICAgIHNlY29uZFZhbHVlXHJcbiAgKSB7XHJcbiAgICB2YXIgZW1pdHRlciA9IGdldFNlbGVjdGVkQnV0dG9uKHRhcmdldCk7XHJcbiAgICB2YXIgdmFsdWUgPSBcIlwiO1xyXG5cclxuICAgIGlmIChlbWl0dGVyLmlkID09PSBmaXJzdE9wdGlvbikge1xyXG4gICAgICB2YWx1ZSA9IHdyYXBXaXRoUXVvdGVzKGZpcnN0VmFsdWUpO1xyXG4gICAgfSBlbHNlIGlmIChlbWl0dGVyLmlkID09PSBzZWNvbmRPcHRpb24pIHtcclxuICAgICAgdmFsdWUgPSB3cmFwV2l0aFF1b3RlcyhzZWNvbmRWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0TmV0d29ya1JlcXVlc3RUeXBlKCkge1xyXG4gICAgcmV0dXJuIFwicmVxdWVzdHM9XCIuY29uY2F0KFxyXG4gICAgICBnZXRTZWxlY3RlZFZhbHVlKFxyXG4gICAgICAgIERNLmdldERPTUVsZW1lbnQoTkVUV09SS19JRCksXHJcbiAgICAgICAgTkVUV09SS19YSFJfSUQsXHJcbiAgICAgICAgXCJ4aHJcIixcclxuICAgICAgICBORVRXT1JLX0ZFVENIX0lELFxyXG4gICAgICAgIFwiZmV0Y2hcIlxyXG4gICAgICApXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0VXBkYXRlc1BvbGl0aWNzKCkge1xyXG4gICAgcmV0dXJuIFwic3Vic2NyaWJlT25VcGRhdGVzPVwiLmNvbmNhdChcclxuICAgICAgZ2V0U2VsZWN0ZWRWYWx1ZShcclxuICAgICAgICBETS5nZXRET01FbGVtZW50KFVQREFURVNfSUQpLFxyXG4gICAgICAgIFVQREFURVNfTE9OR19QT0xMSU5HX0lELFxyXG4gICAgICAgIFwibG9uZ1BvbGxpbmdcIixcclxuICAgICAgICBVUERBVEVTX1JFRkVUQ0hfSUQsXHJcbiAgICAgICAgXCJyZWZldGNoXCJcclxuICAgICAgKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIENvbmZpZ0ZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZUNvZGVFeGFtcGxlID0gZnVuY3Rpb24gY3JlYXRlQ29kZUV4YW1wbGUoKSB7XHJcbiAgICBETS5nZXRET01FbGVtZW50KENPREVfRVhBTVBMRV9JRCkudmFsdWUgPSBbXHJcbiAgICAgIENPREVfRVhBTVBMRV9TVEFSVCxcclxuICAgICAgXCJjaGF0VGl0bGU9XCIsXHJcbiAgICAgIGdldElucHV0VmFsdWUoQ0hBVF9USVRMRV9JRCksXHJcbiAgICAgIFwiJlwiLFxyXG4gICAgICBcImNoYXRVUkw9XCIsXHJcbiAgICAgIGdldElucHV0VmFsdWUoQ0hBVF9VUkxfSUQpLFxyXG4gICAgICBcIiZcIixcclxuICAgICAgXCJjc3NDbGFzcz1cIixcclxuICAgICAgZ2V0SW5wdXRWYWx1ZShDSEFUX0NTU19DTEFTU19JRCksXHJcbiAgICAgIFwiJlwiLFxyXG4gICAgICBnZXRDaGF0UG9zaXRpb24oKSxcclxuICAgICAgXCImXCIsXHJcbiAgICAgIFwiYWxsb3dNaW5pbWl6ZT1cIixcclxuICAgICAgZ2V0Q2hlY2tCb3hWYWx1ZShBTExPV19NSU5JTUlaRV9JRCksXHJcbiAgICAgIFwiJlwiLFxyXG4gICAgICBcImFsbG93RHJhZz1cIixcclxuICAgICAgZ2V0Q2hlY2tCb3hWYWx1ZShBTExPV19EUkFHX0lEKSxcclxuICAgICAgXCImXCIsXHJcbiAgICAgIFwicmVxdWlyZU5hbWU9XCIsXHJcbiAgICAgIGdldENoZWNrQm94VmFsdWUoUkVRVUlSRV9OQU1FX0lEKSxcclxuICAgICAgXCImXCIsXHJcbiAgICAgIFwic2hvd0RhdGVUaW1lPVwiLFxyXG4gICAgICBnZXRDaGVja0JveFZhbHVlKFNIT1dfREFURV9USU1FX0lEKSxcclxuICAgICAgXCImXCIsXHJcbiAgICAgIGdldE5ldHdvcmtSZXF1ZXN0VHlwZSgpLFxyXG4gICAgICBcIiZcIixcclxuICAgICAgZ2V0VXBkYXRlc1BvbGl0aWNzKCksXHJcbiAgICAgIENPREVfRVhBTVBMRV9FTkRcclxuICAgIF0uam9pbihcIlwiKTtcclxuICB9O1xyXG5cclxuICBDb25maWdGYWN0b3J5LnByb3RvdHlwZS5pbml0TGlzdGVuZXJzID0gZnVuY3Rpb24gaW5pdExpc3RlbmVycygpIHtcclxuICAgIERNLmFkZExpc3RlbmVyKENIQVRfVElUTEVfSUQsIEVWRU5UX05BTUUsIHRoaXMuY3JlYXRlQ29kZUV4YW1wbGUpO1xyXG4gICAgRE0uYWRkTGlzdGVuZXIoQ0hBVF9VUkxfSUQsIEVWRU5UX05BTUUsIHRoaXMuY3JlYXRlQ29kZUV4YW1wbGUpO1xyXG4gICAgRE0uYWRkTGlzdGVuZXIoQ0hBVF9DU1NfQ0xBU1NfSUQsIEVWRU5UX05BTUUsIHRoaXMuY3JlYXRlQ29kZUV4YW1wbGUpO1xyXG4gICAgRE0uYWRkTGlzdGVuZXIoQ0hBVF9QT1NJVElPTl9JRCwgRVZFTlRfTkFNRSwgdGhpcy5jcmVhdGVDb2RlRXhhbXBsZSk7XHJcbiAgICBETS5hZGRMaXN0ZW5lcihBTExPV19NSU5JTUlaRV9JRCwgRVZFTlRfTkFNRSwgdGhpcy5jcmVhdGVDb2RlRXhhbXBsZSk7XHJcbiAgICBETS5hZGRMaXN0ZW5lcihBTExPV19EUkFHX0lELCBFVkVOVF9OQU1FLCB0aGlzLmNyZWF0ZUNvZGVFeGFtcGxlKTtcclxuICAgIERNLmFkZExpc3RlbmVyKFNIT1dfREFURV9USU1FX0lELCBFVkVOVF9OQU1FLCB0aGlzLmNyZWF0ZUNvZGVFeGFtcGxlKTtcclxuICAgIERNLmFkZExpc3RlbmVyKFJFUVVJUkVfTkFNRV9JRCwgRVZFTlRfTkFNRSwgdGhpcy5jcmVhdGVDb2RlRXhhbXBsZSk7XHJcbiAgICBETS5hZGRMaXN0ZW5lcihORVRXT1JLX0lELCBFVkVOVF9OQU1FLCB0aGlzLmNyZWF0ZUNvZGVFeGFtcGxlKTtcclxuICAgIERNLmFkZExpc3RlbmVyKFVQREFURVNfSUQsIEVWRU5UX05BTUUsIHRoaXMuY3JlYXRlQ29kZUV4YW1wbGUpO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBuZXcgQ29uZmlnRmFjdG9yeSgpO1xyXG59KShjb25maWcpO1xyXG4vKiBleHBvcnRlZCBETSAqL1xyXG5cclxudmFyIERNID0gKGZ1bmN0aW9uIERPTU1hbmFnZXJNb2R1bGUoKSB7XHJcbiAgZnVuY3Rpb24gRE9NTWFuYWdlcigpIHt9XHJcblxyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLmdldERPTUVsZW1lbnQgPSBmdW5jdGlvbiBnZXRFbGVtZW50KGlkdGYpIHtcclxuICAgIHJldHVybiB0eXBlb2YgaWR0ZiA9PT0gXCJzdHJpbmdcIiA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkdGYpIDogaWR0ZjtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLmdldERPTUNoaWxkcmVuQnlUYWcgPSBmdW5jdGlvbiBnZXRDaGlsZHJlbkJ5VGFnTmFtZShcclxuICAgIHJvb3QsXHJcbiAgICB0YWdcclxuICApIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZ2V0RE9NRWxlbWVudChyb290KS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWcpKTtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLmdldERPTUNoaWxkcmVuQnlDbGFzcyA9IGZ1bmN0aW9uIGdldENoaWxkcmVuQnlDbGFzc05hbWUoXHJcbiAgICByb290LFxyXG4gICAgY2xhc3NOYW1lXHJcbiAgKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5nZXRET01FbGVtZW50KHJvb3QpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKVxyXG4gICAgKTtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZURPTUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50LmJpbmQoZG9jdW1lbnQpO1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLmFwcGVuZERPTUVsZW1lbnQgPSBmdW5jdGlvbiBhcHBlbmQocm9vdCwgZWxlbWVudCkge1xyXG4gICAgdGhpcy5nZXRET01FbGVtZW50KHJvb3QpLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gIH07XHJcbiAgRE9NTWFuYWdlci5wcm90b3R5cGUucmVtb3ZlRE9NRWxlbWVudCA9IGZ1bmN0aW9uIHJlbW92ZShyb290LCBlbGVtZW50KSB7XHJcbiAgICB0aGlzLmdldERPTUVsZW1lbnQocm9vdCkucmVtb3ZlQ2hpbGQodGhpcy5nZXRET01FbGVtZW50KGVsZW1lbnQpKTtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgIHJvb3QsXHJcbiAgICBldmVudCxcclxuICAgIGNhbGxiYWNrXHJcbiAgKSB7XHJcbiAgICB0aGlzLmdldERPTUVsZW1lbnQocm9vdCkuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xyXG4gIH07XHJcbiAgRE9NTWFuYWdlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKFxyXG4gICAgcm9vdCxcclxuICAgIGV2ZW50LFxyXG4gICAgY2FsbGJhY2tcclxuICApIHtcclxuICAgIHRoaXMuZ2V0RE9NRWxlbWVudChyb290KS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBjYWxsYmFjayk7XHJcbiAgfTtcclxuICBET01NYW5hZ2VyLnByb3RvdHlwZS5hZGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGFkZENTU0NsYXNzKHJvb3QpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIEFycmF5LmZyb20oYXJndW1lbnRzKVxyXG4gICAgICAuc2xpY2UoMSlcclxuICAgICAgLmZvckVhY2goZnVuY3Rpb24gYWRkQ2xhc3NlcyhjbGFzc05hbWUpIHtcclxuICAgICAgICBzZWxmLmdldERPTUVsZW1lbnQocm9vdCkuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLnJlbW92ZUNTU0NsYXNzID0gZnVuY3Rpb24gcmVtb3ZlQ1NTQ2xhc3MoXHJcbiAgICByb290LFxyXG4gICAgY2xhc3NOYW1lXHJcbiAgKSB7XHJcbiAgICB0aGlzLmdldERPTUVsZW1lbnQocm9vdCkuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBuZXcgRE9NTWFuYWdlcigpO1xyXG59KSgpO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uIGluaXRQYWdlKCkge1xyXG4gIGNvbmZpZ0ZhY3RvcnkuaW5pdExpc3RlbmVycygpO1xyXG4gIGNvbmZpZ0ZhY3RvcnkuY3JlYXRlQ29kZUV4YW1wbGUoKTtcclxufSk7Il19
