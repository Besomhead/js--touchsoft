var config={operatorName:"Operator",chatURL:"https://besomhead-chat.firebaseio.com/",requests:"fetch"},messageFactory=function(){function e(){}function a(e,t,n){var a,r,s;this.day=e.getDate(),this.month=e.getMonth(),this.time=(r=(a=e).getHours(),s=a.getMinutes(),(r<10?"0":"").concat(r.toString()).concat(":").concat(s<10?"0":"").concat(s.toString())),this.sender=t,this.body=n}return e.prototype.getMessage=function(e,t,n){return new a(e,t,n)},new e}(),DM=function(){function e(){}return e.prototype.getDOMElement=function(e){return"string"==typeof e?document.getElementById(e):e},e.prototype.getDOMChildrenByTag=function(e,t){return Array.from(this.getDOMElement(e).getElementsByTagName(t))},e.prototype.getDOMChildrenByClass=function(e,t){return Array.from(this.getDOMElement(e).getElementsByClassName(t))},e.prototype.createDOMElement=document.createElement.bind(document),e.prototype.appendDOMElement=function(e,t){this.getDOMElement(e).appendChild(t)},e.prototype.removeDOMElement=function(e,t){this.getDOMElement(e).removeChild(this.getDOMElement(t))},e.prototype.addListener=function(e,t,n){this.getDOMElement(e).addEventListener(t,n)},e.prototype.removeListener=function(e,t,n){this.getDOMElement(e).removeEventListener(t,n)},e.prototype.addCSSClass=function(t){var n=this;Array.from(arguments).slice(1).forEach(function(e){n.getDOMElement(t).classList.add(e)})},e.prototype.removeCSSClass=function(e,t){this.getDOMElement(e).classList.remove(t)},new e}(),HTTP_GET="GET",HTTP_POST="POST",HTTP_PUT="PUT",REQUEST_FETCH="fetch",REQUEST_XHR="xhr",storageManager=function(i){function e(){}function d(e,t,n){return fetch(storageManager.getStoragePath(e),(a=t,r=n,s={method:a,headers:{Accept:"application/json","Content-Type":"application/json"}},a!==HTTP_GET&&(s.body=JSON.stringify(r)),s)).then(function(e){return e.json()}).then(function(e){return e});var a,r,s}return e.prototype.getStoragePath=function(e){return i.chatURL+e+".json"},e.prototype.sendRequestToStorage=function(e,t,n){var a,r,s,o;return i.requests===REQUEST_FETCH?a=d(e,t,n):i.requests===REQUEST_XHR&&(r=e,s=t,o=n,a=new Promise(function(e,t){var n=new XMLHttpRequest;n.open(s,storageManager.getStoragePath(r),!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(){e(JSON.parse(n.response))}),n.addEventListener("error",function(){t(n.statusText)}),n.send(JSON.stringify(o))})),a},new e}(config),updatesManager=function(){function e(){this.responseData=void 0}return e.prototype.getDataFromStorage=function(e){var t=new XMLHttpRequest;t.addEventListener("readystatechange",function(){var e=t.responseText;if(this.status&&this.responseText){if(e.lastIndexOf("event:")!==e.lastIndexOf("event: put"))return;window.postMessage(JSON.parse(e.slice(e.lastIndexOf("data:")+"data:".length,e.lastIndexOf("}")+1)),window.location)}}),t.open("GET",storageManager.getStoragePath(e),!0),t.setRequestHeader("Accept","text/event-stream"),t.send()},new e}(),dashboardFactory=function(m){var f,i="Вы",O=12e4,d="operators-dashboard-users-list-container",c="operators-dashboard-selected-user-container",E="operators-dashboard-selected-user-inner",o="operators-dashboard-user-chat-messages",l="operators-dashboard-user-chat-input",M="dashboard-single-user-container",b="dashboard-single-user-container-unread",T="dashboard-user-status-online",C="dashboard-user-status-offline",n=-1,a=1;function e(){}function u(){DM.removeDOMElement(c,E)}function S(e){return DM.getDOMChildrenByTag(e,"label").find(function(e){return e.hidden}).innerHTML}function y(e){var t=DM.getDOMElement(o),n=DM.createDOMElement("div"),a=DM.createDOMElement("div");n.innerHTML=e.sender,a.innerHTML=e.body,DM.appendDOMElement(t,n),DM.appendDOMElement(t,a)}function D(e){var t=DM.createDOMElement("fieldset"),n=DM.createDOMElement("legend"),a=DM.createDOMElement("div"),r=DM.createDOMElement("textarea"),s=DM.createDOMElement("button");return DM.addCSSClass(t,"dashboard-selected-user-chat-container"),n.innerHTML="Чат",a.id=o,DM.addCSSClass(a,"dashboard-selected-user-chat-messages"),r.id=l,DM.addCSSClass(r,"dashboard-selected-user-chat-input"),r.placeholder="Новое сообщение пользователю",DM.addCSSClass(s,"dashboard-selected-user-chat-button"),s.innerHTML="Send",DM.addListener(s,"click",function(e){var t,n=DM.getDOMElement(l).value;""!==n&&(t=messageFactory.getMessage(new Date,m.operatorName+":",n),DM.getDOMElement(l).value="",storageManager.sendRequestToStorage(S(e)+"/messages",HTTP_POST,t))}.bind(null,e)),DM.appendDOMElement(t,n),DM.appendDOMElement(t,a),DM.appendDOMElement(t,r),DM.appendDOMElement(t,s),t}function r(e){var t,n,a=DM.createDOMElement("fieldset"),r=DM.createDOMElement("legend"),s=DM.createDOMElement("button"),o=DM.createDOMElement("label"),i=DM.createDOMElement("div");a.id=E,DM.addCSSClass(a,"dashboard-selected-user-container-inner"),r.innerHTML="Active: "+DM.getDOMChildrenByTag(e,"label").shift().innerHTML,s.innerHTML="x",DM.addCSSClass(s,"dashboard-selected-user-container-button"),DM.addListener(s,"click",u),DM.addCSSClass(i,"dashboard-selected-user-controls-container"),o.innerHTML=S(e),o.hidden=!0,DM.appendDOMElement(i,D(e)),DM.appendDOMElement(i,(t=DM.createDOMElement("fieldset"),n=DM.createDOMElement("legend"),DM.addCSSClass(t,"dashboard-selected-user-controller"),n.innerHTML="Control",DM.appendDOMElement(t,n),t)),DM.appendDOMElement(a,r),DM.appendDOMElement(a,s),DM.appendDOMElement(a,i),DM.appendDOMElement(a,o),DM.appendDOMElement(c,a)}function v(e){storageManager.sendRequestToStorage(S(e)+"/read",HTTP_PUT,!0)}function p(e){var t,n;e.target.classList.contains(M)&&(DM.getDOMElement(E)&&u(),DM.removeCSSClass(e.target,b),r(e.target),t=e.target,(n=f[S(t)].messages)&&Object.keys(n).forEach(function(e){y(n[e])}),v(e.target))}function L(e,t,n){DM.removeCSSClass(e,t),DM.addCSSClass(e,n)}function s(e,t){var n=DM.createDOMElement("div"),a=DM.createDOMElement("label"),r=DM.createDOMElement("label"),s=DM.createDOMElement("label"),o=DM.createDOMElement("div");return DM.addCSSClass(n,M),e.read||DM.addCSSClass(n,b),a.innerHTML=void 0===e.userName||e.userName===i?t:e.userName,r.innerHTML=t,r.hidden=!0,DM.addCSSClass(o,"dashboard-user-status"),!function(e){var t,n,a,r;if(!e.messages)return!1;for(r=Object.keys(e.messages),t=e.messages[r.pop()];t&&t.sender===m.operatorName.concat(":");)t=e.messages[r.pop()];return!!t&&(n=t.time.split(":"),a=new Date((new Date).getFullYear(),Number(t.month),Number(t.day),Number(n.shift()),Number(n.shift())),new Date-a<=O)}(e)?L(o,C,C):L(o,T,T),s.innerHTML=e.chatState,DM.appendDOMElement(n,a),DM.appendDOMElement(n,r),DM.appendDOMElement(n,o),DM.appendDOMElement(n,s),DM.addListener(d,"click",p),DM.appendDOMElement(d,n),n}function h(e){var t=e||DM.getDOMChildrenByClass(d,M);return t.forEach(function(e){DM.removeDOMElement(d,e)}),t}function t(e){var t=e.target.value.toLowerCase(),n=DM.getDOMChildrenByClass(d,M);if(""===t)return h(n),void dashboardFactory.loadUsersList(f);n.forEach(function(e){-1===DM.getDOMChildrenByTag(e,"label").shift().innerHTML.toLowerCase().indexOf(t)&&DM.removeDOMElement(d,e)})}function g(e,t){return DM.getDOMChildrenByTag(e,"label").shift().innerHTML.toLowerCase()<DM.getDOMChildrenByTag(t,"label").shift().innerHTML.toLowerCase()?n:a}function H(e){return DM.getDOMChildrenByTag(e,"div").shift().classList.contains(T)?n:a}function w(e){return"chat-expanded"===DM.getDOMChildrenByTag(e,"label").pop().innerHTML?n:a}function N(e){return e.classList.contains(b)?n:a}function B(e){var t=DM.getDOMChildrenByTag(e.target,"option").find(function(e){return e.selected}),n=h();function a(e){n.sort(e),n.forEach(function(e){DM.appendDOMElement(d,e)})}switch(t.innerHTML){case"User Name":a(g);break;case"Online":a(H);break;case"Chat state":a(w);break;case"Unread":a(N);break;default:dashboardFactory.loadUsersList(f)}}function U(e){e.target.value="",h(),dashboardFactory.loadUsersList(f)}function P(e){return f[e]||(f[e]={chatState:"chat-collapsed",read:"true"}),f[e]}function R(t,e){var n;return(n=DM.getDOMChildrenByClass(d,M).find(function(e){return S(e)===t}))||(n=s(e,t)),n}function x(e){var t,n,a,r,s,o,i,d,c,l,M,u,D=e.data.path.split("/").slice(1),p=D.shift(),h=e.data.data,g=!0;if(""===p)dashboardFactory.loadUsersList(h),f=h;else if(p.match(/user\d{13,}/)){switch(D.shift()){case"read":!0===h&&(g=!1),M=h,u=R(l=p,P(l)),(f[l].read=M)?DM.removeCSSClass(u,b):DM.addCSSClass(u,b);break;case"chatState":d=h,c=R(i=p,P(i)),f[i].chatState=d,DM.getDOMChildrenByTag(c,"label").pop().innerHTML=d;break;case"messages":-1!==h.sender.indexOf(m.operatorName)&&(g=!1),r=p,s=h,o=D.shift(),f[r].messages||(f[r].messages={}),f[r].messages[o]=s,DM.getDOMElement(E)&&S(E)===r&&(v(R(r,f[r])),y(s));break;case"userName":n=h,a=R(t=p,P(t)),f[t].userName=n,DM.getDOMChildrenByTag(a,"label").shift().innerHTML=n}g&&function(e){var t=DM.getDOMChildrenByTag(R(e,f[e]),"div").shift();L(t,C,T),setTimeout(L.bind(this,t,T,C),O)}(p)}}return e.prototype.loadUsersList=function(t){Object.keys(t).forEach(function(e){s(t[e],e)})},e.prototype.initListeners=function(){DM.addListener("operators-dashboard-users-filter-bar","change",t),DM.addListener("operators-dashboard-users-filter-bar","focus",U),DM.addListener("operators-dashboard-users-sort-bar","change",B)},e.prototype.subscribeOnUpdates=function(){window.addEventListener("message",x,!1),updatesManager.getDataFromStorage("")},new e}(config);window.addEventListener("load",function(){dashboardFactory.initListeners(),dashboardFactory.subscribeOnUpdates()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZC5qcyJdLCJuYW1lcyI6WyJjb25maWciLCJvcGVyYXRvck5hbWUiLCJjaGF0VVJMIiwicmVxdWVzdHMiLCJtZXNzYWdlRmFjdG9yeSIsIk1lc3NhZ2VGYWN0b3J5IiwiTWVzc2FnZSIsImRhdGUiLCJzZW5kZXIiLCJib2R5IiwiaG91cnMiLCJtaW51dGVzIiwidGhpcyIsImRheSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwidGltZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImNvbmNhdCIsInRvU3RyaW5nIiwicHJvdG90eXBlIiwiZ2V0TWVzc2FnZSIsIkRNIiwiRE9NTWFuYWdlciIsImdldERPTUVsZW1lbnQiLCJpZHRmIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldERPTUNoaWxkcmVuQnlUYWciLCJyb290IiwidGFnIiwiQXJyYXkiLCJmcm9tIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRET01DaGlsZHJlbkJ5Q2xhc3MiLCJjbGFzc05hbWUiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY3JlYXRlRE9NRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJiaW5kIiwiYXBwZW5kRE9NRWxlbWVudCIsImVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInJlbW92ZURPTUVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsImFkZExpc3RlbmVyIiwiZXZlbnQiLCJjYWxsYmFjayIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRDU1NDbGFzcyIsInNlbGYiLCJhcmd1bWVudHMiLCJzbGljZSIsImZvckVhY2giLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmVDU1NDbGFzcyIsInJlbW92ZSIsIkhUVFBfR0VUIiwiSFRUUF9QT1NUIiwiSFRUUF9QVVQiLCJSRVFVRVNUX0ZFVENIIiwiUkVRVUVTVF9YSFIiLCJzdG9yYWdlTWFuYWdlciIsIlN0b3JhZ2VNYW5hZ2VyIiwic2VuZFJlcXVlc3RUb1N0b3JhZ2VCeUZldGNoIiwiZXh0cmFQYXRoIiwicmVxdWVzdE1ldGhvZCIsImRhdGEiLCJmZXRjaCIsImdldFN0b3JhZ2VQYXRoIiwiY29uZmlnT2JqIiwibWV0aG9kIiwiaGVhZGVycyIsIkFjY2VwdCIsIkNvbnRlbnQtVHlwZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwicmVzcG9uc2VEYXRhIiwic2VuZFJlcXVlc3RUb1N0b3JhZ2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJwYXJzZSIsInN0YXR1c1RleHQiLCJzZW5kIiwidXBkYXRlc01hbmFnZXIiLCJVcGRhdGVzTWFuYWdlciIsInVuZGVmaW5lZCIsImdldERhdGFGcm9tU3RvcmFnZSIsInhodHRwIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzIiwibGFzdEluZGV4T2YiLCJ3aW5kb3ciLCJwb3N0TWVzc2FnZSIsImxlbmd0aCIsImxvY2F0aW9uIiwiZGFzaGJvYXJkRmFjdG9yeSIsInVzZXJzRGF0YSIsIkRFRkFVTFRfVVNFUk5BTUUiLCJVU0VSX09OTElORV9USU1FT1VUIiwiVVNFUlNfTElTVF9DT05UQUlORVJfSUQiLCJTRUxFQ1RFRF9VU0VSX0NPTlRBSU5FUl9JRCIsIlNFTEVDVEVEX1VTRVJfSU5ORVJfSUQiLCJVU0VSX0NIQVRfTUVTU0FHRVNfSUQiLCJVU0VSX0NIQVRfSU5QVVRfSUQiLCJTSU5HTEVfVVNFUl9DTEFTU19OQU1FIiwiVU5SRUFEX0NMQVNTX05BTUUiLCJPTkxJTkVfQ0xBU1NfTkFNRSIsIk9GRkxJTkVfQ0xBU1NfTkFNRSIsIkxFU1MiLCJNT1JFIiwiRGFzaGJvYXJkRmFjdG9yeSIsImNsb3NlU2VsZWN0ZWRVc2VyQ29udGFpbmVyIiwiZ2V0VXNlcklEIiwidXNlckNvbnRhaW5lciIsImZpbmQiLCJmaWVsZCIsImhpZGRlbiIsImlubmVySFRNTCIsImFwcGVuZFNpbmdsZU1lc3NhZ2UiLCJtZXNzYWdlIiwibWVzc2FnZXMiLCJjcmVhdGVVc2VyQ2hhdENvbnRhaW5lciIsInVzZXJDaGF0Q29udGFpbmVyIiwidXNlckNoYXRMZWdlbmQiLCJ1c2VyQ2hhdE1lc3NhZ2VzTGlzdCIsInVzZXJDaGF0TWVzc2FnZUlucHV0IiwidXNlckNoYXRTZW5kQnV0dG9uIiwiaWQiLCJwbGFjZWhvbGRlciIsIm9wZXJhdG9yTWVzc2FnZSIsImlucHV0VmFsdWUiLCJ2YWx1ZSIsIkRhdGUiLCJhcHBlbmRTZWxlY3RlZFVzZXJDb250YWluZXIiLCJ1c2VyQ29udHJvbGxlckNvbnRhaW5lciIsInVzZXJDb250cm9sbGVyTGVnZW5kIiwic2VsZWN0ZWRVc2VyQ29udGFpbmVyIiwidXNlckNvbnRhaW5lckxlZ2VuZCIsInVzZXJDb250YWluZXJDbG9zZUJ1dHRvbiIsInVzZXJJREZpZWxkIiwidXNlckNvbnRhaW5lcnNJbm5lciIsInNoaWZ0Iiwic2VuZFJlYWRNYXJrVG9TdG9yYWdlIiwic2VsZWN0VXNlciIsInRhcmdldCIsImNvbnRhaW5zIiwiT2JqZWN0Iiwia2V5cyIsImtleSIsInNldFVzZXJTdGF0dXMiLCJzdGF0dXNDb250YWluZXIiLCJjbGFzc1RvUmVtb3ZlIiwiY2xhc3NUb0FkZCIsImFwcGVuZFNpbmdsZVVzZXIiLCJ1c2VyIiwiZ2VuZXJhdGVkIiwidXNlckVsZW1lbnQiLCJ1c2VyTmFtZUVsZW1lbnQiLCJnZW5lcmF0ZWRGaWVsZCIsImNoYXRTdGF0ZUVsZW1lbnQiLCJ1c2VyU3RhdHVzRWxlbWVudCIsInJlYWQiLCJ1c2VyTmFtZSIsImxhc3RNZXNzYWdlIiwibGFzdE1lc3NhZ2VUaW1lIiwibGFzdE1lc3NhZ2VEYXRlIiwibWVzc2FnZXNLZXlzIiwicG9wIiwic3BsaXQiLCJnZXRGdWxsWWVhciIsIk51bWJlciIsImlzVXNlck9ubGluZSIsImNoYXRTdGF0ZSIsImNsZWFyVXNlcnMiLCJ1c2Vyc0NvbnRhaW5lcnMiLCJjb250YWluZXJzIiwiZmlsdGVyVXNlcnMiLCJmaWx0ZXJWYWx1ZSIsInRvTG93ZXJDYXNlIiwibG9hZFVzZXJzTGlzdCIsImluZGV4T2YiLCJzb3J0VXNlcnNCeVVzZXJOYW1lIiwiY29udGFpbmVyMSIsImNvbnRhaW5lcjIiLCJzb3J0VXNlcnNCeU9ubGluZVN0YXR1cyIsImNvbnRhaW5lciIsInNvcnRVc2Vyc0J5Q2hhdFN0YXRlIiwic29ydFVzZXJzQnlVbnJlYWQiLCJzb3J0VXNlcnMiLCJzZWxlY3RlZCIsIm9wdGlvbiIsInNvcnRCeUFuZEFwcGVuZCIsInNvcnRGdW5jIiwic29ydCIsImNsZWFyRmlsdGVyIiwiZ2V0VXNlciIsImdldFVzZXJDb250YWluZXIiLCJ1c2VyS2V5IiwiYXBwbHlVcGRhdGVzIiwibmFtZSIsIm1lc3NhZ2VLZXkiLCJwYXRoRnJhZ21lbnRzIiwicGF0aCIsImZyYWdtZW50IiwiaXNVcGRhdGVGcm9tVXNlciIsIm1hdGNoIiwic2V0VGltZW91dCIsIm1hbmFnZVVzZXJPbmxpbmUiLCJ1c2VycyIsImluaXRMaXN0ZW5lcnMiLCJzdWJzY3JpYmVPblVwZGF0ZXMiXSwibWFwcGluZ3MiOiJBQUdBLElBQUlBLE9BQVMsQ0FDWEMsYUFBYyxXQUNkQyxRQUFTLHlDQUNUQyxTQUFVLFNBS1JDLGVBQWlCLFdBQ25CLFNBQVNDLEtBYVQsU0FBU0MsRUFBUUMsRUFBTUMsRUFBUUMsR0FYL0IsSUFBd0JGLEVBQ2xCRyxFQUNBQyxFQVVKQyxLQUFLQyxJQUFNTixFQUFLTyxVQUNoQkYsS0FBS0csTUFBUVIsRUFBS1MsV0FDbEJKLEtBQUtLLE1BYkRQLEdBRGtCSCxFQWNLQSxHQWJWVyxXQUNiUCxFQUFVSixFQUFLWSxjQUVYVCxFQUFRLEdBQUssSUFBTSxJQUN4QlUsT0FBT1YsRUFBTVcsWUFDYkQsT0FBTyxLQUNQQSxPQUFPVCxFQUFVLEdBQUssSUFBTSxJQUM1QlMsT0FBT1QsRUFBUVUsYUFPbEJULEtBQUtKLE9BQVNBLEVBQ2RJLEtBQUtILEtBQU9BLEVBV2QsT0FSQUosRUFBZWlCLFVBQVVDLFdBQWEsU0FDcENo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SixJQVV2QixPQXpQQTdGLEVBQWlCdEcsVUFBVTJLLGNBQWdCLFNBQXVCNkIsR0FDaEU5RCxPQUFPQyxLQUFLNkQsR0FBT3JLLFFBQVEsU0FBb0J5RyxHQUM3Q0ssRUFBaUJ1RCxFQUFNNUQsR0FBTUEsTUE0R2pDdEMsRUFBaUJ0RyxVQUFVeU0sY0FBZ0IsV0FDekN2TSxHQUFHdUIsWUFDRCx1Q0FDQSxTQUNBK0ksR0FFRnRLLEdBQUd1QixZQUNELHVDQUNBLFFBQ0FpSyxHQUVGeEwsR0FBR3VCLFlBQVkscUNBQXNDLFNBQVUySixJQTJIakU5RSxFQUFpQnRHLFVBQVUwTSxtQkFBcUIsV0FDOUN2SCxPQUFPdkQsaUJBQWlCLFVBQVdrSyxHQUFjLEdBQ2pEbkgsZUFBZUcsbUJBQW1CLEtBRzdCLElBQUl3QixFQTdmVSxDQThmcEI1SCxRQUVIeUcsT0FBT3ZELGlCQUFpQixPQUFRLFdBQzlCMkQsaUJBQWlCa0gsZ0JBQ2pCbEgsaUJBQWlCbUgiLCJmaWxlIjoiZGFzaGJvYXJkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIGRhc2hib2FyZEZhY3RvcnkgKi9cclxuLyogZXhwb3J0ZWQgY29uZmlnICovXHJcblxyXG52YXIgY29uZmlnID0ge1xyXG4gIG9wZXJhdG9yTmFtZTogXCJPcGVyYXRvclwiLFxyXG4gIGNoYXRVUkw6IFwiaHR0cHM6Ly9iZXNvbWhlYWQtY2hhdC5maXJlYmFzZWlvLmNvbS9cIixcclxuICByZXF1ZXN0czogXCJmZXRjaFwiXHJcbn07XHJcblxyXG4vKiBleHBvcnRlZCBtZXNzYWdlRmFjdG9yeSAqL1xyXG5cclxudmFyIG1lc3NhZ2VGYWN0b3J5ID0gKGZ1bmN0aW9uIG1lc3NhZ2VGYWN0b3J5TW9kdWxlKCkge1xyXG4gIGZ1bmN0aW9uIE1lc3NhZ2VGYWN0b3J5KCkge31cclxuXHJcbiAgZnVuY3Rpb24gZ2V0Q3VycmVudFRpbWUoZGF0ZSkge1xyXG4gICAgdmFyIGhvdXJzID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgdmFyIG1pbnV0ZXMgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuXHJcbiAgICByZXR1cm4gKGhvdXJzIDwgMTAgPyBcIjBcIiA6IFwiXCIpXHJcbiAgICAgIC5jb25jYXQoaG91cnMudG9TdHJpbmcoKSlcclxuICAgICAgLmNvbmNhdChcIjpcIilcclxuICAgICAgLmNvbmNhdChtaW51dGVzIDwgMTAgPyBcIjBcIiA6IFwiXCIpXHJcbiAgICAgIC5jb25jYXQobWludXRlcy50b1N0cmluZygpKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIE1lc3NhZ2UoZGF0ZSwgc2VuZGVyLCBib2R5KSB7XHJcbiAgICB0aGlzLmRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgdGhpcy5tb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcclxuICAgIHRoaXMudGltZSA9IGdldEN1cnJlbnRUaW1lKGRhdGUpO1xyXG4gICAgdGhpcy5zZW5kZXIgPSBzZW5kZXI7XHJcbiAgICB0aGlzLmJvZHkgPSBib2R5O1xyXG4gIH1cclxuXHJcbiAgTWVzc2FnZUZhY3RvcnkucHJvdG90eXBlLmdldE1lc3NhZ2UgPSBmdW5jdGlvbiBnZXRNZXNzYWdlKFxyXG4gICAgZGF0ZSxcclxuICAgIHNlbmRlcixcclxuICAgIGJvZHlcclxuICApIHtcclxuICAgIHJldHVybiBuZXcgTWVzc2FnZShkYXRlLCBzZW5kZXIsIGJvZHkpO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBuZXcgTWVzc2FnZUZhY3RvcnkoKTtcclxufSkoKTtcclxuLyogZXhwb3J0ZWQgRE0gKi9cclxuXHJcbnZhciBETSA9IChmdW5jdGlvbiBET01NYW5hZ2VyTW9kdWxlKCkge1xyXG4gIGZ1bmN0aW9uIERPTU1hbmFnZXIoKSB7fVxyXG5cclxuICBET01NYW5hZ2VyLnByb3RvdHlwZS5nZXRET01FbGVtZW50ID0gZnVuY3Rpb24gZ2V0RWxlbWVudChpZHRmKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIGlkdGYgPT09IFwic3RyaW5nXCIgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZHRmKSA6IGlkdGY7XHJcbiAgfTtcclxuICBET01NYW5hZ2VyLnByb3RvdHlwZS5nZXRET01DaGlsZHJlbkJ5VGFnID0gZnVuY3Rpb24gZ2V0Q2hpbGRyZW5CeVRhZ05hbWUoXHJcbiAgICByb290LFxyXG4gICAgdGFnXHJcbiAgKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmdldERPTUVsZW1lbnQocm9vdCkuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnKSk7XHJcbiAgfTtcclxuICBET01NYW5hZ2VyLnByb3RvdHlwZS5nZXRET01DaGlsZHJlbkJ5Q2xhc3MgPSBmdW5jdGlvbiBnZXRDaGlsZHJlbkJ5Q2xhc3NOYW1lKFxyXG4gICAgcm9vdCxcclxuICAgIGNsYXNzTmFtZVxyXG4gICkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuZ2V0RE9NRWxlbWVudChyb290KS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSlcclxuICAgICk7XHJcbiAgfTtcclxuICBET01NYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVET01FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudC5iaW5kKGRvY3VtZW50KTtcclxuICBET01NYW5hZ2VyLnByb3RvdHlwZS5hcHBlbmRET01FbGVtZW50ID0gZnVuY3Rpb24gYXBwZW5kKHJvb3QsIGVsZW1lbnQpIHtcclxuICAgIHRoaXMuZ2V0RE9NRWxlbWVudChyb290KS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLnJlbW92ZURPTUVsZW1lbnQgPSBmdW5jdGlvbiByZW1vdmUocm9vdCwgZWxlbWVudCkge1xyXG4gICAgdGhpcy5nZXRET01FbGVtZW50KHJvb3QpLnJlbW92ZUNoaWxkKHRoaXMuZ2V0RE9NRWxlbWVudChlbGVtZW50KSk7XHJcbiAgfTtcclxuICBET01NYW5hZ2VyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICByb290LFxyXG4gICAgZXZlbnQsXHJcbiAgICBjYWxsYmFja1xyXG4gICkge1xyXG4gICAgdGhpcy5nZXRET01FbGVtZW50KHJvb3QpLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrKTtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuICAgIHJvb3QsXHJcbiAgICBldmVudCxcclxuICAgIGNhbGxiYWNrXHJcbiAgKSB7XHJcbiAgICB0aGlzLmdldERPTUVsZW1lbnQocm9vdCkucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xyXG4gIH07XHJcbiAgRE9NTWFuYWdlci5wcm90b3R5cGUuYWRkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBhZGRDU1NDbGFzcyhyb290KSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBBcnJheS5mcm9tKGFyZ3VtZW50cylcclxuICAgICAgLnNsaWNlKDEpXHJcbiAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIGFkZENsYXNzZXMoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgc2VsZi5nZXRET01FbGVtZW50KHJvb3QpLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuICBET01NYW5hZ2VyLnByb3RvdHlwZS5yZW1vdmVDU1NDbGFzcyA9IGZ1bmN0aW9uIHJlbW92ZUNTU0NsYXNzKFxyXG4gICAgcm9vdCxcclxuICAgIGNsYXNzTmFtZVxyXG4gICkge1xyXG4gICAgdGhpcy5nZXRET01FbGVtZW50KHJvb3QpLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gbmV3IERPTU1hbmFnZXIoKTtcclxufSkoKTtcclxuLyogZXhwb3J0ZWQgc3RvcmFnZU1hbmFnZXIgKi9cclxuLyogZXhwb3J0ZWQgSFRUUF9HRVQgSFRUUF9QT1NUIEhUVFBfUFVUICovXHJcbi8qIGdsb2JhbCBjb25maWcgKi9cclxuXHJcbnZhciBIVFRQX0dFVCA9IFwiR0VUXCI7XHJcbnZhciBIVFRQX1BPU1QgPSBcIlBPU1RcIjtcclxudmFyIEhUVFBfUFVUID0gXCJQVVRcIjtcclxudmFyIFJFUVVFU1RfRkVUQ0ggPSBcImZldGNoXCI7XHJcbnZhciBSRVFVRVNUX1hIUiA9IFwieGhyXCI7XHJcblxyXG52YXIgc3RvcmFnZU1hbmFnZXIgPSAoZnVuY3Rpb24gc3RvcmFnZU1hbmFnZXJNb2R1bGUoY29uZmlnKSB7XHJcbiAgZnVuY3Rpb24gU3RvcmFnZU1hbmFnZXIoKSB7fVxyXG5cclxuICBTdG9yYWdlTWFuYWdlci5wcm90b3R5cGUuZ2V0U3RvcmFnZVBhdGggPSBmdW5jdGlvbiBnZXRTdG9yYWdlUGF0aChleHRyYVBhdGgpIHtcclxuICAgIHJldHVybiBjb25maWcuY2hhdFVSTCArIGV4dHJhUGF0aCArIFwiLmpzb25cIjtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBnZXRSZXF1ZXN0Q29uZmlnT2JqKHJlcXVlc3RNZXRob2QsIGRhdGEpIHtcclxuICAgIHZhciBjb25maWdPYmogPSB7XHJcbiAgICAgIG1ldGhvZDogcmVxdWVzdE1ldGhvZCxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAocmVxdWVzdE1ldGhvZCAhPT0gSFRUUF9HRVQpIHtcclxuICAgICAgY29uZmlnT2JqLmJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29uZmlnT2JqO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2VuZFJlcXVlc3RUb1N0b3JhZ2VCeUZldGNoKGV4dHJhUGF0aCwgcmVxdWVzdE1ldGhvZCwgZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKFxyXG4gICAgICBzdG9yYWdlTWFuYWdlci5nZXRTdG9yYWdlUGF0aChleHRyYVBhdGgpLFxyXG4gICAgICBnZXRSZXF1ZXN0Q29uZmlnT2JqKHJlcXVlc3RNZXRob2QsIGRhdGEpXHJcbiAgICApXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uIGdldFJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24gZ2V0UmVzcG9uc2VEYXRhKHJlc3BvbnNlRGF0YSkge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZURhdGE7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2VuZFJlcXVlc3RUb1N0b3JhZ2VCeVhIUihleHRyYVBhdGgsIG1ldGhvZCwgZGF0YSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIHNlbmRYSFJSZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgICB4aHIub3BlbihtZXRob2QsIHN0b3JhZ2VNYW5hZ2VyLmdldFN0b3JhZ2VQYXRoKGV4dHJhUGF0aCksIHRydWUpO1xyXG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uIG9uTG9hZCgpIHtcclxuICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGZ1bmN0aW9uIG9uRXJyb3IoKSB7XHJcbiAgICAgICAgcmVqZWN0KHhoci5zdGF0dXNUZXh0KTtcclxuICAgICAgfSk7XHJcbiAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgU3RvcmFnZU1hbmFnZXIucHJvdG90eXBlLnNlbmRSZXF1ZXN0VG9TdG9yYWdlID0gZnVuY3Rpb24gc2VuZFJlcXVlc3RUb1N0b3JhZ2UoXHJcbiAgICBleHRyYVBhdGgsXHJcbiAgICBtZXRob2QsXHJcbiAgICBkYXRhXHJcbiAgKSB7XHJcbiAgICB2YXIgcmVzcG9uc2U7XHJcblxyXG4gICAgaWYgKGNvbmZpZy5yZXF1ZXN0cyA9PT0gUkVRVUVTVF9GRVRDSCkge1xyXG4gICAgICByZXNwb25zZSA9IHNlbmRSZXF1ZXN0VG9TdG9yYWdlQnlGZXRjaChleHRyYVBhdGgsIG1ldGhvZCwgZGF0YSk7XHJcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5yZXF1ZXN0cyA9PT0gUkVRVUVTVF9YSFIpIHtcclxuICAgICAgcmVzcG9uc2UgPSBzZW5kUmVxdWVzdFRvU3RvcmFnZUJ5WEhSKGV4dHJhUGF0aCwgbWV0aG9kLCBkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIG5ldyBTdG9yYWdlTWFuYWdlcigpO1xyXG59KShjb25maWcpO1xyXG4vKiBleHBvcnRlZCB1cGRhdGVzTWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgc3RvcmFnZU1hbmFnZXIgKi9cclxuXHJcbnZhciB1cGRhdGVzTWFuYWdlciA9IChmdW5jdGlvbiB1cGRhdGVzTWFuYWdlck1vZHVsZSgpIHtcclxuICB2YXIgSlNPTl9NQVJLID0gXCJkYXRhOlwiO1xyXG5cclxuICBmdW5jdGlvbiBVcGRhdGVzTWFuYWdlcigpIHtcclxuICAgIHRoaXMucmVzcG9uc2VEYXRhID0gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgVXBkYXRlc01hbmFnZXIucHJvdG90eXBlLmdldERhdGFGcm9tU3RvcmFnZSA9IGZ1bmN0aW9uIGdldERhdGFGcm9tU3RvcmFnZShcclxuICAgIGV4dHJhUGF0aFxyXG4gICkge1xyXG4gICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgeGh0dHAuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIiwgZnVuY3Rpb24gb25EYXRhUmVjZWl2ZWQoKSB7XHJcbiAgICAgIHZhciByZXNwb25zZSA9IHhodHRwLnJlc3BvbnNlVGV4dDtcclxuXHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cyAmJiB0aGlzLnJlc3BvbnNlVGV4dCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHJlc3BvbnNlLmxhc3RJbmRleE9mKFwiZXZlbnQ6XCIpICE9PSByZXNwb25zZS5sYXN0SW5kZXhPZihcImV2ZW50OiBwdXRcIilcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKFxyXG4gICAgICAgICAgSlNPTi5wYXJzZShcclxuICAgICAgICAgICAgcmVzcG9uc2Uuc2xpY2UoXHJcbiAgICAgICAgICAgICAgcmVzcG9uc2UubGFzdEluZGV4T2YoSlNPTl9NQVJLKSArIEpTT05fTUFSSy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgcmVzcG9uc2UubGFzdEluZGV4T2YoXCJ9XCIpICsgMVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICApLFxyXG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgeGh0dHAub3BlbihcIkdFVFwiLCBzdG9yYWdlTWFuYWdlci5nZXRTdG9yYWdlUGF0aChleHRyYVBhdGgpLCB0cnVlKTtcclxuICAgIHhodHRwLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJ0ZXh0L2V2ZW50LXN0cmVhbVwiKTtcclxuICAgIHhodHRwLnNlbmQoKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gbmV3IFVwZGF0ZXNNYW5hZ2VyKCk7XHJcbn0pKCk7XHJcbi8qIGV4cG9ydGVkIGRhc2hib2FyZEZhY3RvcnkgKi9cclxuLyogZ2xvYmFsIG1lc3NhZ2VGYWN0b3J5ICovXHJcbi8qIGdsb2JhbCBETSAqL1xyXG4vKiBnbG9iYWwgc3RvcmFnZU1hbmFnZXIgSFRUUF9QT1NUIEhUVFBfUFVUICovXHJcbi8qIGdsb2JhbCBjb25maWcgKi9cclxuLyogZ2xvYmFsIHVwZGF0ZXNNYW5hZ2VyICovXHJcblxyXG52YXIgZGFzaGJvYXJkRmFjdG9yeSA9IChmdW5jdGlvbiBkYXNoYm9hcmRGYWN0b3J5TW9kdWxlKGNvbmZpZykge1xyXG4gIHZhciBERUZBVUxUX1VTRVJOQU1FID0gXCLQktGLXCI7XHJcbiAgdmFyIFVTRVJfT05MSU5FX1RJTUVPVVQgPSAxMjAwMDA7XHJcbiAgdmFyIFVTRVJTX0xJU1RfQ09OVEFJTkVSX0lEID0gXCJvcGVyYXRvcnMtZGFzaGJvYXJkLXVzZXJzLWxpc3QtY29udGFpbmVyXCI7XHJcbiAgdmFyIFNFTEVDVEVEX1VTRVJfQ09OVEFJTkVSX0lEID1cclxuICAgIFwib3BlcmF0b3JzLWRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNvbnRhaW5lclwiO1xyXG4gIHZhciBTRUxFQ1RFRF9VU0VSX0lOTkVSX0lEID0gXCJvcGVyYXRvcnMtZGFzaGJvYXJkLXNlbGVjdGVkLXVzZXItaW5uZXJcIjtcclxuICB2YXIgVVNFUl9DSEFUX01FU1NBR0VTX0lEID0gXCJvcGVyYXRvcnMtZGFzaGJvYXJkLXVzZXItY2hhdC1tZXNzYWdlc1wiO1xyXG4gIHZhciBVU0VSX0NIQVRfSU5QVVRfSUQgPSBcIm9wZXJhdG9ycy1kYXNoYm9hcmQtdXNlci1jaGF0LWlucHV0XCI7XHJcbiAgdmFyIFNJTkdMRV9VU0VSX0NMQVNTX05BTUUgPSBcImRhc2hib2FyZC1zaW5nbGUtdXNlci1jb250YWluZXJcIjtcclxuICB2YXIgVU5SRUFEX0NMQVNTX05BTUUgPSBcImRhc2hib2FyZC1zaW5nbGUtdXNlci1jb250YWluZXItdW5yZWFkXCI7XHJcbiAgdmFyIE9OTElORV9DTEFTU19OQU1FID0gXCJkYXNoYm9hcmQtdXNlci1zdGF0dXMtb25saW5lXCI7XHJcbiAgdmFyIE9GRkxJTkVfQ0xBU1NfTkFNRSA9IFwiZGFzaGJvYXJkLXVzZXItc3RhdHVzLW9mZmxpbmVcIjtcclxuICB2YXIgTEVTUyA9IC0xO1xyXG4gIHZhciBNT1JFID0gMTtcclxuXHJcbiAgdmFyIHVzZXJzRGF0YTtcclxuXHJcbiAgZnVuY3Rpb24gRGFzaGJvYXJkRmFjdG9yeSgpIHt9XHJcblxyXG4gIGZ1bmN0aW9uIGNsb3NlU2VsZWN0ZWRVc2VyQ29udGFpbmVyKCkge1xyXG4gICAgRE0ucmVtb3ZlRE9NRWxlbWVudChTRUxFQ1RFRF9VU0VSX0NPTlRBSU5FUl9JRCwgU0VMRUNURURfVVNFUl9JTk5FUl9JRCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRVc2VySUQodXNlckNvbnRhaW5lcikge1xyXG4gICAgcmV0dXJuIERNLmdldERPTUNoaWxkcmVuQnlUYWcodXNlckNvbnRhaW5lciwgXCJsYWJlbFwiKS5maW5kKGZ1bmN0aW9uIGZpbmRJRChcclxuICAgICAgZmllbGRcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gZmllbGQuaGlkZGVuO1xyXG4gICAgfSkuaW5uZXJIVE1MO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYXBwZW5kU2luZ2xlTWVzc2FnZShtZXNzYWdlKSB7XHJcbiAgICB2YXIgbWVzc2FnZXMgPSBETS5nZXRET01FbGVtZW50KFVTRVJfQ0hBVF9NRVNTQUdFU19JRCk7XHJcbiAgICB2YXIgc2VuZGVyID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImRpdlwiKTtcclxuICAgIHZhciBib2R5ID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICBzZW5kZXIuaW5uZXJIVE1MID0gbWVzc2FnZS5zZW5kZXI7XHJcbiAgICBib2R5LmlubmVySFRNTCA9IG1lc3NhZ2UuYm9keTtcclxuXHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KG1lc3NhZ2VzLCBzZW5kZXIpO1xyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudChtZXNzYWdlcywgYm9keSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZW5kTWVzc2FnZSh1c2VyQ29udGFpbmVyKSB7XHJcbiAgICB2YXIgaW5wdXRWYWx1ZSA9IERNLmdldERPTUVsZW1lbnQoVVNFUl9DSEFUX0lOUFVUX0lEKS52YWx1ZTtcclxuICAgIHZhciBvcGVyYXRvck1lc3NhZ2U7XHJcblxyXG4gICAgaWYgKGlucHV0VmFsdWUgPT09IFwiXCIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgb3BlcmF0b3JNZXNzYWdlID0gbWVzc2FnZUZhY3RvcnkuZ2V0TWVzc2FnZShcclxuICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgY29uZmlnLm9wZXJhdG9yTmFtZSArIFwiOlwiLFxyXG4gICAgICBpbnB1dFZhbHVlXHJcbiAgICApO1xyXG4gICAgRE0uZ2V0RE9NRWxlbWVudChVU0VSX0NIQVRfSU5QVVRfSUQpLnZhbHVlID0gXCJcIjtcclxuICAgIHN0b3JhZ2VNYW5hZ2VyLnNlbmRSZXF1ZXN0VG9TdG9yYWdlKFxyXG4gICAgICBnZXRVc2VySUQodXNlckNvbnRhaW5lcikgKyBcIi9tZXNzYWdlc1wiLFxyXG4gICAgICBIVFRQX1BPU1QsXHJcbiAgICAgIG9wZXJhdG9yTWVzc2FnZVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVVzZXJDaGF0Q29udGFpbmVyKHVzZXJDb250YWluZXIpIHtcclxuICAgIHZhciB1c2VyQ2hhdENvbnRhaW5lciA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJmaWVsZHNldFwiKTtcclxuICAgIHZhciB1c2VyQ2hhdExlZ2VuZCA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJsZWdlbmRcIik7XHJcbiAgICB2YXIgdXNlckNoYXRNZXNzYWdlc0xpc3QgPSBETS5jcmVhdGVET01FbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgdmFyIHVzZXJDaGF0TWVzc2FnZUlucHV0ID0gRE0uY3JlYXRlRE9NRWxlbWVudChcInRleHRhcmVhXCIpO1xyXG4gICAgdmFyIHVzZXJDaGF0U2VuZEJ1dHRvbiA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJidXR0b25cIik7XHJcblxyXG4gICAgRE0uYWRkQ1NTQ2xhc3ModXNlckNoYXRDb250YWluZXIsIFwiZGFzaGJvYXJkLXNlbGVjdGVkLXVzZXItY2hhdC1jb250YWluZXJcIik7XHJcbiAgICB1c2VyQ2hhdExlZ2VuZC5pbm5lckhUTUwgPSBcItCn0LDRglwiO1xyXG4gICAgdXNlckNoYXRNZXNzYWdlc0xpc3QuaWQgPSBVU0VSX0NIQVRfTUVTU0FHRVNfSUQ7XHJcbiAgICBETS5hZGRDU1NDbGFzcyhcclxuICAgICAgdXNlckNoYXRNZXNzYWdlc0xpc3QsXHJcbiAgICAgIFwiZGFzaGJvYXJkLXNlbGVjdGVkLXVzZXItY2hhdC1tZXNzYWdlc1wiXHJcbiAgICApO1xyXG4gICAgdXNlckNoYXRNZXNzYWdlSW5wdXQuaWQgPSBVU0VSX0NIQVRfSU5QVVRfSUQ7XHJcbiAgICBETS5hZGRDU1NDbGFzcyh1c2VyQ2hhdE1lc3NhZ2VJbnB1dCwgXCJkYXNoYm9hcmQtc2VsZWN0ZWQtdXNlci1jaGF0LWlucHV0XCIpO1xyXG4gICAgdXNlckNoYXRNZXNzYWdlSW5wdXQucGxhY2Vob2xkZXIgPSBcItCd0L7QstC+0LUg0YHQvtC+0LHRidC10L3QuNC1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjlwiO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3ModXNlckNoYXRTZW5kQnV0dG9uLCBcImRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNoYXQtYnV0dG9uXCIpO1xyXG4gICAgdXNlckNoYXRTZW5kQnV0dG9uLmlubmVySFRNTCA9IFwiU2VuZFwiO1xyXG4gICAgRE0uYWRkTGlzdGVuZXIoXHJcbiAgICAgIHVzZXJDaGF0U2VuZEJ1dHRvbixcclxuICAgICAgXCJjbGlja1wiLFxyXG4gICAgICBzZW5kTWVzc2FnZS5iaW5kKG51bGwsIHVzZXJDb250YWluZXIpXHJcbiAgICApO1xyXG5cclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQodXNlckNoYXRDb250YWluZXIsIHVzZXJDaGF0TGVnZW5kKTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQodXNlckNoYXRDb250YWluZXIsIHVzZXJDaGF0TWVzc2FnZXNMaXN0KTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQodXNlckNoYXRDb250YWluZXIsIHVzZXJDaGF0TWVzc2FnZUlucHV0KTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQodXNlckNoYXRDb250YWluZXIsIHVzZXJDaGF0U2VuZEJ1dHRvbik7XHJcblxyXG4gICAgcmV0dXJuIHVzZXJDaGF0Q29udGFpbmVyO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlVXNlckNvbnRyb2xsZXJDb250YWluZXIoKSB7XHJcbiAgICB2YXIgdXNlckNvbnRyb2xsZXJDb250YWluZXIgPSBETS5jcmVhdGVET01FbGVtZW50KFwiZmllbGRzZXRcIik7XHJcbiAgICB2YXIgdXNlckNvbnRyb2xsZXJMZWdlbmQgPSBETS5jcmVhdGVET01FbGVtZW50KFwibGVnZW5kXCIpO1xyXG5cclxuICAgIERNLmFkZENTU0NsYXNzKFxyXG4gICAgICB1c2VyQ29udHJvbGxlckNvbnRhaW5lcixcclxuICAgICAgXCJkYXNoYm9hcmQtc2VsZWN0ZWQtdXNlci1jb250cm9sbGVyXCJcclxuICAgICk7XHJcbiAgICB1c2VyQ29udHJvbGxlckxlZ2VuZC5pbm5lckhUTUwgPSBcIkNvbnRyb2xcIjtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQodXNlckNvbnRyb2xsZXJDb250YWluZXIsIHVzZXJDb250cm9sbGVyTGVnZW5kKTtcclxuXHJcbiAgICByZXR1cm4gdXNlckNvbnRyb2xsZXJDb250YWluZXI7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhcHBlbmRTZWxlY3RlZFVzZXJDb250YWluZXIodXNlckNvbnRhaW5lcikge1xyXG4gICAgdmFyIHNlbGVjdGVkVXNlckNvbnRhaW5lciA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJmaWVsZHNldFwiKTtcclxuICAgIHZhciB1c2VyQ29udGFpbmVyTGVnZW5kID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImxlZ2VuZFwiKTtcclxuICAgIHZhciB1c2VyQ29udGFpbmVyQ2xvc2VCdXR0b24gPSBETS5jcmVhdGVET01FbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgdmFyIHVzZXJJREZpZWxkID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImxhYmVsXCIpO1xyXG4gICAgdmFyIHVzZXJDb250YWluZXJzSW5uZXIgPSBETS5jcmVhdGVET01FbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgIHNlbGVjdGVkVXNlckNvbnRhaW5lci5pZCA9IFNFTEVDVEVEX1VTRVJfSU5ORVJfSUQ7XHJcbiAgICBETS5hZGRDU1NDbGFzcyhcclxuICAgICAgc2VsZWN0ZWRVc2VyQ29udGFpbmVyLFxyXG4gICAgICBcImRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNvbnRhaW5lci1pbm5lclwiXHJcbiAgICApO1xyXG4gICAgdXNlckNvbnRhaW5lckxlZ2VuZC5pbm5lckhUTUwgPVxyXG4gICAgICBcIkFjdGl2ZTogXCIgK1xyXG4gICAgICBETS5nZXRET01DaGlsZHJlbkJ5VGFnKHVzZXJDb250YWluZXIsIFwibGFiZWxcIikuc2hpZnQoKS5pbm5lckhUTUw7XHJcbiAgICB1c2VyQ29udGFpbmVyQ2xvc2VCdXR0b24uaW5uZXJIVE1MID0gXCJ4XCI7XHJcbiAgICBETS5hZGRDU1NDbGFzcyhcclxuICAgICAgdXNlckNvbnRhaW5lckNsb3NlQnV0dG9uLFxyXG4gICAgICBcImRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNvbnRhaW5lci1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIERNLmFkZExpc3RlbmVyKFxyXG4gICAgICB1c2VyQ29udGFpbmVyQ2xvc2VCdXR0b24sXHJcbiAgICAgIFwiY2xpY2tcIixcclxuICAgICAgY2xvc2VTZWxlY3RlZFVzZXJDb250YWluZXJcclxuICAgICk7XHJcbiAgICBETS5hZGRDU1NDbGFzcyhcclxuICAgICAgdXNlckNvbnRhaW5lcnNJbm5lcixcclxuICAgICAgXCJkYXNoYm9hcmQtc2VsZWN0ZWQtdXNlci1jb250cm9scy1jb250YWluZXJcIlxyXG4gICAgKTtcclxuICAgIHVzZXJJREZpZWxkLmlubmVySFRNTCA9IGdldFVzZXJJRCh1c2VyQ29udGFpbmVyKTtcclxuICAgIHVzZXJJREZpZWxkLmhpZGRlbiA9IHRydWU7XHJcblxyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudChcclxuICAgICAgdXNlckNvbnRhaW5lcnNJbm5lcixcclxuICAgICAgY3JlYXRlVXNlckNoYXRDb250YWluZXIodXNlckNvbnRhaW5lcilcclxuICAgICk7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHVzZXJDb250YWluZXJzSW5uZXIsIGNyZWF0ZVVzZXJDb250cm9sbGVyQ29udGFpbmVyKCkpO1xyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudChzZWxlY3RlZFVzZXJDb250YWluZXIsIHVzZXJDb250YWluZXJMZWdlbmQpO1xyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudChzZWxlY3RlZFVzZXJDb250YWluZXIsIHVzZXJDb250YWluZXJDbG9zZUJ1dHRvbik7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHNlbGVjdGVkVXNlckNvbnRhaW5lciwgdXNlckNvbnRhaW5lcnNJbm5lcik7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHNlbGVjdGVkVXNlckNvbnRhaW5lciwgdXNlcklERmllbGQpO1xyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudChTRUxFQ1RFRF9VU0VSX0NPTlRBSU5FUl9JRCwgc2VsZWN0ZWRVc2VyQ29udGFpbmVyKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFwcGVuZFNlbGVjdGVkVXNlck1lc3NhZ2VzKHVzZXJDb250YWluZXIpIHtcclxuICAgIHZhciBtZXNzYWdlcyA9IHVzZXJzRGF0YVtnZXRVc2VySUQodXNlckNvbnRhaW5lcildLm1lc3NhZ2VzO1xyXG5cclxuICAgIGlmICghbWVzc2FnZXMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmtleXMobWVzc2FnZXMpLmZvckVhY2goZnVuY3Rpb24gYXBwZW5kTWVzc2FnZShrZXkpIHtcclxuICAgICAgYXBwZW5kU2luZ2xlTWVzc2FnZShtZXNzYWdlc1trZXldKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2VuZFJlYWRNYXJrVG9TdG9yYWdlKHVzZXJDb250YWluZXIpIHtcclxuICAgIHN0b3JhZ2VNYW5hZ2VyLnNlbmRSZXF1ZXN0VG9TdG9yYWdlKFxyXG4gICAgICBnZXRVc2VySUQodXNlckNvbnRhaW5lcikgKyBcIi9yZWFkXCIsXHJcbiAgICAgIEhUVFBfUFVULFxyXG4gICAgICB0cnVlXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2VsZWN0VXNlcihldmVudCkge1xyXG4gICAgaWYgKCFldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFNJTkdMRV9VU0VSX0NMQVNTX05BTUUpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChETS5nZXRET01FbGVtZW50KFNFTEVDVEVEX1VTRVJfSU5ORVJfSUQpKSB7XHJcbiAgICAgIGNsb3NlU2VsZWN0ZWRVc2VyQ29udGFpbmVyKCk7XHJcbiAgICB9XHJcbiAgICBETS5yZW1vdmVDU1NDbGFzcyhldmVudC50YXJnZXQsIFVOUkVBRF9DTEFTU19OQU1FKTtcclxuXHJcbiAgICBhcHBlbmRTZWxlY3RlZFVzZXJDb250YWluZXIoZXZlbnQudGFyZ2V0KTtcclxuICAgIGFwcGVuZFNlbGVjdGVkVXNlck1lc3NhZ2VzKGV2ZW50LnRhcmdldCk7XHJcbiAgICBzZW5kUmVhZE1hcmtUb1N0b3JhZ2UoZXZlbnQudGFyZ2V0KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGlzVXNlck9ubGluZSh1c2VyKSB7XHJcbiAgICB2YXIgbGFzdE1lc3NhZ2U7XHJcbiAgICB2YXIgbGFzdE1lc3NhZ2VUaW1lO1xyXG4gICAgdmFyIGxhc3RNZXNzYWdlRGF0ZTtcclxuICAgIHZhciBtZXNzYWdlc0tleXM7XHJcblxyXG4gICAgaWYgKCF1c2VyLm1lc3NhZ2VzKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIG1lc3NhZ2VzS2V5cyA9IE9iamVjdC5rZXlzKHVzZXIubWVzc2FnZXMpO1xyXG4gICAgbGFzdE1lc3NhZ2UgPSB1c2VyLm1lc3NhZ2VzW21lc3NhZ2VzS2V5cy5wb3AoKV07XHJcbiAgICB3aGlsZSAoXHJcbiAgICAgIGxhc3RNZXNzYWdlICYmXHJcbiAgICAgIGxhc3RNZXNzYWdlLnNlbmRlciA9PT0gY29uZmlnLm9wZXJhdG9yTmFtZS5jb25jYXQoXCI6XCIpXHJcbiAgICApIHtcclxuICAgICAgbGFzdE1lc3NhZ2UgPSB1c2VyLm1lc3NhZ2VzW21lc3NhZ2VzS2V5cy5wb3AoKV07XHJcbiAgICB9XHJcbiAgICBpZiAoIWxhc3RNZXNzYWdlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGxhc3RNZXNzYWdlVGltZSA9IGxhc3RNZXNzYWdlLnRpbWUuc3BsaXQoXCI6XCIpO1xyXG4gICAgbGFzdE1lc3NhZ2VEYXRlID0gbmV3IERhdGUoXHJcbiAgICAgIG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgTnVtYmVyKGxhc3RNZXNzYWdlLm1vbnRoKSxcclxuICAgICAgTnVtYmVyKGxhc3RNZXNzYWdlLmRheSksXHJcbiAgICAgIE51bWJlcihsYXN0TWVzc2FnZVRpbWUuc2hpZnQoKSksXHJcbiAgICAgIE51bWJlcihsYXN0TWVzc2FnZVRpbWUuc2hpZnQoKSlcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBEYXRlKCkgLSBsYXN0TWVzc2FnZURhdGUgPD0gVVNFUl9PTkxJTkVfVElNRU9VVDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldFVzZXJTdGF0dXMoc3RhdHVzQ29udGFpbmVyLCBjbGFzc1RvUmVtb3ZlLCBjbGFzc1RvQWRkKSB7XHJcbiAgICBETS5yZW1vdmVDU1NDbGFzcyhzdGF0dXNDb250YWluZXIsIGNsYXNzVG9SZW1vdmUpO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3Moc3RhdHVzQ29udGFpbmVyLCBjbGFzc1RvQWRkKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFwcGVuZFNpbmdsZVVzZXIodXNlciwgZ2VuZXJhdGVkKSB7XHJcbiAgICB2YXIgdXNlckVsZW1lbnQgPSBETS5jcmVhdGVET01FbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgdmFyIHVzZXJOYW1lRWxlbWVudCA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgIHZhciBnZW5lcmF0ZWRGaWVsZCA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgIHZhciBjaGF0U3RhdGVFbGVtZW50ID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImxhYmVsXCIpO1xyXG4gICAgdmFyIHVzZXJTdGF0dXNFbGVtZW50ID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICBETS5hZGRDU1NDbGFzcyh1c2VyRWxlbWVudCwgU0lOR0xFX1VTRVJfQ0xBU1NfTkFNRSk7XHJcbiAgICBpZiAoIXVzZXIucmVhZCkge1xyXG4gICAgICBETS5hZGRDU1NDbGFzcyh1c2VyRWxlbWVudCwgVU5SRUFEX0NMQVNTX05BTUUpO1xyXG4gICAgfVxyXG4gICAgdXNlck5hbWVFbGVtZW50LmlubmVySFRNTCA9XHJcbiAgICAgIHVzZXIudXNlck5hbWUgPT09IHVuZGVmaW5lZCB8fCB1c2VyLnVzZXJOYW1lID09PSBERUZBVUxUX1VTRVJOQU1FXHJcbiAgICAgICAgPyBnZW5lcmF0ZWRcclxuICAgICAgICA6IHVzZXIudXNlck5hbWU7XHJcbiAgICBnZW5lcmF0ZWRGaWVsZC5pbm5lckhUTUwgPSBnZW5lcmF0ZWQ7XHJcbiAgICBnZW5lcmF0ZWRGaWVsZC5oaWRkZW4gPSB0cnVlO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3ModXNlclN0YXR1c0VsZW1lbnQsIFwiZGFzaGJvYXJkLXVzZXItc3RhdHVzXCIpO1xyXG4gICAgaWYgKGlzVXNlck9ubGluZSh1c2VyKSkge1xyXG4gICAgICBzZXRVc2VyU3RhdHVzKHVzZXJTdGF0dXNFbGVtZW50LCBPTkxJTkVfQ0xBU1NfTkFNRSwgT05MSU5FX0NMQVNTX05BTUUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2V0VXNlclN0YXR1cyh1c2VyU3RhdHVzRWxlbWVudCwgT0ZGTElORV9DTEFTU19OQU1FLCBPRkZMSU5FX0NMQVNTX05BTUUpO1xyXG4gICAgfVxyXG4gICAgY2hhdFN0YXRlRWxlbWVudC5pbm5lckhUTUwgPSB1c2VyLmNoYXRTdGF0ZTtcclxuXHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHVzZXJFbGVtZW50LCB1c2VyTmFtZUVsZW1lbnQpO1xyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudCh1c2VyRWxlbWVudCwgZ2VuZXJhdGVkRmllbGQpO1xyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudCh1c2VyRWxlbWVudCwgdXNlclN0YXR1c0VsZW1lbnQpO1xyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudCh1c2VyRWxlbWVudCwgY2hhdFN0YXRlRWxlbWVudCk7XHJcbiAgICBETS5hZGRMaXN0ZW5lcihVU0VSU19MSVNUX0NPTlRBSU5FUl9JRCwgXCJjbGlja1wiLCBzZWxlY3RVc2VyKTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQoVVNFUlNfTElTVF9DT05UQUlORVJfSUQsIHVzZXJFbGVtZW50KTtcclxuXHJcbiAgICByZXR1cm4gdXNlckVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBEYXNoYm9hcmRGYWN0b3J5LnByb3RvdHlwZS5sb2FkVXNlcnNMaXN0ID0gZnVuY3Rpb24gbG9hZFVzZXJzTGlzdCh1c2Vycykge1xyXG4gICAgT2JqZWN0LmtleXModXNlcnMpLmZvckVhY2goZnVuY3Rpb24gYXBwZW5kVXNlcihrZXkpIHtcclxuICAgICAgYXBwZW5kU2luZ2xlVXNlcih1c2Vyc1trZXldLCBrZXkpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gY2xlYXJVc2Vycyh1c2Vyc0NvbnRhaW5lcnMpIHtcclxuICAgIHZhciBjb250YWluZXJzID1cclxuICAgICAgdXNlcnNDb250YWluZXJzIHx8XHJcbiAgICAgIERNLmdldERPTUNoaWxkcmVuQnlDbGFzcyhVU0VSU19MSVNUX0NPTlRBSU5FUl9JRCwgU0lOR0xFX1VTRVJfQ0xBU1NfTkFNRSk7XHJcblxyXG4gICAgY29udGFpbmVycy5mb3JFYWNoKGZ1bmN0aW9uIGNsZWFyVXNlcnNMaXN0KHVzZXJDb250YWluZXIpIHtcclxuICAgICAgRE0ucmVtb3ZlRE9NRWxlbWVudChVU0VSU19MSVNUX0NPTlRBSU5FUl9JRCwgdXNlckNvbnRhaW5lcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gY29udGFpbmVycztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGZpbHRlclVzZXJzKGV2ZW50KSB7XHJcbiAgICB2YXIgZmlsdGVyVmFsdWUgPSBldmVudC50YXJnZXQudmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICAgIHZhciB1c2Vyc0NvbnRhaW5lcnMgPSBETS5nZXRET01DaGlsZHJlbkJ5Q2xhc3MoXHJcbiAgICAgIFVTRVJTX0xJU1RfQ09OVEFJTkVSX0lELFxyXG4gICAgICBTSU5HTEVfVVNFUl9DTEFTU19OQU1FXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChmaWx0ZXJWYWx1ZSA9PT0gXCJcIikge1xyXG4gICAgICBjbGVhclVzZXJzKHVzZXJzQ29udGFpbmVycyk7XHJcbiAgICAgIGRhc2hib2FyZEZhY3RvcnkubG9hZFVzZXJzTGlzdCh1c2Vyc0RhdGEpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB1c2Vyc0NvbnRhaW5lcnMuZm9yRWFjaChmdW5jdGlvbiBmaWx0ZXIodXNlckNvbnRhaW5lcikge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgRE0uZ2V0RE9NQ2hpbGRyZW5CeVRhZyh1c2VyQ29udGFpbmVyLCBcImxhYmVsXCIpXHJcbiAgICAgICAgICAuc2hpZnQoKVxyXG4gICAgICAgICAgLmlubmVySFRNTC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAuaW5kZXhPZihmaWx0ZXJWYWx1ZSkgPT09IC0xXHJcbiAgICAgICkge1xyXG4gICAgICAgIERNLnJlbW92ZURPTUVsZW1lbnQoVVNFUlNfTElTVF9DT05UQUlORVJfSUQsIHVzZXJDb250YWluZXIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNvcnRVc2Vyc0J5VXNlck5hbWUoY29udGFpbmVyMSwgY29udGFpbmVyMikge1xyXG4gICAgcmV0dXJuIERNLmdldERPTUNoaWxkcmVuQnlUYWcoY29udGFpbmVyMSwgXCJsYWJlbFwiKVxyXG4gICAgICAuc2hpZnQoKVxyXG4gICAgICAuaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkgPFxyXG4gICAgICBETS5nZXRET01DaGlsZHJlbkJ5VGFnKGNvbnRhaW5lcjIsIFwibGFiZWxcIilcclxuICAgICAgICAuc2hpZnQoKVxyXG4gICAgICAgIC5pbm5lckhUTUwudG9Mb3dlckNhc2UoKVxyXG4gICAgICA/IExFU1NcclxuICAgICAgOiBNT1JFO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc29ydFVzZXJzQnlPbmxpbmVTdGF0dXMoY29udGFpbmVyKSB7XHJcbiAgICByZXR1cm4gRE0uZ2V0RE9NQ2hpbGRyZW5CeVRhZyhjb250YWluZXIsIFwiZGl2XCIpXHJcbiAgICAgIC5zaGlmdCgpXHJcbiAgICAgIC5jbGFzc0xpc3QuY29udGFpbnMoT05MSU5FX0NMQVNTX05BTUUpXHJcbiAgICAgID8gTEVTU1xyXG4gICAgICA6IE1PUkU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzb3J0VXNlcnNCeUNoYXRTdGF0ZShjb250YWluZXIpIHtcclxuICAgIHJldHVybiBETS5nZXRET01DaGlsZHJlbkJ5VGFnKGNvbnRhaW5lciwgXCJsYWJlbFwiKS5wb3AoKS5pbm5lckhUTUwgPT09XHJcbiAgICAgIFwiY2hhdC1leHBhbmRlZFwiXHJcbiAgICAgID8gTEVTU1xyXG4gICAgICA6IE1PUkU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzb3J0VXNlcnNCeVVucmVhZChjb250YWluZXIpIHtcclxuICAgIHJldHVybiBjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFVOUkVBRF9DTEFTU19OQU1FKSA/IExFU1MgOiBNT1JFO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc29ydFVzZXJzKGV2ZW50KSB7XHJcbiAgICB2YXIgc2VsZWN0ZWQgPSBETS5nZXRET01DaGlsZHJlbkJ5VGFnKGV2ZW50LnRhcmdldCwgXCJvcHRpb25cIikuZmluZChcclxuICAgICAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWQob3B0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbi5zZWxlY3RlZDtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHZhciBjb250YWluZXJzID0gY2xlYXJVc2VycygpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNvcnRCeUFuZEFwcGVuZChzb3J0RnVuYykge1xyXG4gICAgICBjb250YWluZXJzLnNvcnQoc29ydEZ1bmMpO1xyXG4gICAgICBjb250YWluZXJzLmZvckVhY2goZnVuY3Rpb24gYXBwZW5kQ29udGFpbmVycyhjb250YWluZXIpIHtcclxuICAgICAgICBETS5hcHBlbmRET01FbGVtZW50KFVTRVJTX0xJU1RfQ09OVEFJTkVSX0lELCBjb250YWluZXIpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc2VsZWN0ZWQuaW5uZXJIVE1MKSB7XHJcbiAgICAgIGNhc2UgXCJVc2VyIE5hbWVcIjpcclxuICAgICAgICBzb3J0QnlBbmRBcHBlbmQoc29ydFVzZXJzQnlVc2VyTmFtZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJPbmxpbmVcIjpcclxuICAgICAgICBzb3J0QnlBbmRBcHBlbmQoc29ydFVzZXJzQnlPbmxpbmVTdGF0dXMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiQ2hhdCBzdGF0ZVwiOlxyXG4gICAgICAgIHNvcnRCeUFuZEFwcGVuZChzb3J0VXNlcnNCeUNoYXRTdGF0ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJVbnJlYWRcIjpcclxuICAgICAgICBzb3J0QnlBbmRBcHBlbmQoc29ydFVzZXJzQnlVbnJlYWQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGRhc2hib2FyZEZhY3RvcnkubG9hZFVzZXJzTGlzdCh1c2Vyc0RhdGEpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2xlYXJGaWx0ZXIoZXZlbnQpIHtcclxuICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IFwiXCI7XHJcbiAgICBjbGVhclVzZXJzKCk7XHJcbiAgICBkYXNoYm9hcmRGYWN0b3J5LmxvYWRVc2Vyc0xpc3QodXNlcnNEYXRhKTtcclxuICB9XHJcblxyXG4gIERhc2hib2FyZEZhY3RvcnkucHJvdG90eXBlLmluaXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBpbml0TGlzdGVuZXJzKCkge1xyXG4gICAgRE0uYWRkTGlzdGVuZXIoXHJcbiAgICAgIFwib3BlcmF0b3JzLWRhc2hib2FyZC11c2Vycy1maWx0ZXItYmFyXCIsXHJcbiAgICAgIFwiY2hhbmdlXCIsXHJcbiAgICAgIGZpbHRlclVzZXJzXHJcbiAgICApO1xyXG4gICAgRE0uYWRkTGlzdGVuZXIoXHJcbiAgICAgIFwib3BlcmF0b3JzLWRhc2hib2FyZC11c2Vycy1maWx0ZXItYmFyXCIsXHJcbiAgICAgIFwiZm9jdXNcIixcclxuICAgICAgY2xlYXJGaWx0ZXJcclxuICAgICk7XHJcbiAgICBETS5hZGRMaXN0ZW5lcihcIm9wZXJhdG9ycy1kYXNoYm9hcmQtdXNlcnMtc29ydC1iYXJcIiwgXCJjaGFuZ2VcIiwgc29ydFVzZXJzKTtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBnZXRVc2VyKGtleSkge1xyXG4gICAgaWYgKCF1c2Vyc0RhdGFba2V5XSkge1xyXG4gICAgICB1c2Vyc0RhdGFba2V5XSA9IHtcclxuICAgICAgICBjaGF0U3RhdGU6IFwiY2hhdC1jb2xsYXBzZWRcIixcclxuICAgICAgICByZWFkOiBcInRydWVcIlxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1c2Vyc0RhdGFba2V5XTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldFVzZXJDb250YWluZXIodXNlcktleSwgdXNlcikge1xyXG4gICAgdmFyIHVzZXJDb250YWluZXI7XHJcblxyXG4gICAgdXNlckNvbnRhaW5lciA9IERNLmdldERPTUNoaWxkcmVuQnlDbGFzcyhcclxuICAgICAgVVNFUlNfTElTVF9DT05UQUlORVJfSUQsXHJcbiAgICAgIFNJTkdMRV9VU0VSX0NMQVNTX05BTUVcclxuICAgICkuZmluZChmdW5jdGlvbiBmaW5kQ29udGFpbmVyKGNvbnRhaW5lcikge1xyXG4gICAgICByZXR1cm4gZ2V0VXNlcklEKGNvbnRhaW5lcikgPT09IHVzZXJLZXk7XHJcbiAgICB9KTtcclxuICAgIGlmICghdXNlckNvbnRhaW5lcikge1xyXG4gICAgICB1c2VyQ29udGFpbmVyID0gYXBwZW5kU2luZ2xlVXNlcih1c2VyLCB1c2VyS2V5KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdXNlckNvbnRhaW5lcjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG1hbmFnZVVzZXJPbmxpbmUoa2V5KSB7XHJcbiAgICB2YXIgdXNlclN0YXR1c0VsZW1lbnQgPSBETS5nZXRET01DaGlsZHJlbkJ5VGFnKFxyXG4gICAgICBnZXRVc2VyQ29udGFpbmVyKGtleSwgdXNlcnNEYXRhW2tleV0pLFxyXG4gICAgICBcImRpdlwiXHJcbiAgICApLnNoaWZ0KCk7XHJcbiAgICBzZXRVc2VyU3RhdHVzKHVzZXJTdGF0dXNFbGVtZW50LCBPRkZMSU5FX0NMQVNTX05BTUUsIE9OTElORV9DTEFTU19OQU1FKTtcclxuICAgIHNldFRpbWVvdXQoXHJcbiAgICAgIHNldFVzZXJTdGF0dXMuYmluZChcclxuICAgICAgICB0aGlzLFxyXG4gICAgICAgIHVzZXJTdGF0dXNFbGVtZW50LFxyXG4gICAgICAgIE9OTElORV9DTEFTU19OQU1FLFxyXG4gICAgICAgIE9GRkxJTkVfQ0xBU1NfTkFNRVxyXG4gICAgICApLFxyXG4gICAgICBVU0VSX09OTElORV9USU1FT1VUXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlVXNlclJlYWRTdGF0dXMoa2V5LCB2YWx1ZSkge1xyXG4gICAgdmFyIGNvbnRhaW5lciA9IGdldFVzZXJDb250YWluZXIoa2V5LCBnZXRVc2VyKGtleSkpO1xyXG5cclxuICAgIHVzZXJzRGF0YVtrZXldLnJlYWQgPSB2YWx1ZTtcclxuICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICBETS5yZW1vdmVDU1NDbGFzcyhjb250YWluZXIsIFVOUkVBRF9DTEFTU19OQU1FKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIERNLmFkZENTU0NsYXNzKGNvbnRhaW5lciwgVU5SRUFEX0NMQVNTX05BTUUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlVXNlckNoYXRTdGF0ZShrZXksIHZhbHVlKSB7XHJcbiAgICB2YXIgY29udGFpbmVyID0gZ2V0VXNlckNvbnRhaW5lcihrZXksIGdldFVzZXIoa2V5KSk7XHJcblxyXG4gICAgdXNlcnNEYXRhW2tleV0uY2hhdFN0YXRlID0gdmFsdWU7XHJcbiAgICBETS5nZXRET01DaGlsZHJlbkJ5VGFnKGNvbnRhaW5lciwgXCJsYWJlbFwiKS5wb3AoKS5pbm5lckhUTUwgPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwZGF0ZVVzZXJNZXNzYWdlcyhrZXksIG1lc3NhZ2UsIG1lc3NhZ2VLZXkpIHtcclxuICAgIGlmICghdXNlcnNEYXRhW2tleV0ubWVzc2FnZXMpIHtcclxuICAgICAgdXNlcnNEYXRhW2tleV0ubWVzc2FnZXMgPSB7fTtcclxuICAgIH1cclxuICAgIHVzZXJzRGF0YVtrZXldLm1lc3NhZ2VzW21lc3NhZ2VLZXldID0gbWVzc2FnZTtcclxuICAgIGlmICghRE0uZ2V0RE9NRWxlbWVudChTRUxFQ1RFRF9VU0VSX0lOTkVSX0lEKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoZ2V0VXNlcklEKFNFTEVDVEVEX1VTRVJfSU5ORVJfSUQpID09PSBrZXkpIHtcclxuICAgICAgc2VuZFJlYWRNYXJrVG9TdG9yYWdlKGdldFVzZXJDb250YWluZXIoa2V5LCB1c2Vyc0RhdGFba2V5XSkpO1xyXG4gICAgICBhcHBlbmRTaW5nbGVNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlVXNlck5hbWUoa2V5LCBuYW1lKSB7XHJcbiAgICB2YXIgY29udGFpbmVyID0gZ2V0VXNlckNvbnRhaW5lcihrZXksIGdldFVzZXIoa2V5KSk7XHJcblxyXG4gICAgdXNlcnNEYXRhW2tleV0udXNlck5hbWUgPSBuYW1lO1xyXG4gICAgRE0uZ2V0RE9NQ2hpbGRyZW5CeVRhZyhjb250YWluZXIsIFwibGFiZWxcIikuc2hpZnQoKS5pbm5lckhUTUwgPSBuYW1lO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYXBwbHlVcGRhdGVzKGV2ZW50KSB7XHJcbiAgICB2YXIgcGF0aEZyYWdtZW50cyA9IGV2ZW50LmRhdGEucGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMSk7XHJcbiAgICB2YXIgZnJhZ21lbnQgPSBwYXRoRnJhZ21lbnRzLnNoaWZ0KCk7XHJcbiAgICB2YXIgZGF0YSA9IGV2ZW50LmRhdGEuZGF0YTtcclxuICAgIHZhciBpc1VwZGF0ZUZyb21Vc2VyID0gdHJ1ZTtcclxuXHJcbiAgICBpZiAoZnJhZ21lbnQgPT09IFwiXCIpIHtcclxuICAgICAgZGFzaGJvYXJkRmFjdG9yeS5sb2FkVXNlcnNMaXN0KGRhdGEpO1xyXG4gICAgICB1c2Vyc0RhdGEgPSBkYXRhO1xyXG4gICAgfSBlbHNlIGlmIChmcmFnbWVudC5tYXRjaCgvdXNlclxcZHsxMyx9LykpIHtcclxuICAgICAgc3dpdGNoIChwYXRoRnJhZ21lbnRzLnNoaWZ0KCkpIHtcclxuICAgICAgICBjYXNlIFwicmVhZFwiOlxyXG4gICAgICAgICAgaWYgKGRhdGEgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgaXNVcGRhdGVGcm9tVXNlciA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdXBkYXRlVXNlclJlYWRTdGF0dXMoZnJhZ21lbnQsIGRhdGEpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcImNoYXRTdGF0ZVwiOlxyXG4gICAgICAgICAgdXBkYXRlVXNlckNoYXRTdGF0ZShmcmFnbWVudCwgZGF0YSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwibWVzc2FnZXNcIjpcclxuICAgICAgICAgIGlmIChkYXRhLnNlbmRlci5pbmRleE9mKGNvbmZpZy5vcGVyYXRvck5hbWUpICE9PSAtMSkge1xyXG4gICAgICAgICAgICBpc1VwZGF0ZUZyb21Vc2VyID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB1cGRhdGVVc2VyTWVzc2FnZXMoZnJhZ21lbnQsIGRhdGEsIHBhdGhGcmFnbWVudHMuc2hpZnQoKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwidXNlck5hbWVcIjpcclxuICAgICAgICAgIHVwZGF0ZVVzZXJOYW1lKGZyYWdtZW50LCBkYXRhKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGlzVXBkYXRlRnJvbVVzZXIpIHtcclxuICAgICAgICBtYW5hZ2VVc2VyT25saW5lKGZyYWdtZW50KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgRGFzaGJvYXJkRmFjdG9yeS5wcm90b3R5cGUuc3Vic2NyaWJlT25VcGRhdGVzID0gZnVuY3Rpb24gc3Vic2NyaWJlT25VcGRhdGVzKCkge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGFwcGx5VXBkYXRlcywgZmFsc2UpO1xyXG4gICAgdXBkYXRlc01hbmFnZXIuZ2V0RGF0YUZyb21TdG9yYWdlKFwiXCIpO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBuZXcgRGFzaGJvYXJkRmFjdG9yeSgpO1xyXG59KShjb25maWcpO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uIGluaXREYXNoYm9hcmQoKSB7XHJcbiAgZGFzaGJvYXJkRmFjdG9yeS5pbml0TGlzdGVuZXJzKCk7XHJcbiAgZGFzaGJvYXJkRmFjdG9yeS5zdWJzY3JpYmVPblVwZGF0ZXMoKTtcclxufSk7Il19
