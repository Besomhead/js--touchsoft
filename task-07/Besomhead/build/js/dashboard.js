var config={operatorName:"Operator",chatURL:"https://besomhead-chat.firebaseio.com/",requests:"fetch"},messageFactory=function(){function e(){}function a(e,t,n){var a,r,s;this.day=e.getDate(),this.month=e.getMonth(),this.time=(r=(a=e).getHours(),s=a.getMinutes(),(r<10?"0":"").concat(r.toString()).concat(":").concat(s<10?"0":"").concat(s.toString())),this.sender=t,this.body=n}function r(e,t,n){this.date=e.toLocaleString(),this.type=t,this.params=n,this.shown=!1}return e.prototype.getMessage=function(e,t,n){return new a(e,t,n)},e.prototype.getCommandMessage=function(e,t,n){return new r(e,t,n)},new e}(),DM=function(){function e(){}return e.prototype.getDOMElement=function(e){return"string"==typeof e?document.getElementById(e):e},e.prototype.getDOMChildrenByTag=function(e,t){return Array.from(this.getDOMElement(e).getElementsByTagName(t))},e.prototype.getDOMChildrenByClass=function(e,t){return Array.from(DM.getDOMElement(e).getElementsByClassName(t))},e.prototype.createDOMElement=document.createElement.bind(document),e.prototype.appendDOMElement=function(e,t){DM.getDOMElement(e).appendChild(t)},e.prototype.removeDOMElement=function(e,t){DM.getDOMElement(e).removeChild(DM.getDOMElement(t))},e.prototype.addListener=function(e,t,n){DM.getDOMElement(e).addEventListener(t,n)},e.prototype.removeListener=function(e,t,n){DM.getDOMElement(e).removeEventListener(t,n)},e.prototype.addCSSClass=function(t){Array.from(arguments).slice(1).forEach(function(e){DM.getDOMElement(t).classList.add(e)})},e.prototype.removeCSSClass=function(e,t){DM.getDOMElement(e).classList.remove(t)},new e}(),HTTP_GET="GET",HTTP_POST="POST",HTTP_PUT="PUT",REQUEST_FETCH="fetch",REQUEST_XHR="xhr",storageManager=function(l){function e(){}function M(e,t){var n={method:e,headers:{Accept:"application/json"}};return e!==HTTP_GET&&(n.body=JSON.stringify(t)),n}return e.prototype.getStoragePath=function(e){return l.chatURL+e+".json"},e.prototype.sendRequestToStorage=function(e,t,n){var a,r,s,o,d,i,c;return l.requests===REQUEST_FETCH?(d=e,i=t,c=n,a=fetch(storageManager.getStoragePath(d),M(i,c)).then(function(e){return e.json()}).then(function(e){return e})):l.requests===REQUEST_XHR&&(r=e,s=t,o=n,a=new Promise(function(e,t){var n=new XMLHttpRequest;n.open(s,storageManager.getStoragePath(r),!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(){e(JSON.parse(n.response))}),n.addEventListener("error",function(){t(n.statusText)}),n.send(JSON.stringify(o))})),a},e.prototype.getDataFromService=function(e){return fetch(e,M(HTTP_GET)).then(function(e){return e.json()}).then(function(e){return e})},new e}(config),updatesManager=function(){function e(){this.responseData=void 0}return e.prototype.getDataFromStorage=function(e){var t=new XMLHttpRequest;t.addEventListener("readystatechange",function(){var e=t.responseText;if(this.status&&this.responseText){if(e.lastIndexOf("event:")!==e.lastIndexOf("event: put"))return;window.postMessage(JSON.parse(e.slice(e.lastIndexOf("data:")+"data:".length,e.lastIndexOf("}")+1)),window.location)}}),t.open("GET",storageManager.getStoragePath(e),!0),t.setRequestHeader("Accept","text/event-stream"),t.send()},new e}(),dashboardFactory=function(v){var L,t,d="Вы",y=12e4,i="operators-dashboard-users-list-container",c="operators-dashboard-selected-user-container",H="operators-dashboard-selected-user-inner",o="operators-dashboard-user-chat-messages",l="operators-dashboard-user-chat-input",M="operators-dashboard-selected-user-control",a="operators-dashboard-selected-user-control-dialog",r="operators-dashboard-selected-user-control-dialog-input",e="https://ipinfo.io/",s="http://ip-api.com/",D="https://geoip-db.com/",u="dashboard-selected-user-commands-panel",m="operators-dashboard-command-select",p="operators-dashboard-command-",n="operators-dashboard-selected-user-param-",h=n+"1",f=n+"2",g=n+"3",w="operators-dashboard-selected-user-commands-log",O="dashboard-single-user-container",k="dashboard-single-user-container-unread",N="dashboard-user-status-online",B="dashboard-user-status-offline",E=-1,b=1,C={type:"",params:[]};function T(){}function S(){DM.removeDOMElement(c,H)}function P(e){return DM.getDOMChildrenByTag(e,"label").find(function(e){return e.hidden}).innerHTML}function U(e){var t=DM.getDOMElement(o),n=DM.createDOMElement("div"),a=DM.createDOMElement("div");n.innerHTML=e.sender,a.innerHTML=e.body,DM.appendDOMElement(t,n),DM.appendDOMElement(t,a)}function R(e){var t=DM.createDOMElement("fieldset"),n=DM.createDOMElement("legend"),a=DM.createDOMElement("div"),r=DM.createDOMElement("textarea"),s=DM.createDOMElement("button");return DM.addCSSClass(t,"dashboard-selected-user-chat-container"),n.innerHTML="Чат",a.id=o,DM.addCSSClass(a,"dashboard-selected-user-chat-messages"),r.id=l,DM.addCSSClass(r,"dashboard-selected-user-chat-input"),r.placeholder="Новое сообщение пользователю",DM.addCSSClass(s,"dashboard-selected-user-chat-button"),s.innerHTML="Send",DM.addListener(s,"click",function(e){var t,n=DM.getDOMElement(l).value;""!==n&&(t=messageFactory.getMessage(new Date,v.operatorName+":",n),DM.getDOMElement(l).value="",storageManager.sendRequestToStorage(P(e)+"/messages",HTTP_POST,t))}.bind(null,e)),DM.appendDOMElement(t,n),DM.appendDOMElement(t,a),DM.appendDOMElement(t,r),DM.appendDOMElement(t,s),t}function F(){DM.getDOMElement(a)&&DM.removeDOMElement(M,a)}function x(e){C.params[t]=e,F()}function q(e){var t=e.target;x(DM.getDOMChildrenByTag(t.parentNode,"label").find(function(e){return e.for===t.id}).innerHTML)}function _(e){var t=DM.createDOMElement("div"),n=DM.createDOMElement("label");return t.id=a,DM.addCSSClass(t,"dashboard-selected-user-control-dialog"),n.innerHTML=e,DM.appendDOMElement(t,n),DM.appendDOMElement(M,t),t}function j(){var t,n,a=DM.createDOMElement("div"),r=0;DM.addCSSClass(a,"dashboard-selected-user-control-dialog-options"),[e,s,D].forEach(function(e){(t=DM.createDOMElement("input")).type="radio",t.id="operators-dashboard-selected-user-control-dialog-option-"+ ++r,t.name="service",DM.addListener(t,"click",q),(n=DM.createDOMElement("label")).innerHTML=e,n.for=t.id,DM.appendDOMElement(a,t),DM.appendDOMElement(a,n)}),DM.appendDOMElement(_("What service do you want to use?"),a)}function A(e){var t,n=DM.createDOMElement("input"),a=DM.createDOMElement("button");F(),t=_(e),n.id=r,DM.addCSSClass(n,"dashboard-selected-user-control-dialog-input"),a.innerHTML="Save",DM.addCSSClass(a,"dashboard-selected-user-control-dialog-button"),DM.addListener(a,"click",function(){x(DM.getDOMElement(r).value)}),DM.appendDOMElement(t,n),DM.appendDOMElement(t,a)}function I(){A("What header do you want?")}function G(e){t=e}function J(e){DM.getDOMElement(f).disabled=!e,DM.getDOMElement(g).disabled=!e}function Q(e,t){DM.removeListener(h,"click",e),DM.addListener(h,"click",t)}function W(e){var t,n=(t=e.target,DM.getDOMChildrenByTag(t,"option").find(function(e){return e.selected})),a=n.id.slice(n.id.indexOf(p)+p.length);switch(F(),a){case"ask-user":C.type=a,J(!0),Q(j,I),DM.addListener(f,"click",A.bind(this,"What message do you want to show?")),DM.addListener(g,"click",A.bind(this,"What placeholder do you want?"));break;case"user-info":C.type=a,J(!1),Q(I,j);break;default:[h,f,g].forEach(function(e,t){var n=DM.getDOMElement(e),a=n.cloneNode();a.innerHTML=n.innerHTML,a.disabled=!1,a.addEventListener("click",G.bind(this,t)),n.parentNode.replaceChild(a,n)})}}function X(){storageManager.sendRequestToStorage(P(DM.getDOMElement(H))+"/commands",HTTP_POST,messageFactory.getCommandMessage(new Date,C.type,C.params)),C.params=[]}function Y(){var t,n,a,r,s,e=DM.createDOMElement("div"),o=DM.createDOMElement("button");return e.id=u,DM.addCSSClass(e,"dashboard-selected-user-commands-panel"),DM.addCSSClass(o,"dashboard-selected-user-run-button"),o.innerHTML="Run",DM.appendDOMElement(e,((n=DM.createDOMElement("select")).id=m,DM.addCSSClass(n,"dashboard-selected-user-command-select"),["Select command","User Info","Ask User"].forEach(function(e){(t=DM.createDOMElement("option")).id=p+e.toLowerCase().replace(" ","-"),t.innerHTML=e,DM.appendDOMElement(n,t)}),DM.addListener(n,"change",W),n)),a=e,s=0,[h,f,g].forEach(function(e){(r=DM.createDOMElement("button")).id=e,DM.addCSSClass(r,"dashboard-selected-user-param-button"),DM.addListener(r,"click",G.bind(this,s)),r.innerHTML="Param"+ ++s,DM.appendDOMElement(a,r)}),DM.appendDOMElement(e,o),DM.addListener(o,"click",X),e}function z(e,t){var n=DM.createDOMElement("div"),a=DM.createDOMElement("div"),r=DM.createDOMElement("div");n.innerHTML=t.date,a.innerHTML=t.type+' ("'+t.params.join('","')+'")',r.innerHTML=t.result,DM.appendDOMElement(e,n),DM.appendDOMElement(e,a),DM.appendDOMElement(e,r)}function K(e){var t,n,a,r=DM.createDOMElement("fieldset"),s=DM.createDOMElement("legend"),o=DM.createDOMElement("label"),d=DM.createDOMElement("label"),i=DM.createDOMElement("div");return r.id=M,DM.addCSSClass(r,"dashboard-selected-user-controller"),s.innerHTML="Control",o.innerHTML="Command:",o.for=u,d.for=w,d.innerHTML="Log:",i.id=w,DM.addCSSClass(i,"dashboard-selected-user-commands-log"),DM.appendDOMElement(r,s),DM.appendDOMElement(r,o),DM.appendDOMElement(r,Y()),DM.appendDOMElement(r,d),DM.appendDOMElement(r,i),t=i,n=P(e),(a=L[n].commands)&&Object.keys(a).forEach(function(e){a[e].result&&z(t,a[e])}),r}function V(e){storageManager.sendRequestToStorage(P(e)+"/read",HTTP_PUT,!0)}function Z(e){var t,n,a,r,s,o,d,i;e.target.classList.contains(O)&&(DM.getDOMElement(H)&&S(),DM.removeCSSClass(e.target,k),t=e.target,n=DM.createDOMElement("fieldset"),a=DM.createDOMElement("legend"),r=DM.createDOMElement("button"),s=DM.createDOMElement("label"),o=DM.createDOMElement("div"),n.id=H,DM.addCSSClass(n,"dashboard-selected-user-container-inner"),a.innerHTML="Active: "+DM.getDOMChildrenByTag(t,"label").shift().innerHTML,r.innerHTML="x",DM.addCSSClass(r,"dashboard-selected-user-container-button"),DM.addListener(r,"click",S),DM.addCSSClass(o,"dashboard-selected-user-controls-container"),s.innerHTML=P(t),s.hidden=!0,DM.appendDOMElement(o,R(t)),DM.appendDOMElement(o,K(t)),DM.appendDOMElement(n,a),DM.appendDOMElement(n,r),DM.appendDOMElement(n,o),DM.appendDOMElement(n,s),DM.appendDOMElement(c,n),d=e.target,(i=L[P(d)].messages)&&Object.keys(i).forEach(function(e){U(i[e])}),V(e.target))}function $(e,t,n){DM.removeCSSClass(e,t),DM.addCSSClass(e,n)}function ee(e,t){var n=DM.createDOMElement("div"),a=DM.createDOMElement("label"),r=DM.createDOMElement("label"),s=DM.createDOMElement("label"),o=DM.createDOMElement("div");return DM.addCSSClass(n,O),e.read||DM.addCSSClass(n,k),a.innerHTML=void 0===e.userName||e.userName===d?t:e.userName,r.innerHTML=t,r.hidden=!0,DM.addCSSClass(o,"dashboard-user-status"),!function(e){var t,n,a,r;if(!e.messages)return!1;for(r=Object.keys(e.messages),t=e.messages[r.pop()];t&&t.sender===v.operatorName.concat(":");)t=e.messages[r.pop()];return!!t&&(n=t.time.split(":"),a=new Date((new Date).getFullYear(),Number(t.month),Number(t.day),Number(n.shift()),Number(n.shift())),new Date-a<=y)}(e)?$(o,B,B):$(o,N,N),s.innerHTML=e.chatState,DM.appendDOMElement(n,a),DM.appendDOMElement(n,r),DM.appendDOMElement(n,o),DM.appendDOMElement(n,s),DM.addListener(i,"click",Z),DM.appendDOMElement(i,n),n}function te(e){var t=e||DM.getDOMChildrenByClass(i,O);return t.forEach(function(e){DM.removeDOMElement(i,e)}),t}function ne(e){var t=e.target.value.toLowerCase(),n=DM.getDOMChildrenByClass(i,O);if(""===t)return te(n),void dashboardFactory.loadUsersList(L);n.forEach(function(e){-1===DM.getDOMChildrenByTag(e,"label").shift().innerHTML.toLowerCase().indexOf(t)&&DM.removeDOMElement(i,e)})}function ae(e,t){return DM.getDOMChildrenByTag(e,"label").shift().innerHTML.toLowerCase()<DM.getDOMChildrenByTag(t,"label").shift().innerHTML.toLowerCase()?E:b}function re(e){return DM.getDOMChildrenByTag(e,"div").shift().classList.contains(N)?E:b}function se(e){return"chat-expanded"===DM.getDOMChildrenByTag(e,"label").pop().innerHTML?E:b}function oe(e){return e.classList.contains(k)?E:b}function de(e){var t=DM.getDOMChildrenByTag(e.target,"option").find(function(e){return e.selected}),n=te();function a(e){n.sort(e),n.forEach(function(e){DM.appendDOMElement(i,e)})}switch(t.innerHTML){case"User Name":a(ae);break;case"Online":a(re);break;case"Chat state":a(se);break;case"Unread":a(oe);break;default:dashboardFactory.loadUsersList(L)}}function ie(e){e.target.value="",te(),dashboardFactory.loadUsersList(L)}function ce(e){return L[e]||(L[e]={chatState:"chat-collapsed",read:"true"}),L[e]}function le(t,e){var n;return(n=DM.getDOMChildrenByClass(i,O).find(function(e){return P(e)===t}))||(n=ee(e,t)),n}function Me(e){var t,n,a,r,s,o,d,i,c,l,M,D,u,m,p,h,f,g,O,E,b=e.data.path.split("/").slice(1),C=b.shift(),T=e.data.data,S=!0;if(""===C)dashboardFactory.loadUsersList(T),L=T;else if(C.match(/user\d{13,}/)){switch(b.shift()){case"read":!0===T&&(S=!1),O=T,E=le(g=C,ce(g)),(L[g].read=O)?DM.removeCSSClass(E,k):DM.addCSSClass(E,k);break;case"chatState":h=T,f=le(p=C,ce(p)),L[p].chatState=h,DM.getDOMChildrenByTag(f,"label").pop().innerHTML=h;break;case"messages":-1!==T.sender.indexOf(v.operatorName)&&(S=!1),D=C,u=T,m=b.shift(),L[D].messages||(L[D].messages={}),L[D].messages[m]=u,DM.getDOMElement(H)&&P(H)===D&&(V(le(D,L[D])),U(u));break;case"userName":l=T,M=le(c=C,ce(c)),L[c].userName=l,DM.getDOMChildrenByTag(M,"label").shift().innerHTML=l;break;case"commands":if("result"!==(t=b.pop()))return o=t,d=T,(i=L[C]).commands||(i.commands={}),i.commands[o]=d,void(S=!1);S=!0,n=C,a=T,r=b.shift(),(s=L[n].commands)[r].result=a,DM.getDOMElement(H)&&P(H)===n&&z(DM.getDOMElement(w),s[r])}S&&function(e){var t=DM.getDOMChildrenByTag(le(e,L[e]),"div").shift();$(t,B,N),setTimeout($.bind(this,t,N,B),y)}(C)}}return T.prototype.loadUsersList=function(t){Object.keys(t).forEach(function(e){ee(t[e],e)})},T.prototype.initListeners=function(){DM.addListener("operators-dashboard-users-filter-bar","change",ne),DM.addListener("operators-dashboard-users-filter-bar","focus",ie),DM.addListener("operators-dashboard-users-sort-bar","change",de)},T.prototype.subscribeOnUpdates=function(){window.addEventListener("message",Me,!1),updatesManager.getDataFromStorage("")},new T}(config);window.addEventListener("load",function(){dashboardFactory.initListeners(),dashboardFactory.subscribeOnUpdates()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZC5qcyJdLCJuYW1lcyI6WyJjb25maWciLCJvcGVyYXRvck5hbWUiLCJjaGF0VVJMIiwicmVxdWVzdHMiLCJtZXNzYWdlRmFjdG9yeSIsIk1lc3NhZ2VGYWN0b3J5IiwiTWVzc2FnZSIsImRhdGUiLCJzZW5kZXIiLCJib2R5IiwiaG91cnMiLCJtaW51dGVzIiwidGhpcyIsImRheSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwidGltZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImNvbmNhdCIsInRvU3RyaW5nIiwiQ29tbWFuZE1lc3NhZ2UiLCJ0eXBlIiwicGFyYW1zIiwidG9Mb2NhbGVTdHJpbmciLCJzaG93biIsInByb3RvdHlwZSIsImdldE1lc3NhZ2UiLCJnZXRDb21tYW5kTWVzc2FnZSIsIkRNIiwiRE9NTWFuYWdlciIsImdldERPTUVsZW1lbnQiLCJpZHRmIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldERPTUNoaWxkcmVuQnlUYWciLCJyb290IiwidGFnIiwiQXJyYXkiLCJmcm9tIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRET01DaGlsZHJlbkJ5Q2xhc3MiLCJjbGFzc05hbWUiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY3JlYXRlRE9NRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJiaW5kIiwiYXBwZW5kRE9NRWxlbWVudCIsImVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInJlbW92ZURPTUVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsImFkZExpc3RlbmVyIiwiZXZlbnQiLCJjYWxsYmFjayIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRDU1NDbGFzcyIsImFyZ3VtZW50cyIsInNsaWNlIiwiZm9yRWFjaCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZUNTU0NsYXNzIiwicmVtb3ZlIiwiSFRUUF9HRVQiLCJIVFRQX1BPU1QiLCJIVFRQX1BVVCIsIlJFUVVFU1RfRkVUQ0giLCJSRVFVRVNUX1hIUiIsInN0b3JhZ2VNYW5hZ2VyIiwiU3RvcmFnZU1hbmFnZXIiLCJnZXRSZXF1ZXN0Q29uZmlnT2JqIiwicmVxdWVzdE1ldGhvZCIsImRhdGEiLCJjb25maWdPYmoiLCJtZXRob2QiLCJoZWFkZXJzIiwiQWNjZXB0IiwiSlNPTiIsInN0cmluZ2lmeSIsImdldFN0b3JhZ2VQYXRoIiwiZXh0cmFQYXRoIiwic2VuZFJlcXVlc3RUb1N0b3JhZ2UiLCJyZXNwb25zZSIsImZldGNoIiwidGhlbiIsImpzb24iLCJyZXNwb25zZURhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJwYXJzZSIsInN0YXR1c1RleHQiLCJzZW5kIiwiZ2V0RGF0YUZyb21TZXJ2aWNlIiwicGF0aCIsInVwZGF0ZXNNYW5hZ2VyIiwiVXBkYXRlc01hbmFnZXIiLCJ1bmRlZmluZWQiLCJnZXREYXRhRnJvbVN0b3JhZ2UiLCJ4aHR0cCIsInJlc3BvbnNlVGV4dCIsInN0YXR1cyIsImxhc3RJbmRleE9mIiwid2luZG93IiwicG9zdE1lc3NhZ2UiLCJsZW5ndGgiLCJsb2NhdGlvbiIsImRhc2hib2FyZEZhY3RvcnkiLCJ1c2Vyc0RhdGEiLCJwYXJhbUluZGV4IiwiREVGQVVMVF9VU0VSTkFNRSIsIlVTRVJfT05MSU5FX1RJTUVPVVQiLCJVU0VSU19MSVNUX0NPTlRBSU5FUl9JRCIsIlNFTEVDVEVEX1VTRVJfQ09OVEFJTkVSX0lEIiwiU0VMRUNURURfVVNFUl9JTk5FUl9JRCIsIlVTRVJfQ0hBVF9NRVNTQUdFU19JRCIsIlVTRVJfQ0hBVF9JTlBVVF9JRCIsIlNFTEVDVEVEX1VTRVJfQ09OVFJPTF9JRCIsIlNFTEVDVEVEX1VTRVJfQ09OVFJPTF9ESUFMT0dfSUQiLCJTRUxFQ1RFRF9VU0VSX0NPTlRST0xfRElBTE9HX0lOUFVUX0lEIiwiSVBfSU5GT19QQVRIIiwiSVBfQVBJX1BBVEgiLCJHRU9fSVBfUEFUSCIsIkNPTU1BTkRTX1BBTkVMX0lEIiwiQ09NTUFORF9TRUxFQ1RfSUQiLCJTRUxFQ1RfT1BUSU9OX0lEX1RFTVBMQVRFIiwiUEFSQU1fQlVUVE9OX0lEX1RFTVBMQVRFIiwiRklSU1RfUEFSQU1fQlVUVE9OX0lEIiwiU0VDT05EX1BBUkFNX0JVVFRPTl9JRCIsIlRISVJEX1BBUkFNX0JVVFRPTl9JRCIsIkxPR19QQU5FTF9JRCIsIlNJTkdMRV9VU0VSX0NMQVNTX05BTUUiLCJVTlJFQURfQ0xBU1NfTkFNRSIsIk9OTElORV9DTEFTU19OQU1FIiwiT0ZGTElORV9DTEFTU19OQU1FIiwiTEVTUyIsIk1PUkUiLCJjb21tYW5kIiwiRGFzaGJvYXJkRmFjdG9yeSIsImNsb3NlU2VsZWN0ZWRVc2VyQ29udGFpbmVyIiwiZ2V0VXNlcklEIiwidXNlckNvbnRhaW5lciIsImZpbmQiLCJmaWVsZCIsImhpZGRlbiIsImlubmVySFRNTCIsImFwcGVuZFNpbmdsZU1lc3NhZ2UiLCJtZXNzYWdlIiwibWVzc2FnZXMiLCJjcmVhdGVVc2VyQ2hhdENvbnRhaW5lciIsInVzZXJDaGF0Q29udGFpbmVyIiwidXNlckNoYXRMZWdlbmQiLCJ1c2VyQ2hhdE1lc3NhZ2VzTGlzdCIsInVzZXJDaGF0TWVzc2FnZUlucHV0IiwidXNlckNoYXRTZW5kQnV0dG9uIiwiaWQiLCJwbGFjZWhvbGRlciIsIm9wZXJhdG9yTWVzc2FnZSIsImlucHV0VmFsdWUiLCJ2YWx1ZSIsIkRhdGUiLCJyZW1vdmVEaWFsb2ciLCJzYXZlUGFyYW1BbmRDbG9zZSIsInBhcmFtIiwic2V0U2VydmljZU5hbWUiLCJlbWl0dGVyIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsImxhYmVsIiwiZm9yIiwiY3JlYXRlRGlhbG9nQ29udGFpbmVyIiwiZGlhbG9nTWVzc2FnZSIsImNvbnRhaW5lciIsImRpYWxvZ0xhYmVsIiwiYXNrU2VydmljZU5hbWUiLCJyYWRpb0J1dHRvbiIsImJ1dHRvbkxhYmVsIiwib3B0aW9uc0NvbnRhaW5lciIsImluZGV4Iiwic2VydmljZU5hbWUiLCJuYW1lIiwiYXNrUHJvbXB0UGFyYW0iLCJkaWFsb2ciLCJpbnB1dEZpZWxkIiwic3VibWl0QnV0dG9uIiwiYXNrRGlhbG9nSGVhZGVyIiwic2V0UGFyYW1JbmRleCIsInNldFBhcmFtc0F2YWlsYWJpbGl0eSIsImlzQXZhaWxhYmxlIiwiZGlzYWJsZWQiLCJjaGFuZ2VGaXJzdFBhcmFtTGlzdGVuZXIiLCJ0b1JlbW92ZSIsInRvQWRkIiwib25Db21tYW5kU2VsZWN0ZWQiLCJzZWxlY3QiLCJvcHRpb24iLCJzZWxlY3RlZCIsImNvbW1hbmROYW1lIiwiaW5kZXhPZiIsImJ1dHRvbklEIiwiaWRJbmRleCIsImJ1dHRvbiIsInJlcGxhY2VtZW50IiwiY2xvbmVOb2RlIiwicmVwbGFjZUNoaWxkIiwic2VuZENvbW1hbmQiLCJnZXRDb21tYW5kc1BhbmVsIiwiY29tbWFuZHNTZWxlY3QiLCJjb21tYW5kc1BhbmVsIiwicnVuQ29tbWFuZEJ1dHRvbiIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsImFwcGVuZFNpbmdsZUNvbW1hbmQiLCJsb2dQYW5lbCIsInVzZXJDb21tYW5kIiwic2lnbmF0dXJlIiwicmVzdWx0Iiwiam9pbiIsImNyZWF0ZVVzZXJDb250cm9sbGVyQ29udGFpbmVyIiwidXNlcklEIiwidXNlckNvbW1hbmRzIiwidXNlckNvbnRyb2xsZXJDb250YWluZXIiLCJ1c2VyQ29udHJvbGxlckxlZ2VuZCIsImNvbW1hbmRzTGFiZWwiLCJsb2dMYWJlbCIsImNvbW1hbmRzIiwiT2JqZWN0Iiwia2V5cyIsImtleSIsInNlbmRSZWFkTWFya1RvU3RvcmFnZSIsInNlbGVjdFVzZXIiLCJzZWxlY3RlZFVzZXJDb250YWluZXIiLCJ1c2VyQ29udGFpbmVyTGVnZW5kIiwidXNlckNvbnRhaW5lckNsb3NlQnV0dG9uIiwidXNlcklERmllbGQiLCJ1c2VyQ29udGFpbmVyc0lubmVyIiwiY29udGFpbnMiLCJzaGlmdCIsInNldFVzZXJTdGF0dXMiLCJzdGF0dXNDb250YWluZXIiLCJjbGFzc1RvUmVtb3ZlIiwiY2xhc3NUb0FkZCIsImFwcGVuZFNpbmdsZVVzZXIiLCJ1c2VyIiwiZ2VuZXJhdGVkIiwidXNlckVsZW1lbnQiLCJ1c2VyTmFtZUVsZW1lbnQiLCJnZW5lcmF0ZWRGaWVsZCIsImNoYXRTdGF0ZUVsZW1lbnQiLCJ1c2VyU3RhdHVzRWxlbWVudCIsInJlYWQiLCJ1c2VyTmFtZSIsImxhc3RNZXNzYWdlIiwibGFzdE1lc3NhZ2VUaW1lIiwibGFzdE1lc3NhZ2VEYXRlIiwibWVzc2FnZXNLZXlzIiwicG9wIiwic3BsaXQiLCJnZXRGdWxsWWVhciIsIk51bWJlciIsImlzVXNlck9ubGluZSIsImNoYXRTdGF0ZSIsImNsZWFyVXNlcnMiLCJ1c2Vyc0NvbnRhaW5lcnMiLCJjb250YWluZXJzIiwiZmlsdGVyVXNlcnMiLCJmaWx0ZXJWYWx1ZSIsImxvYWRVc2Vyc0xpc3QiLCJzb3J0VXNlcnNCeVVzZXJOYW1lIiwiY29udGFpbmVyMSIsImNvbnRhaW5lcjIiLCJzb3J0VXNlcnNCeU9ubGluZVN0YXR1cyIsInNvcnRVc2Vyc0J5Q2hhdFN0YXRlIiwic29ydFVzZXJzQnlVbnJlYWQiLCJzb3J0VXNlcnMiLCJzb3J0QnlBbmRBcHBlbmQiLCJzb3J0RnVuYyIsInNvcnQiLCJjbGVhckZpbHRlciIsImdldFVzZXIiLCJnZXRVc2VyQ29udGFpbmVyIiwidXNlcktleSIsImFwcGx5VXBkYXRlcyIsImNvbW1hbmRLZXkiLCJjb21tYW5kUmVzdWx0IiwibWVzc2FnZUtleSIsInBhdGhGcmFnbWVudHMiLCJmcmFnbWVudCIsImlzVXBkYXRlRnJvbVVzZXIiLCJtYXRjaCIsInNldFRpbWVvdXQiLCJtYW5hZ2VVc2VyT25saW5lIiwidXNlcnMiLCJpbml0TGlzdGVuZXJzIiwic3Vic2NyaWJlT25VcGRhdGVzIl0sIm1hcHBpbmdzIjoiQUFHQSxJQUFJQSxPQUFTLENBQ1hDLGFBQWMsV0FDZEMsUUFBUyx5Q0FDVEMsU0FBVSxTQUtSQyxlQUFpQixXQUNuQixTQUFTQyxLQWFULFNBQVNDLEVB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RnZCLEdBK0dFb0wsQ0FBaUJKLElBVXZCLE9BN1JBckosRUFBaUJ2SCxVQUFVd1AsY0FBZ0IsU0FBdUJ5QixHQUNoRWxFLE9BQU9DLEtBQUtpRSxHQUFPOU8sUUFBUSxTQUFvQjhLLEdBQzdDYyxHQUFpQmtELEVBQU1oRSxHQUFNQSxNQTRHakMxRixFQUFpQnZILFVBQVVrUixjQUFnQixXQUN6Qy9RLEdBQUd1QixZQUNELHVDQUNBLFNBQ0E0TixJQUVGblAsR0FBR3VCLFlBQ0QsdUNBQ0EsUUFDQXlPLElBRUZoUSxHQUFHdUIsWUFBWSxxQ0FBc0MsU0FBVXFPLEtBK0pqRXhJLEVBQWlCdkgsVUFBVW1SLG1CQUFxQixXQUM5Qy9MLE9BQU92RCxpQkFBaUIsVUFBVzBPLElBQWMsR0FDakQzTCxlQUFlRyxtQkFBbUIsS0FHN0IsSUFBSXdDLEVBcjFCVSxDQXMxQnBCbEosUUFFSCtHLE9BQU92RCxpQkFBaUIsT0FBUSxXQUM5QjJELGlCQUFpQjBMLGdCQUNqQjFMLGlCQUFpQjJMIiwiZmlsZSI6ImRhc2hib2FyZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBkYXNoYm9hcmRGYWN0b3J5ICovXHJcbi8qIGV4cG9ydGVkIGNvbmZpZyAqL1xyXG5cclxudmFyIGNvbmZpZyA9IHtcclxuICBvcGVyYXRvck5hbWU6IFwiT3BlcmF0b3JcIixcclxuICBjaGF0VVJMOiBcImh0dHBzOi8vYmVzb21oZWFkLWNoYXQuZmlyZWJhc2Vpby5jb20vXCIsXHJcbiAgcmVxdWVzdHM6IFwiZmV0Y2hcIlxyXG59O1xyXG5cclxuLyogZXhwb3J0ZWQgbWVzc2FnZUZhY3RvcnkgKi9cclxuXHJcbnZhciBtZXNzYWdlRmFjdG9yeSA9IChmdW5jdGlvbiBtZXNzYWdlRmFjdG9yeU1vZHVsZSgpIHtcclxuICBmdW5jdGlvbiBNZXNzYWdlRmFjdG9yeSgpIHt9XHJcblxyXG4gIGZ1bmN0aW9uIGdldEN1cnJlbnRUaW1lKGRhdGUpIHtcclxuICAgIHZhciBob3VycyA9IGRhdGUuZ2V0SG91cnMoKTtcclxuICAgIHZhciBtaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcblxyXG4gICAgcmV0dXJuIChob3VycyA8IDEwID8gXCIwXCIgOiBcIlwiKVxyXG4gICAgICAuY29uY2F0KGhvdXJzLnRvU3RyaW5nKCkpXHJcbiAgICAgIC5jb25jYXQoXCI6XCIpXHJcbiAgICAgIC5jb25jYXQobWludXRlcyA8IDEwID8gXCIwXCIgOiBcIlwiKVxyXG4gICAgICAuY29uY2F0KG1pbnV0ZXMudG9TdHJpbmcoKSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBNZXNzYWdlKGRhdGUsIHNlbmRlciwgYm9keSkge1xyXG4gICAgdGhpcy5kYXkgPSBkYXRlLmdldERhdGUoKTtcclxuICAgIHRoaXMubW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICB0aGlzLnRpbWUgPSBnZXRDdXJyZW50VGltZShkYXRlKTtcclxuICAgIHRoaXMuc2VuZGVyID0gc2VuZGVyO1xyXG4gICAgdGhpcy5ib2R5ID0gYm9keTtcclxuICB9XHJcblxyXG4gIE1lc3NhZ2VGYWN0b3J5LnByb3RvdHlwZS5nZXRNZXNzYWdlID0gZnVuY3Rpb24gZ2V0TWVzc2FnZShcclxuICAgIGRhdGUsXHJcbiAgICBzZW5kZXIsXHJcbiAgICBib2R5XHJcbiAgKSB7XHJcbiAgICByZXR1cm4gbmV3IE1lc3NhZ2UoZGF0ZSwgc2VuZGVyLCBib2R5KTtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBDb21tYW5kTWVzc2FnZShkYXRlLCB0eXBlLCBwYXJhbXMpIHtcclxuICAgIHRoaXMuZGF0ZSA9IGRhdGUudG9Mb2NhbGVTdHJpbmcoKTtcclxuICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgIHRoaXMuc2hvd24gPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIE1lc3NhZ2VGYWN0b3J5LnByb3RvdHlwZS5nZXRDb21tYW5kTWVzc2FnZSA9IGZ1bmN0aW9uIGdldENvbW1hbmRNZXNzYWdlKFxyXG4gICAgZGF0ZSxcclxuICAgIHR5cGUsXHJcbiAgICBwYXJhbXNcclxuICApIHtcclxuICAgIHJldHVybiBuZXcgQ29tbWFuZE1lc3NhZ2UoZGF0ZSwgdHlwZSwgcGFyYW1zKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gbmV3IE1lc3NhZ2VGYWN0b3J5KCk7XHJcbn0pKCk7XHJcbi8qIGV4cG9ydGVkIERNICovXHJcblxyXG52YXIgRE0gPSAoZnVuY3Rpb24gRE9NTWFuYWdlck1vZHVsZSgpIHtcclxuICBmdW5jdGlvbiBET01NYW5hZ2VyKCkge31cclxuXHJcbiAgRE9NTWFuYWdlci5wcm90b3R5cGUuZ2V0RE9NRWxlbWVudCA9IGZ1bmN0aW9uIGdldEVsZW1lbnQoaWR0Zikge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBpZHRmID09PSBcInN0cmluZ1wiID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWR0ZikgOiBpZHRmO1xyXG4gIH07XHJcbiAgRE9NTWFuYWdlci5wcm90b3R5cGUuZ2V0RE9NQ2hpbGRyZW5CeVRhZyA9IGZ1bmN0aW9uIGdldENoaWxkcmVuQnlUYWdOYW1lKFxyXG4gICAgcm9vdCxcclxuICAgIHRhZ1xyXG4gICkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5nZXRET01FbGVtZW50KHJvb3QpLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZykpO1xyXG4gIH07XHJcbiAgRE9NTWFuYWdlci5wcm90b3R5cGUuZ2V0RE9NQ2hpbGRyZW5CeUNsYXNzID0gZnVuY3Rpb24gZ2V0Q2hpbGRyZW5CeUNsYXNzTmFtZShcclxuICAgIHJvb3QsXHJcbiAgICBjbGFzc05hbWVcclxuICApIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKERNLmdldERPTUVsZW1lbnQocm9vdCkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpKTtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZURPTUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50LmJpbmQoZG9jdW1lbnQpO1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLmFwcGVuZERPTUVsZW1lbnQgPSBmdW5jdGlvbiBhcHBlbmQocm9vdCwgZWxlbWVudCkge1xyXG4gICAgRE0uZ2V0RE9NRWxlbWVudChyb290KS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLnJlbW92ZURPTUVsZW1lbnQgPSBmdW5jdGlvbiByZW1vdmUocm9vdCwgZWxlbWVudCkge1xyXG4gICAgRE0uZ2V0RE9NRWxlbWVudChyb290KS5yZW1vdmVDaGlsZChETS5nZXRET01FbGVtZW50KGVsZW1lbnQpKTtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgIHJvb3QsXHJcbiAgICBldmVudCxcclxuICAgIGNhbGxiYWNrXHJcbiAgKSB7XHJcbiAgICBETS5nZXRET01FbGVtZW50KHJvb3QpLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrKTtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuICAgIHJvb3QsXHJcbiAgICBldmVudCxcclxuICAgIGNhbGxiYWNrXHJcbiAgKSB7XHJcbiAgICBETS5nZXRET01FbGVtZW50KHJvb3QpLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrKTtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLmFkZENTU0NsYXNzID0gZnVuY3Rpb24gYWRkQ1NTQ2xhc3Mocm9vdCkge1xyXG4gICAgQXJyYXkuZnJvbShhcmd1bWVudHMpXHJcbiAgICAgIC5zbGljZSgxKVxyXG4gICAgICAuZm9yRWFjaChmdW5jdGlvbiBhZGRDbGFzc2VzKGNsYXNzTmFtZSkge1xyXG4gICAgICAgIERNLmdldERPTUVsZW1lbnQocm9vdCkuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG4gIERPTU1hbmFnZXIucHJvdG90eXBlLnJlbW92ZUNTU0NsYXNzID0gZnVuY3Rpb24gcmVtb3ZlQ1NTQ2xhc3MoXHJcbiAgICByb290LFxyXG4gICAgY2xhc3NOYW1lXHJcbiAgKSB7XHJcbiAgICBETS5nZXRET01FbGVtZW50KHJvb3QpLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gbmV3IERPTU1hbmFnZXIoKTtcclxufSkoKTtcclxuLyogZXhwb3J0ZWQgc3RvcmFnZU1hbmFnZXIgKi9cclxuLyogZXhwb3J0ZWQgSFRUUF9HRVQgSFRUUF9QT1NUIEhUVFBfUFVUICovXHJcbi8qIGdsb2JhbCBjb25maWcgKi9cclxuXHJcbnZhciBIVFRQX0dFVCA9IFwiR0VUXCI7XHJcbnZhciBIVFRQX1BPU1QgPSBcIlBPU1RcIjtcclxudmFyIEhUVFBfUFVUID0gXCJQVVRcIjtcclxudmFyIFJFUVVFU1RfRkVUQ0ggPSBcImZldGNoXCI7XHJcbnZhciBSRVFVRVNUX1hIUiA9IFwieGhyXCI7XHJcblxyXG52YXIgc3RvcmFnZU1hbmFnZXIgPSAoZnVuY3Rpb24gc3RvcmFnZU1hbmFnZXJNb2R1bGUoY29uZmlnKSB7XHJcbiAgZnVuY3Rpb24gU3RvcmFnZU1hbmFnZXIoKSB7fVxyXG5cclxuICBTdG9yYWdlTWFuYWdlci5wcm90b3R5cGUuZ2V0U3RvcmFnZVBhdGggPSBmdW5jdGlvbiBnZXRTdG9yYWdlUGF0aChleHRyYVBhdGgpIHtcclxuICAgIHJldHVybiBjb25maWcuY2hhdFVSTCArIGV4dHJhUGF0aCArIFwiLmpzb25cIjtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBnZXRSZXF1ZXN0Q29uZmlnT2JqKHJlcXVlc3RNZXRob2QsIGRhdGEpIHtcclxuICAgIHZhciBjb25maWdPYmogPSB7XHJcbiAgICAgIG1ldGhvZDogcmVxdWVzdE1ldGhvZCxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAocmVxdWVzdE1ldGhvZCAhPT0gSFRUUF9HRVQpIHtcclxuICAgICAgY29uZmlnT2JqLmJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29uZmlnT2JqO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2VuZFJlcXVlc3RUb1N0b3JhZ2VCeUZldGNoKGV4dHJhUGF0aCwgcmVxdWVzdE1ldGhvZCwgZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKFxyXG4gICAgICBzdG9yYWdlTWFuYWdlci5nZXRTdG9yYWdlUGF0aChleHRyYVBhdGgpLFxyXG4gICAgICBnZXRSZXF1ZXN0Q29uZmlnT2JqKHJlcXVlc3RNZXRob2QsIGRhdGEpXHJcbiAgICApXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uIGdldFJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24gZ2V0UmVzcG9uc2VEYXRhKHJlc3BvbnNlRGF0YSkge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZURhdGE7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2VuZFJlcXVlc3RUb1N0b3JhZ2VCeVhIUihleHRyYVBhdGgsIG1ldGhvZCwgZGF0YSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIHNlbmRYSFJSZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgICB4aHIub3BlbihtZXRob2QsIHN0b3JhZ2VNYW5hZ2VyLmdldFN0b3JhZ2VQYXRoKGV4dHJhUGF0aCksIHRydWUpO1xyXG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uIG9uTG9hZCgpIHtcclxuICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGZ1bmN0aW9uIG9uRXJyb3IoKSB7XHJcbiAgICAgICAgcmVqZWN0KHhoci5zdGF0dXNUZXh0KTtcclxuICAgICAgfSk7XHJcbiAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgU3RvcmFnZU1hbmFnZXIucHJvdG90eXBlLnNlbmRSZXF1ZXN0VG9TdG9yYWdlID0gZnVuY3Rpb24gc2VuZFJlcXVlc3RUb1N0b3JhZ2UoXHJcbiAgICBleHRyYVBhdGgsXHJcbiAgICBtZXRob2QsXHJcbiAgICBkYXRhXHJcbiAgKSB7XHJcbiAgICB2YXIgcmVzcG9uc2U7XHJcblxyXG4gICAgaWYgKGNvbmZpZy5yZXF1ZXN0cyA9PT0gUkVRVUVTVF9GRVRDSCkge1xyXG4gICAgICByZXNwb25zZSA9IHNlbmRSZXF1ZXN0VG9TdG9yYWdlQnlGZXRjaChleHRyYVBhdGgsIG1ldGhvZCwgZGF0YSk7XHJcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5yZXF1ZXN0cyA9PT0gUkVRVUVTVF9YSFIpIHtcclxuICAgICAgcmVzcG9uc2UgPSBzZW5kUmVxdWVzdFRvU3RvcmFnZUJ5WEhSKGV4dHJhUGF0aCwgbWV0aG9kLCBkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgfTtcclxuXHJcbiAgU3RvcmFnZU1hbmFnZXIucHJvdG90eXBlLmdldERhdGFGcm9tU2VydmljZSA9IGZ1bmN0aW9uIGdldERhdGFGcm9tU2VydmljZShcclxuICAgIHBhdGhcclxuICApIHtcclxuICAgIHJldHVybiBmZXRjaChwYXRoLCBnZXRSZXF1ZXN0Q29uZmlnT2JqKEhUVFBfR0VUKSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24gZ2V0UmVzcG9uc2UocmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbiBnZXRSZXNwb25zZURhdGEocmVzcG9uc2VEYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlRGF0YTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIG5ldyBTdG9yYWdlTWFuYWdlcigpO1xyXG59KShjb25maWcpO1xyXG4vKiBleHBvcnRlZCB1cGRhdGVzTWFuYWdlciAqL1xyXG4vKiBnbG9iYWwgc3RvcmFnZU1hbmFnZXIgKi9cclxuXHJcbnZhciB1cGRhdGVzTWFuYWdlciA9IChmdW5jdGlvbiB1cGRhdGVzTWFuYWdlck1vZHVsZSgpIHtcclxuICB2YXIgSlNPTl9NQVJLID0gXCJkYXRhOlwiO1xyXG5cclxuICBmdW5jdGlvbiBVcGRhdGVzTWFuYWdlcigpIHtcclxuICAgIHRoaXMucmVzcG9uc2VEYXRhID0gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgVXBkYXRlc01hbmFnZXIucHJvdG90eXBlLmdldERhdGFGcm9tU3RvcmFnZSA9IGZ1bmN0aW9uIGdldERhdGFGcm9tU3RvcmFnZShcclxuICAgIGV4dHJhUGF0aFxyXG4gICkge1xyXG4gICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgeGh0dHAuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIiwgZnVuY3Rpb24gb25EYXRhUmVjZWl2ZWQoKSB7XHJcbiAgICAgIHZhciByZXNwb25zZSA9IHhodHRwLnJlc3BvbnNlVGV4dDtcclxuXHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cyAmJiB0aGlzLnJlc3BvbnNlVGV4dCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHJlc3BvbnNlLmxhc3RJbmRleE9mKFwiZXZlbnQ6XCIpICE9PSByZXNwb25zZS5sYXN0SW5kZXhPZihcImV2ZW50OiBwdXRcIilcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKFxyXG4gICAgICAgICAgSlNPTi5wYXJzZShcclxuICAgICAgICAgICAgcmVzcG9uc2Uuc2xpY2UoXHJcbiAgICAgICAgICAgICAgcmVzcG9uc2UubGFzdEluZGV4T2YoSlNPTl9NQVJLKSArIEpTT05fTUFSSy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgcmVzcG9uc2UubGFzdEluZGV4T2YoXCJ9XCIpICsgMVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICApLFxyXG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgeGh0dHAub3BlbihcIkdFVFwiLCBzdG9yYWdlTWFuYWdlci5nZXRTdG9yYWdlUGF0aChleHRyYVBhdGgpLCB0cnVlKTtcclxuICAgIHhodHRwLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJ0ZXh0L2V2ZW50LXN0cmVhbVwiKTtcclxuICAgIHhodHRwLnNlbmQoKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gbmV3IFVwZGF0ZXNNYW5hZ2VyKCk7XHJcbn0pKCk7XHJcbi8qIGV4cG9ydGVkIGRhc2hib2FyZEZhY3RvcnkgKi9cclxuLyogZ2xvYmFsIG1lc3NhZ2VGYWN0b3J5ICovXHJcbi8qIGdsb2JhbCBETSAqL1xyXG4vKiBnbG9iYWwgc3RvcmFnZU1hbmFnZXIgSFRUUF9QT1NUIEhUVFBfUFVUICovXHJcbi8qIGdsb2JhbCBjb25maWcgKi9cclxuLyogZ2xvYmFsIHVwZGF0ZXNNYW5hZ2VyICovXHJcblxyXG52YXIgZGFzaGJvYXJkRmFjdG9yeSA9IChmdW5jdGlvbiBkYXNoYm9hcmRGYWN0b3J5TW9kdWxlKGNvbmZpZykge1xyXG4gIHZhciBERUZBVUxUX1VTRVJOQU1FID0gXCLQktGLXCI7XHJcbiAgdmFyIFVTRVJfT05MSU5FX1RJTUVPVVQgPSAxMjAwMDA7XHJcbiAgdmFyIFVTRVJTX0xJU1RfQ09OVEFJTkVSX0lEID0gXCJvcGVyYXRvcnMtZGFzaGJvYXJkLXVzZXJzLWxpc3QtY29udGFpbmVyXCI7XHJcbiAgdmFyIFNFTEVDVEVEX1VTRVJfQ09OVEFJTkVSX0lEID1cclxuICAgIFwib3BlcmF0b3JzLWRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNvbnRhaW5lclwiO1xyXG4gIHZhciBTRUxFQ1RFRF9VU0VSX0lOTkVSX0lEID0gXCJvcGVyYXRvcnMtZGFzaGJvYXJkLXNlbGVjdGVkLXVzZXItaW5uZXJcIjtcclxuICB2YXIgVVNFUl9DSEFUX01FU1NBR0VTX0lEID0gXCJvcGVyYXRvcnMtZGFzaGJvYXJkLXVzZXItY2hhdC1tZXNzYWdlc1wiO1xyXG4gIHZhciBVU0VSX0NIQVRfSU5QVVRfSUQgPSBcIm9wZXJhdG9ycy1kYXNoYm9hcmQtdXNlci1jaGF0LWlucHV0XCI7XHJcbiAgdmFyIFNFTEVDVEVEX1VTRVJfQ09OVFJPTF9JRCA9IFwib3BlcmF0b3JzLWRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNvbnRyb2xcIjtcclxuICB2YXIgU0VMRUNURURfVVNFUl9DT05UUk9MX0RJQUxPR19JRCA9XHJcbiAgICBcIm9wZXJhdG9ycy1kYXNoYm9hcmQtc2VsZWN0ZWQtdXNlci1jb250cm9sLWRpYWxvZ1wiO1xyXG4gIHZhciBTRUxFQ1RFRF9VU0VSX0NPTlRST0xfRElBTE9HX0lOUFVUX0lEID1cclxuICAgIFwib3BlcmF0b3JzLWRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNvbnRyb2wtZGlhbG9nLWlucHV0XCI7XHJcbiAgdmFyIElQX0lORk9fUEFUSCA9IFwiaHR0cHM6Ly9pcGluZm8uaW8vXCI7XHJcbiAgdmFyIElQX0FQSV9QQVRIID0gXCJodHRwOi8vaXAtYXBpLmNvbS9cIjtcclxuICB2YXIgR0VPX0lQX1BBVEggPSBcImh0dHBzOi8vZ2VvaXAtZGIuY29tL1wiO1xyXG4gIHZhciBDT01NQU5EU19QQU5FTF9JRCA9IFwiZGFzaGJvYXJkLXNlbGVjdGVkLXVzZXItY29tbWFuZHMtcGFuZWxcIjtcclxuICB2YXIgQ09NTUFORF9TRUxFQ1RfSUQgPSBcIm9wZXJhdG9ycy1kYXNoYm9hcmQtY29tbWFuZC1zZWxlY3RcIjtcclxuICB2YXIgU0VMRUNUX09QVElPTl9JRF9URU1QTEFURSA9IFwib3BlcmF0b3JzLWRhc2hib2FyZC1jb21tYW5kLVwiO1xyXG4gIHZhciBQQVJBTV9CVVRUT05fSURfVEVNUExBVEUgPSBcIm9wZXJhdG9ycy1kYXNoYm9hcmQtc2VsZWN0ZWQtdXNlci1wYXJhbS1cIjtcclxuICB2YXIgRklSU1RfUEFSQU1fQlVUVE9OX0lEID0gUEFSQU1fQlVUVE9OX0lEX1RFTVBMQVRFICsgXCIxXCI7XHJcbiAgdmFyIFNFQ09ORF9QQVJBTV9CVVRUT05fSUQgPSBQQVJBTV9CVVRUT05fSURfVEVNUExBVEUgKyBcIjJcIjtcclxuICB2YXIgVEhJUkRfUEFSQU1fQlVUVE9OX0lEID0gUEFSQU1fQlVUVE9OX0lEX1RFTVBMQVRFICsgXCIzXCI7XHJcbiAgdmFyIExPR19QQU5FTF9JRCA9IFwib3BlcmF0b3JzLWRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNvbW1hbmRzLWxvZ1wiO1xyXG4gIHZhciBTSU5HTEVfVVNFUl9DTEFTU19OQU1FID0gXCJkYXNoYm9hcmQtc2luZ2xlLXVzZXItY29udGFpbmVyXCI7XHJcbiAgdmFyIFVOUkVBRF9DTEFTU19OQU1FID0gXCJkYXNoYm9hcmQtc2luZ2xlLXVzZXItY29udGFpbmVyLXVucmVhZFwiO1xyXG4gIHZhciBPTkxJTkVfQ0xBU1NfTkFNRSA9IFwiZGFzaGJvYXJkLXVzZXItc3RhdHVzLW9ubGluZVwiO1xyXG4gIHZhciBPRkZMSU5FX0NMQVNTX05BTUUgPSBcImRhc2hib2FyZC11c2VyLXN0YXR1cy1vZmZsaW5lXCI7XHJcbiAgdmFyIExFU1MgPSAtMTtcclxuICB2YXIgTU9SRSA9IDE7XHJcblxyXG4gIHZhciB1c2Vyc0RhdGE7XHJcbiAgdmFyIHBhcmFtSW5kZXg7XHJcbiAgdmFyIGNvbW1hbmQgPSB7XHJcbiAgICB0eXBlOiBcIlwiLFxyXG4gICAgcGFyYW1zOiBbXVxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIERhc2hib2FyZEZhY3RvcnkoKSB7fVxyXG5cclxuICBmdW5jdGlvbiBjbG9zZVNlbGVjdGVkVXNlckNvbnRhaW5lcigpIHtcclxuICAgIERNLnJlbW92ZURPTUVsZW1lbnQoU0VMRUNURURfVVNFUl9DT05UQUlORVJfSUQsIFNFTEVDVEVEX1VTRVJfSU5ORVJfSUQpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0VXNlcklEKHVzZXJDb250YWluZXIpIHtcclxuICAgIHJldHVybiBETS5nZXRET01DaGlsZHJlbkJ5VGFnKHVzZXJDb250YWluZXIsIFwibGFiZWxcIikuZmluZChmdW5jdGlvbiBmaW5kSUQoXHJcbiAgICAgIGZpZWxkXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIGZpZWxkLmhpZGRlbjtcclxuICAgIH0pLmlubmVySFRNTDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFwcGVuZFNpbmdsZU1lc3NhZ2UobWVzc2FnZSkge1xyXG4gICAgdmFyIG1lc3NhZ2VzID0gRE0uZ2V0RE9NRWxlbWVudChVU0VSX0NIQVRfTUVTU0FHRVNfSUQpO1xyXG4gICAgdmFyIHNlbmRlciA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICB2YXIgYm9keSA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gICAgc2VuZGVyLmlubmVySFRNTCA9IG1lc3NhZ2Uuc2VuZGVyO1xyXG4gICAgYm9keS5pbm5lckhUTUwgPSBtZXNzYWdlLmJvZHk7XHJcblxyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudChtZXNzYWdlcywgc2VuZGVyKTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQobWVzc2FnZXMsIGJvZHkpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2VuZE1lc3NhZ2UodXNlckNvbnRhaW5lcikge1xyXG4gICAgdmFyIGlucHV0VmFsdWUgPSBETS5nZXRET01FbGVtZW50KFVTRVJfQ0hBVF9JTlBVVF9JRCkudmFsdWU7XHJcbiAgICB2YXIgb3BlcmF0b3JNZXNzYWdlO1xyXG5cclxuICAgIGlmIChpbnB1dFZhbHVlID09PSBcIlwiKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIG9wZXJhdG9yTWVzc2FnZSA9IG1lc3NhZ2VGYWN0b3J5LmdldE1lc3NhZ2UoXHJcbiAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgIGNvbmZpZy5vcGVyYXRvck5hbWUgKyBcIjpcIixcclxuICAgICAgaW5wdXRWYWx1ZVxyXG4gICAgKTtcclxuICAgIERNLmdldERPTUVsZW1lbnQoVVNFUl9DSEFUX0lOUFVUX0lEKS52YWx1ZSA9IFwiXCI7XHJcbiAgICBzdG9yYWdlTWFuYWdlci5zZW5kUmVxdWVzdFRvU3RvcmFnZShcclxuICAgICAgZ2V0VXNlcklEKHVzZXJDb250YWluZXIpICsgXCIvbWVzc2FnZXNcIixcclxuICAgICAgSFRUUF9QT1NULFxyXG4gICAgICBvcGVyYXRvck1lc3NhZ2VcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVVc2VyQ2hhdENvbnRhaW5lcih1c2VyQ29udGFpbmVyKSB7XHJcbiAgICB2YXIgdXNlckNoYXRDb250YWluZXIgPSBETS5jcmVhdGVET01FbGVtZW50KFwiZmllbGRzZXRcIik7XHJcbiAgICB2YXIgdXNlckNoYXRMZWdlbmQgPSBETS5jcmVhdGVET01FbGVtZW50KFwibGVnZW5kXCIpO1xyXG4gICAgdmFyIHVzZXJDaGF0TWVzc2FnZXNMaXN0ID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImRpdlwiKTtcclxuICAgIHZhciB1c2VyQ2hhdE1lc3NhZ2VJbnB1dCA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcclxuICAgIHZhciB1c2VyQ2hhdFNlbmRCdXR0b24gPSBETS5jcmVhdGVET01FbGVtZW50KFwiYnV0dG9uXCIpO1xyXG5cclxuICAgIERNLmFkZENTU0NsYXNzKHVzZXJDaGF0Q29udGFpbmVyLCBcImRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNoYXQtY29udGFpbmVyXCIpO1xyXG4gICAgdXNlckNoYXRMZWdlbmQuaW5uZXJIVE1MID0gXCLQp9Cw0YJcIjtcclxuICAgIHVzZXJDaGF0TWVzc2FnZXNMaXN0LmlkID0gVVNFUl9DSEFUX01FU1NBR0VTX0lEO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3MoXHJcbiAgICAgIHVzZXJDaGF0TWVzc2FnZXNMaXN0LFxyXG4gICAgICBcImRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNoYXQtbWVzc2FnZXNcIlxyXG4gICAgKTtcclxuICAgIHVzZXJDaGF0TWVzc2FnZUlucHV0LmlkID0gVVNFUl9DSEFUX0lOUFVUX0lEO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3ModXNlckNoYXRNZXNzYWdlSW5wdXQsIFwiZGFzaGJvYXJkLXNlbGVjdGVkLXVzZXItY2hhdC1pbnB1dFwiKTtcclxuICAgIHVzZXJDaGF0TWVzc2FnZUlucHV0LnBsYWNlaG9sZGVyID0gXCLQndC+0LLQvtC1INGB0L7QvtCx0YnQtdC90LjQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y5cIjtcclxuICAgIERNLmFkZENTU0NsYXNzKHVzZXJDaGF0U2VuZEJ1dHRvbiwgXCJkYXNoYm9hcmQtc2VsZWN0ZWQtdXNlci1jaGF0LWJ1dHRvblwiKTtcclxuICAgIHVzZXJDaGF0U2VuZEJ1dHRvbi5pbm5lckhUTUwgPSBcIlNlbmRcIjtcclxuICAgIERNLmFkZExpc3RlbmVyKFxyXG4gICAgICB1c2VyQ2hhdFNlbmRCdXR0b24sXHJcbiAgICAgIFwiY2xpY2tcIixcclxuICAgICAgc2VuZE1lc3NhZ2UuYmluZChudWxsLCB1c2VyQ29udGFpbmVyKVxyXG4gICAgKTtcclxuXHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHVzZXJDaGF0Q29udGFpbmVyLCB1c2VyQ2hhdExlZ2VuZCk7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHVzZXJDaGF0Q29udGFpbmVyLCB1c2VyQ2hhdE1lc3NhZ2VzTGlzdCk7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHVzZXJDaGF0Q29udGFpbmVyLCB1c2VyQ2hhdE1lc3NhZ2VJbnB1dCk7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHVzZXJDaGF0Q29udGFpbmVyLCB1c2VyQ2hhdFNlbmRCdXR0b24pO1xyXG5cclxuICAgIHJldHVybiB1c2VyQ2hhdENvbnRhaW5lcjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZURpYWxvZygpIHtcclxuICAgIGlmICghRE0uZ2V0RE9NRWxlbWVudChTRUxFQ1RFRF9VU0VSX0NPTlRST0xfRElBTE9HX0lEKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgRE0ucmVtb3ZlRE9NRWxlbWVudChcclxuICAgICAgU0VMRUNURURfVVNFUl9DT05UUk9MX0lELFxyXG4gICAgICBTRUxFQ1RFRF9VU0VSX0NPTlRST0xfRElBTE9HX0lEXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2F2ZVBhcmFtQW5kQ2xvc2UocGFyYW0pIHtcclxuICAgIGNvbW1hbmQucGFyYW1zW3BhcmFtSW5kZXhdID0gcGFyYW07XHJcbiAgICByZW1vdmVEaWFsb2coKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldFNlcnZpY2VOYW1lKGV2ZW50KSB7XHJcbiAgICB2YXIgZW1pdHRlciA9IGV2ZW50LnRhcmdldDtcclxuXHJcbiAgICBzYXZlUGFyYW1BbmRDbG9zZShcclxuICAgICAgRE0uZ2V0RE9NQ2hpbGRyZW5CeVRhZyhlbWl0dGVyLnBhcmVudE5vZGUsIFwibGFiZWxcIikuZmluZChcclxuICAgICAgICBmdW5jdGlvbiBmaW5kTGFiZWwobGFiZWwpIHtcclxuICAgICAgICAgIHJldHVybiBsYWJlbC5mb3IgPT09IGVtaXR0ZXIuaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICApLmlubmVySFRNTFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZURpYWxvZ0NvbnRhaW5lcihkaWFsb2dNZXNzYWdlKSB7XHJcbiAgICB2YXIgY29udGFpbmVyID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImRpdlwiKTtcclxuICAgIHZhciBkaWFsb2dMYWJlbCA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuXHJcbiAgICBjb250YWluZXIuaWQgPSBTRUxFQ1RFRF9VU0VSX0NPTlRST0xfRElBTE9HX0lEO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3MoY29udGFpbmVyLCBcImRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNvbnRyb2wtZGlhbG9nXCIpO1xyXG4gICAgZGlhbG9nTGFiZWwuaW5uZXJIVE1MID0gZGlhbG9nTWVzc2FnZTtcclxuXHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KGNvbnRhaW5lciwgZGlhbG9nTGFiZWwpO1xyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudChTRUxFQ1RFRF9VU0VSX0NPTlRST0xfSUQsIGNvbnRhaW5lcik7XHJcblxyXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFza1NlcnZpY2VOYW1lKCkge1xyXG4gICAgdmFyIG9wdGlvbnNDb250YWluZXIgPSBETS5jcmVhdGVET01FbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgdmFyIHJhZGlvQnV0dG9uO1xyXG4gICAgdmFyIGJ1dHRvbkxhYmVsO1xyXG4gICAgdmFyIGluZGV4ID0gMDtcclxuXHJcbiAgICBETS5hZGRDU1NDbGFzcyhcclxuICAgICAgb3B0aW9uc0NvbnRhaW5lcixcclxuICAgICAgXCJkYXNoYm9hcmQtc2VsZWN0ZWQtdXNlci1jb250cm9sLWRpYWxvZy1vcHRpb25zXCJcclxuICAgICk7XHJcbiAgICBbSVBfSU5GT19QQVRILCBJUF9BUElfUEFUSCwgR0VPX0lQX1BBVEhdLmZvckVhY2goZnVuY3Rpb24gYXBwZW5kUmFkaW9zKFxyXG4gICAgICBzZXJ2aWNlTmFtZVxyXG4gICAgKSB7XHJcbiAgICAgIHJhZGlvQnV0dG9uID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICByYWRpb0J1dHRvbi50eXBlID0gXCJyYWRpb1wiO1xyXG4gICAgICByYWRpb0J1dHRvbi5pZCA9XHJcbiAgICAgICAgXCJvcGVyYXRvcnMtZGFzaGJvYXJkLXNlbGVjdGVkLXVzZXItY29udHJvbC1kaWFsb2ctb3B0aW9uLVwiICsgKytpbmRleDtcclxuICAgICAgcmFkaW9CdXR0b24ubmFtZSA9IFwic2VydmljZVwiO1xyXG4gICAgICBETS5hZGRMaXN0ZW5lcihyYWRpb0J1dHRvbiwgXCJjbGlja1wiLCBzZXRTZXJ2aWNlTmFtZSk7XHJcbiAgICAgIGJ1dHRvbkxhYmVsID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImxhYmVsXCIpO1xyXG4gICAgICBidXR0b25MYWJlbC5pbm5lckhUTUwgPSBzZXJ2aWNlTmFtZTtcclxuICAgICAgYnV0dG9uTGFiZWwuZm9yID0gcmFkaW9CdXR0b24uaWQ7XHJcblxyXG4gICAgICBETS5hcHBlbmRET01FbGVtZW50KG9wdGlvbnNDb250YWluZXIsIHJhZGlvQnV0dG9uKTtcclxuICAgICAgRE0uYXBwZW5kRE9NRWxlbWVudChvcHRpb25zQ29udGFpbmVyLCBidXR0b25MYWJlbCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KFxyXG4gICAgICBjcmVhdGVEaWFsb2dDb250YWluZXIoXCJXaGF0IHNlcnZpY2UgZG8geW91IHdhbnQgdG8gdXNlP1wiKSxcclxuICAgICAgb3B0aW9uc0NvbnRhaW5lclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFza1Byb21wdFBhcmFtKGRpYWxvZ01lc3NhZ2UpIHtcclxuICAgIHZhciBkaWFsb2c7XHJcbiAgICB2YXIgaW5wdXRGaWVsZCA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgIHZhciBzdWJtaXRCdXR0b24gPSBETS5jcmVhdGVET01FbGVtZW50KFwiYnV0dG9uXCIpO1xyXG5cclxuICAgIHJlbW92ZURpYWxvZygpO1xyXG4gICAgZGlhbG9nID0gY3JlYXRlRGlhbG9nQ29udGFpbmVyKGRpYWxvZ01lc3NhZ2UpO1xyXG4gICAgaW5wdXRGaWVsZC5pZCA9IFNFTEVDVEVEX1VTRVJfQ09OVFJPTF9ESUFMT0dfSU5QVVRfSUQ7XHJcbiAgICBETS5hZGRDU1NDbGFzcyhpbnB1dEZpZWxkLCBcImRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNvbnRyb2wtZGlhbG9nLWlucHV0XCIpO1xyXG4gICAgc3VibWl0QnV0dG9uLmlubmVySFRNTCA9IFwiU2F2ZVwiO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3MoXHJcbiAgICAgIHN1Ym1pdEJ1dHRvbixcclxuICAgICAgXCJkYXNoYm9hcmQtc2VsZWN0ZWQtdXNlci1jb250cm9sLWRpYWxvZy1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIERNLmFkZExpc3RlbmVyKHN1Ym1pdEJ1dHRvbiwgXCJjbGlja1wiLCBmdW5jdGlvbiBzYXZlUGFyYW0oKSB7XHJcbiAgICAgIHNhdmVQYXJhbUFuZENsb3NlKFxyXG4gICAgICAgIERNLmdldERPTUVsZW1lbnQoU0VMRUNURURfVVNFUl9DT05UUk9MX0RJQUxPR19JTlBVVF9JRCkudmFsdWVcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQoZGlhbG9nLCBpbnB1dEZpZWxkKTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQoZGlhbG9nLCBzdWJtaXRCdXR0b24pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYXNrRGlhbG9nSGVhZGVyKCkge1xyXG4gICAgYXNrUHJvbXB0UGFyYW0oXCJXaGF0IGhlYWRlciBkbyB5b3Ugd2FudD9cIik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRQYXJhbUluZGV4KGluZGV4KSB7XHJcbiAgICBwYXJhbUluZGV4ID0gaW5kZXg7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhcHBlbmRQYXJhbXNCdXR0b25zKGNvbnRhaW5lcikge1xyXG4gICAgdmFyIGluZGV4ID0gMDtcclxuICAgIHZhciBidXR0b247XHJcblxyXG4gICAgW1xyXG4gICAgICBGSVJTVF9QQVJBTV9CVVRUT05fSUQsXHJcbiAgICAgIFNFQ09ORF9QQVJBTV9CVVRUT05fSUQsXHJcbiAgICAgIFRISVJEX1BBUkFNX0JVVFRPTl9JRFxyXG4gICAgXS5mb3JFYWNoKGZ1bmN0aW9uIGNyZWF0ZVBhcmFtQnV0dG9ucyhidXR0b25JRCkge1xyXG4gICAgICBidXR0b24gPSBETS5jcmVhdGVET01FbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICBidXR0b24uaWQgPSBidXR0b25JRDtcclxuICAgICAgRE0uYWRkQ1NTQ2xhc3MoYnV0dG9uLCBcImRhc2hib2FyZC1zZWxlY3RlZC11c2VyLXBhcmFtLWJ1dHRvblwiKTtcclxuICAgICAgRE0uYWRkTGlzdGVuZXIoYnV0dG9uLCBcImNsaWNrXCIsIHNldFBhcmFtSW5kZXguYmluZCh0aGlzLCBpbmRleCkpO1xyXG4gICAgICBidXR0b24uaW5uZXJIVE1MID0gXCJQYXJhbVwiICsgKytpbmRleDtcclxuICAgICAgRE0uYXBwZW5kRE9NRWxlbWVudChjb250YWluZXIsIGJ1dHRvbik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldFNlbGVjdGVkT3B0aW9uKHNlbGVjdCkge1xyXG4gICAgcmV0dXJuIERNLmdldERPTUNoaWxkcmVuQnlUYWcoc2VsZWN0LCBcIm9wdGlvblwiKS5maW5kKGZ1bmN0aW9uIGZpbmRTZWxlY3RlZChcclxuICAgICAgb3B0aW9uXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIG9wdGlvbi5zZWxlY3RlZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0UGFyYW1zQXZhaWxhYmlsaXR5KGlzQXZhaWxhYmxlKSB7XHJcbiAgICBETS5nZXRET01FbGVtZW50KFNFQ09ORF9QQVJBTV9CVVRUT05fSUQpLmRpc2FibGVkID0gIWlzQXZhaWxhYmxlO1xyXG4gICAgRE0uZ2V0RE9NRWxlbWVudChUSElSRF9QQVJBTV9CVVRUT05fSUQpLmRpc2FibGVkID0gIWlzQXZhaWxhYmxlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2hhbmdlRmlyc3RQYXJhbUxpc3RlbmVyKHRvUmVtb3ZlLCB0b0FkZCkge1xyXG4gICAgRE0ucmVtb3ZlTGlzdGVuZXIoRklSU1RfUEFSQU1fQlVUVE9OX0lELCBcImNsaWNrXCIsIHRvUmVtb3ZlKTtcclxuICAgIERNLmFkZExpc3RlbmVyKEZJUlNUX1BBUkFNX0JVVFRPTl9JRCwgXCJjbGlja1wiLCB0b0FkZCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZXNldFBhcmFtQnV0dG9ucygpIHtcclxuICAgIFtcclxuICAgICAgRklSU1RfUEFSQU1fQlVUVE9OX0lELFxyXG4gICAgICBTRUNPTkRfUEFSQU1fQlVUVE9OX0lELFxyXG4gICAgICBUSElSRF9QQVJBTV9CVVRUT05fSURcclxuICAgIF0uZm9yRWFjaChmdW5jdGlvbiByZXNldEJ1dHRvbnMoYnV0dG9uSUQsIGlkSW5kZXgpIHtcclxuICAgICAgdmFyIGJ1dHRvbiA9IERNLmdldERPTUVsZW1lbnQoYnV0dG9uSUQpO1xyXG4gICAgICB2YXIgcmVwbGFjZW1lbnQgPSBidXR0b24uY2xvbmVOb2RlKCk7XHJcblxyXG4gICAgICByZXBsYWNlbWVudC5pbm5lckhUTUwgPSBidXR0b24uaW5uZXJIVE1MO1xyXG4gICAgICByZXBsYWNlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICByZXBsYWNlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2V0UGFyYW1JbmRleC5iaW5kKHRoaXMsIGlkSW5kZXgpKTtcclxuICAgICAgYnV0dG9uLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHJlcGxhY2VtZW50LCBidXR0b24pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbkNvbW1hbmRTZWxlY3RlZChldmVudCkge1xyXG4gICAgdmFyIHRhcmdldCA9IGdldFNlbGVjdGVkT3B0aW9uKGV2ZW50LnRhcmdldCk7XHJcbiAgICB2YXIgY29tbWFuZE5hbWUgPSB0YXJnZXQuaWQuc2xpY2UoXHJcbiAgICAgIHRhcmdldC5pZC5pbmRleE9mKFNFTEVDVF9PUFRJT05fSURfVEVNUExBVEUpICtcclxuICAgICAgICBTRUxFQ1RfT1BUSU9OX0lEX1RFTVBMQVRFLmxlbmd0aFxyXG4gICAgKTtcclxuXHJcbiAgICByZW1vdmVEaWFsb2coKTtcclxuICAgIHN3aXRjaCAoY29tbWFuZE5hbWUpIHtcclxuICAgICAgY2FzZSBcImFzay11c2VyXCI6XHJcbiAgICAgICAgY29tbWFuZC50eXBlID0gY29tbWFuZE5hbWU7XHJcbiAgICAgICAgc2V0UGFyYW1zQXZhaWxhYmlsaXR5KHRydWUpO1xyXG4gICAgICAgIGNoYW5nZUZpcnN0UGFyYW1MaXN0ZW5lcihhc2tTZXJ2aWNlTmFtZSwgYXNrRGlhbG9nSGVhZGVyKTtcclxuICAgICAgICBETS5hZGRMaXN0ZW5lcihcclxuICAgICAgICAgIFNFQ09ORF9QQVJBTV9CVVRUT05fSUQsXHJcbiAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICBhc2tQcm9tcHRQYXJhbS5iaW5kKHRoaXMsIFwiV2hhdCBtZXNzYWdlIGRvIHlvdSB3YW50IHRvIHNob3c/XCIpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBETS5hZGRMaXN0ZW5lcihcclxuICAgICAgICAgIFRISVJEX1BBUkFNX0JVVFRPTl9JRCxcclxuICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgIGFza1Byb21wdFBhcmFtLmJpbmQodGhpcywgXCJXaGF0IHBsYWNlaG9sZGVyIGRvIHlvdSB3YW50P1wiKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJ1c2VyLWluZm9cIjpcclxuICAgICAgICBjb21tYW5kLnR5cGUgPSBjb21tYW5kTmFtZTtcclxuICAgICAgICBzZXRQYXJhbXNBdmFpbGFiaWxpdHkoZmFsc2UpO1xyXG4gICAgICAgIGNoYW5nZUZpcnN0UGFyYW1MaXN0ZW5lcihhc2tEaWFsb2dIZWFkZXIsIGFza1NlcnZpY2VOYW1lKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXNldFBhcmFtQnV0dG9ucygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlQ29tbWFuZHNTZWxlY3QoKSB7XHJcbiAgICB2YXIgY29tbWFuZHNTZWxlY3QgPSBETS5jcmVhdGVET01FbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gICAgdmFyIG9wdGlvbjtcclxuXHJcbiAgICBjb21tYW5kc1NlbGVjdC5pZCA9IENPTU1BTkRfU0VMRUNUX0lEO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3MoY29tbWFuZHNTZWxlY3QsIFwiZGFzaGJvYXJkLXNlbGVjdGVkLXVzZXItY29tbWFuZC1zZWxlY3RcIik7XHJcbiAgICBbXCJTZWxlY3QgY29tbWFuZFwiLCBcIlVzZXIgSW5mb1wiLCBcIkFzayBVc2VyXCJdLmZvckVhY2goZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyhcclxuICAgICAgbmFtZVxyXG4gICAgKSB7XHJcbiAgICAgIG9wdGlvbiA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgIG9wdGlvbi5pZCA9XHJcbiAgICAgICAgU0VMRUNUX09QVElPTl9JRF9URU1QTEFURSArIG5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwiIFwiLCBcIi1cIik7XHJcbiAgICAgIG9wdGlvbi5pbm5lckhUTUwgPSBuYW1lO1xyXG4gICAgICBETS5hcHBlbmRET01FbGVtZW50KGNvbW1hbmRzU2VsZWN0LCBvcHRpb24pO1xyXG4gICAgfSk7XHJcbiAgICBETS5hZGRMaXN0ZW5lcihjb21tYW5kc1NlbGVjdCwgXCJjaGFuZ2VcIiwgb25Db21tYW5kU2VsZWN0ZWQpO1xyXG5cclxuICAgIHJldHVybiBjb21tYW5kc1NlbGVjdDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNlbmRDb21tYW5kKCkge1xyXG4gICAgc3RvcmFnZU1hbmFnZXIuc2VuZFJlcXVlc3RUb1N0b3JhZ2UoXHJcbiAgICAgIGdldFVzZXJJRChETS5nZXRET01FbGVtZW50KFNFTEVDVEVEX1VTRVJfSU5ORVJfSUQpKSArIFwiL2NvbW1hbmRzXCIsXHJcbiAgICAgIEhUVFBfUE9TVCxcclxuICAgICAgbWVzc2FnZUZhY3RvcnkuZ2V0Q29tbWFuZE1lc3NhZ2UobmV3IERhdGUoKSwgY29tbWFuZC50eXBlLCBjb21tYW5kLnBhcmFtcylcclxuICAgICk7XHJcbiAgICBjb21tYW5kLnBhcmFtcyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0Q29tbWFuZHNQYW5lbCgpIHtcclxuICAgIHZhciBjb21tYW5kc1BhbmVsID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImRpdlwiKTtcclxuICAgIHZhciBydW5Db21tYW5kQnV0dG9uID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImJ1dHRvblwiKTtcclxuXHJcbiAgICBjb21tYW5kc1BhbmVsLmlkID0gQ09NTUFORFNfUEFORUxfSUQ7XHJcbiAgICBETS5hZGRDU1NDbGFzcyhjb21tYW5kc1BhbmVsLCBcImRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNvbW1hbmRzLXBhbmVsXCIpO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3MocnVuQ29tbWFuZEJ1dHRvbiwgXCJkYXNoYm9hcmQtc2VsZWN0ZWQtdXNlci1ydW4tYnV0dG9uXCIpO1xyXG4gICAgcnVuQ29tbWFuZEJ1dHRvbi5pbm5lckhUTUwgPSBcIlJ1blwiO1xyXG5cclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQoY29tbWFuZHNQYW5lbCwgY3JlYXRlQ29tbWFuZHNTZWxlY3QoKSk7XHJcbiAgICBhcHBlbmRQYXJhbXNCdXR0b25zKGNvbW1hbmRzUGFuZWwpO1xyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudChjb21tYW5kc1BhbmVsLCBydW5Db21tYW5kQnV0dG9uKTtcclxuICAgIERNLmFkZExpc3RlbmVyKHJ1bkNvbW1hbmRCdXR0b24sIFwiY2xpY2tcIiwgc2VuZENvbW1hbmQpO1xyXG5cclxuICAgIHJldHVybiBjb21tYW5kc1BhbmVsO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYXBwZW5kU2luZ2xlQ29tbWFuZChsb2dQYW5lbCwgdXNlckNvbW1hbmQpIHtcclxuICAgIHZhciBkYXRlID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImRpdlwiKTtcclxuICAgIHZhciBzaWduYXR1cmUgPSBETS5jcmVhdGVET01FbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgdmFyIHJlc3VsdCA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gICAgZGF0ZS5pbm5lckhUTUwgPSB1c2VyQ29tbWFuZC5kYXRlO1xyXG4gICAgc2lnbmF0dXJlLmlubmVySFRNTCA9XHJcbiAgICAgIHVzZXJDb21tYW5kLnR5cGUgKyAnIChcIicgKyB1c2VyQ29tbWFuZC5wYXJhbXMuam9pbignXCIsXCInKSArICdcIiknO1xyXG4gICAgcmVzdWx0LmlubmVySFRNTCA9IHVzZXJDb21tYW5kLnJlc3VsdDtcclxuXHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KGxvZ1BhbmVsLCBkYXRlKTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQobG9nUGFuZWwsIHNpZ25hdHVyZSk7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KGxvZ1BhbmVsLCByZXN1bHQpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYXBwZW5kVXNlckNvbW1hbmRzKHVzZXJDb250YWluZXIsIGxvZ1BhbmVsKSB7XHJcbiAgICB2YXIgdXNlcklEID0gZ2V0VXNlcklEKHVzZXJDb250YWluZXIpO1xyXG4gICAgdmFyIHVzZXJDb21tYW5kcyA9IHVzZXJzRGF0YVt1c2VySURdLmNvbW1hbmRzO1xyXG5cclxuICAgIGlmICghdXNlckNvbW1hbmRzKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIE9iamVjdC5rZXlzKHVzZXJDb21tYW5kcykuZm9yRWFjaChmdW5jdGlvbiBhcHBlbmRVc2VyQ29tbWFuZChrZXkpIHtcclxuICAgICAgaWYgKCF1c2VyQ29tbWFuZHNba2V5XS5yZXN1bHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgYXBwZW5kU2luZ2xlQ29tbWFuZChsb2dQYW5lbCwgdXNlckNvbW1hbmRzW2tleV0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVVc2VyQ29udHJvbGxlckNvbnRhaW5lcih1c2VyQ29udGFpbmVyKSB7XHJcbiAgICB2YXIgdXNlckNvbnRyb2xsZXJDb250YWluZXIgPSBETS5jcmVhdGVET01FbGVtZW50KFwiZmllbGRzZXRcIik7XHJcbiAgICB2YXIgdXNlckNvbnRyb2xsZXJMZWdlbmQgPSBETS5jcmVhdGVET01FbGVtZW50KFwibGVnZW5kXCIpO1xyXG4gICAgdmFyIGNvbW1hbmRzTGFiZWwgPSBETS5jcmVhdGVET01FbGVtZW50KFwibGFiZWxcIik7XHJcbiAgICB2YXIgbG9nTGFiZWwgPSBETS5jcmVhdGVET01FbGVtZW50KFwibGFiZWxcIik7XHJcbiAgICB2YXIgbG9nUGFuZWwgPSBETS5jcmVhdGVET01FbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgIHVzZXJDb250cm9sbGVyQ29udGFpbmVyLmlkID0gU0VMRUNURURfVVNFUl9DT05UUk9MX0lEO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3MoXHJcbiAgICAgIHVzZXJDb250cm9sbGVyQ29udGFpbmVyLFxyXG4gICAgICBcImRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNvbnRyb2xsZXJcIlxyXG4gICAgKTtcclxuICAgIHVzZXJDb250cm9sbGVyTGVnZW5kLmlubmVySFRNTCA9IFwiQ29udHJvbFwiO1xyXG4gICAgY29tbWFuZHNMYWJlbC5pbm5lckhUTUwgPSBcIkNvbW1hbmQ6XCI7XHJcbiAgICBjb21tYW5kc0xhYmVsLmZvciA9IENPTU1BTkRTX1BBTkVMX0lEO1xyXG4gICAgbG9nTGFiZWwuZm9yID0gTE9HX1BBTkVMX0lEO1xyXG4gICAgbG9nTGFiZWwuaW5uZXJIVE1MID0gXCJMb2c6XCI7XHJcbiAgICBsb2dQYW5lbC5pZCA9IExPR19QQU5FTF9JRDtcclxuICAgIERNLmFkZENTU0NsYXNzKGxvZ1BhbmVsLCBcImRhc2hib2FyZC1zZWxlY3RlZC11c2VyLWNvbW1hbmRzLWxvZ1wiKTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQodXNlckNvbnRyb2xsZXJDb250YWluZXIsIHVzZXJDb250cm9sbGVyTGVnZW5kKTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQodXNlckNvbnRyb2xsZXJDb250YWluZXIsIGNvbW1hbmRzTGFiZWwpO1xyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudCh1c2VyQ29udHJvbGxlckNvbnRhaW5lciwgZ2V0Q29tbWFuZHNQYW5lbCgpKTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQodXNlckNvbnRyb2xsZXJDb250YWluZXIsIGxvZ0xhYmVsKTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQodXNlckNvbnRyb2xsZXJDb250YWluZXIsIGxvZ1BhbmVsKTtcclxuICAgIGFwcGVuZFVzZXJDb21tYW5kcyh1c2VyQ29udGFpbmVyLCBsb2dQYW5lbCk7XHJcblxyXG4gICAgcmV0dXJuIHVzZXJDb250cm9sbGVyQ29udGFpbmVyO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYXBwZW5kU2VsZWN0ZWRVc2VyQ29udGFpbmVyKHVzZXJDb250YWluZXIpIHtcclxuICAgIHZhciBzZWxlY3RlZFVzZXJDb250YWluZXIgPSBETS5jcmVhdGVET01FbGVtZW50KFwiZmllbGRzZXRcIik7XHJcbiAgICB2YXIgdXNlckNvbnRhaW5lckxlZ2VuZCA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJsZWdlbmRcIik7XHJcbiAgICB2YXIgdXNlckNvbnRhaW5lckNsb3NlQnV0dG9uID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgIHZhciB1c2VySURGaWVsZCA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgIHZhciB1c2VyQ29udGFpbmVyc0lubmVyID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICBzZWxlY3RlZFVzZXJDb250YWluZXIuaWQgPSBTRUxFQ1RFRF9VU0VSX0lOTkVSX0lEO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3MoXHJcbiAgICAgIHNlbGVjdGVkVXNlckNvbnRhaW5lcixcclxuICAgICAgXCJkYXNoYm9hcmQtc2VsZWN0ZWQtdXNlci1jb250YWluZXItaW5uZXJcIlxyXG4gICAgKTtcclxuICAgIHVzZXJDb250YWluZXJMZWdlbmQuaW5uZXJIVE1MID1cclxuICAgICAgXCJBY3RpdmU6IFwiICtcclxuICAgICAgRE0uZ2V0RE9NQ2hpbGRyZW5CeVRhZyh1c2VyQ29udGFpbmVyLCBcImxhYmVsXCIpLnNoaWZ0KCkuaW5uZXJIVE1MO1xyXG4gICAgdXNlckNvbnRhaW5lckNsb3NlQnV0dG9uLmlubmVySFRNTCA9IFwieFwiO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3MoXHJcbiAgICAgIHVzZXJDb250YWluZXJDbG9zZUJ1dHRvbixcclxuICAgICAgXCJkYXNoYm9hcmQtc2VsZWN0ZWQtdXNlci1jb250YWluZXItYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICBETS5hZGRMaXN0ZW5lcihcclxuICAgICAgdXNlckNvbnRhaW5lckNsb3NlQnV0dG9uLFxyXG4gICAgICBcImNsaWNrXCIsXHJcbiAgICAgIGNsb3NlU2VsZWN0ZWRVc2VyQ29udGFpbmVyXHJcbiAgICApO1xyXG4gICAgRE0uYWRkQ1NTQ2xhc3MoXHJcbiAgICAgIHVzZXJDb250YWluZXJzSW5uZXIsXHJcbiAgICAgIFwiZGFzaGJvYXJkLXNlbGVjdGVkLXVzZXItY29udHJvbHMtY29udGFpbmVyXCJcclxuICAgICk7XHJcbiAgICB1c2VySURGaWVsZC5pbm5lckhUTUwgPSBnZXRVc2VySUQodXNlckNvbnRhaW5lcik7XHJcbiAgICB1c2VySURGaWVsZC5oaWRkZW4gPSB0cnVlO1xyXG5cclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQoXHJcbiAgICAgIHVzZXJDb250YWluZXJzSW5uZXIsXHJcbiAgICAgIGNyZWF0ZVVzZXJDaGF0Q29udGFpbmVyKHVzZXJDb250YWluZXIpXHJcbiAgICApO1xyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudChcclxuICAgICAgdXNlckNvbnRhaW5lcnNJbm5lcixcclxuICAgICAgY3JlYXRlVXNlckNvbnRyb2xsZXJDb250YWluZXIodXNlckNvbnRhaW5lcilcclxuICAgICk7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHNlbGVjdGVkVXNlckNvbnRhaW5lciwgdXNlckNvbnRhaW5lckxlZ2VuZCk7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHNlbGVjdGVkVXNlckNvbnRhaW5lciwgdXNlckNvbnRhaW5lckNsb3NlQnV0dG9uKTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQoc2VsZWN0ZWRVc2VyQ29udGFpbmVyLCB1c2VyQ29udGFpbmVyc0lubmVyKTtcclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQoc2VsZWN0ZWRVc2VyQ29udGFpbmVyLCB1c2VySURGaWVsZCk7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KFNFTEVDVEVEX1VTRVJfQ09OVEFJTkVSX0lELCBzZWxlY3RlZFVzZXJDb250YWluZXIpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYXBwZW5kU2VsZWN0ZWRVc2VyTWVzc2FnZXModXNlckNvbnRhaW5lcikge1xyXG4gICAgdmFyIG1lc3NhZ2VzID0gdXNlcnNEYXRhW2dldFVzZXJJRCh1c2VyQ29udGFpbmVyKV0ubWVzc2FnZXM7XHJcblxyXG4gICAgaWYgKCFtZXNzYWdlcykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBPYmplY3Qua2V5cyhtZXNzYWdlcykuZm9yRWFjaChmdW5jdGlvbiBhcHBlbmRNZXNzYWdlKGtleSkge1xyXG4gICAgICBhcHBlbmRTaW5nbGVNZXNzYWdlKG1lc3NhZ2VzW2tleV0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZW5kUmVhZE1hcmtUb1N0b3JhZ2UodXNlckNvbnRhaW5lcikge1xyXG4gICAgc3RvcmFnZU1hbmFnZXIuc2VuZFJlcXVlc3RUb1N0b3JhZ2UoXHJcbiAgICAgIGdldFVzZXJJRCh1c2VyQ29udGFpbmVyKSArIFwiL3JlYWRcIixcclxuICAgICAgSFRUUF9QVVQsXHJcbiAgICAgIHRydWVcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZWxlY3RVc2VyKGV2ZW50KSB7XHJcbiAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoU0lOR0xFX1VTRVJfQ0xBU1NfTkFNRSkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKERNLmdldERPTUVsZW1lbnQoU0VMRUNURURfVVNFUl9JTk5FUl9JRCkpIHtcclxuICAgICAgY2xvc2VTZWxlY3RlZFVzZXJDb250YWluZXIoKTtcclxuICAgIH1cclxuICAgIERNLnJlbW92ZUNTU0NsYXNzKGV2ZW50LnRhcmdldCwgVU5SRUFEX0NMQVNTX05BTUUpO1xyXG5cclxuICAgIGFwcGVuZFNlbGVjdGVkVXNlckNvbnRhaW5lcihldmVudC50YXJnZXQpO1xyXG4gICAgYXBwZW5kU2VsZWN0ZWRVc2VyTWVzc2FnZXMoZXZlbnQudGFyZ2V0KTtcclxuICAgIHNlbmRSZWFkTWFya1RvU3RvcmFnZShldmVudC50YXJnZXQpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaXNVc2VyT25saW5lKHVzZXIpIHtcclxuICAgIHZhciBsYXN0TWVzc2FnZTtcclxuICAgIHZhciBsYXN0TWVzc2FnZVRpbWU7XHJcbiAgICB2YXIgbGFzdE1lc3NhZ2VEYXRlO1xyXG4gICAgdmFyIG1lc3NhZ2VzS2V5cztcclxuXHJcbiAgICBpZiAoIXVzZXIubWVzc2FnZXMpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbWVzc2FnZXNLZXlzID0gT2JqZWN0LmtleXModXNlci5tZXNzYWdlcyk7XHJcbiAgICBsYXN0TWVzc2FnZSA9IHVzZXIubWVzc2FnZXNbbWVzc2FnZXNLZXlzLnBvcCgpXTtcclxuICAgIHdoaWxlIChcclxuICAgICAgbGFzdE1lc3NhZ2UgJiZcclxuICAgICAgbGFzdE1lc3NhZ2Uuc2VuZGVyID09PSBjb25maWcub3BlcmF0b3JOYW1lLmNvbmNhdChcIjpcIilcclxuICAgICkge1xyXG4gICAgICBsYXN0TWVzc2FnZSA9IHVzZXIubWVzc2FnZXNbbWVzc2FnZXNLZXlzLnBvcCgpXTtcclxuICAgIH1cclxuICAgIGlmICghbGFzdE1lc3NhZ2UpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGFzdE1lc3NhZ2VUaW1lID0gbGFzdE1lc3NhZ2UudGltZS5zcGxpdChcIjpcIik7XHJcbiAgICBsYXN0TWVzc2FnZURhdGUgPSBuZXcgRGF0ZShcclxuICAgICAgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICBOdW1iZXIobGFzdE1lc3NhZ2UubW9udGgpLFxyXG4gICAgICBOdW1iZXIobGFzdE1lc3NhZ2UuZGF5KSxcclxuICAgICAgTnVtYmVyKGxhc3RNZXNzYWdlVGltZS5zaGlmdCgpKSxcclxuICAgICAgTnVtYmVyKGxhc3RNZXNzYWdlVGltZS5zaGlmdCgpKVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IERhdGUoKSAtIGxhc3RNZXNzYWdlRGF0ZSA8PSBVU0VSX09OTElORV9USU1FT1VUO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0VXNlclN0YXR1cyhzdGF0dXNDb250YWluZXIsIGNsYXNzVG9SZW1vdmUsIGNsYXNzVG9BZGQpIHtcclxuICAgIERNLnJlbW92ZUNTU0NsYXNzKHN0YXR1c0NvbnRhaW5lciwgY2xhc3NUb1JlbW92ZSk7XHJcbiAgICBETS5hZGRDU1NDbGFzcyhzdGF0dXNDb250YWluZXIsIGNsYXNzVG9BZGQpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYXBwZW5kU2luZ2xlVXNlcih1c2VyLCBnZW5lcmF0ZWQpIHtcclxuICAgIHZhciB1c2VyRWxlbWVudCA9IERNLmNyZWF0ZURPTUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICB2YXIgdXNlck5hbWVFbGVtZW50ID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImxhYmVsXCIpO1xyXG4gICAgdmFyIGdlbmVyYXRlZEZpZWxkID0gRE0uY3JlYXRlRE9NRWxlbWVudChcImxhYmVsXCIpO1xyXG4gICAgdmFyIGNoYXRTdGF0ZUVsZW1lbnQgPSBETS5jcmVhdGVET01FbGVtZW50KFwibGFiZWxcIik7XHJcbiAgICB2YXIgdXNlclN0YXR1c0VsZW1lbnQgPSBETS5jcmVhdGVET01FbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgIERNLmFkZENTU0NsYXNzKHVzZXJFbGVtZW50LCBTSU5HTEVfVVNFUl9DTEFTU19OQU1FKTtcclxuICAgIGlmICghdXNlci5yZWFkKSB7XHJcbiAgICAgIERNLmFkZENTU0NsYXNzKHVzZXJFbGVtZW50LCBVTlJFQURfQ0xBU1NfTkFNRSk7XHJcbiAgICB9XHJcbiAgICB1c2VyTmFtZUVsZW1lbnQuaW5uZXJIVE1MID1cclxuICAgICAgdXNlci51c2VyTmFtZSA9PT0gdW5kZWZpbmVkIHx8IHVzZXIudXNlck5hbWUgPT09IERFRkFVTFRfVVNFUk5BTUVcclxuICAgICAgICA/IGdlbmVyYXRlZFxyXG4gICAgICAgIDogdXNlci51c2VyTmFtZTtcclxuICAgIGdlbmVyYXRlZEZpZWxkLmlubmVySFRNTCA9IGdlbmVyYXRlZDtcclxuICAgIGdlbmVyYXRlZEZpZWxkLmhpZGRlbiA9IHRydWU7XHJcbiAgICBETS5hZGRDU1NDbGFzcyh1c2VyU3RhdHVzRWxlbWVudCwgXCJkYXNoYm9hcmQtdXNlci1zdGF0dXNcIik7XHJcbiAgICBpZiAoaXNVc2VyT25saW5lKHVzZXIpKSB7XHJcbiAgICAgIHNldFVzZXJTdGF0dXModXNlclN0YXR1c0VsZW1lbnQsIE9OTElORV9DTEFTU19OQU1FLCBPTkxJTkVfQ0xBU1NfTkFNRSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZXRVc2VyU3RhdHVzKHVzZXJTdGF0dXNFbGVtZW50LCBPRkZMSU5FX0NMQVNTX05BTUUsIE9GRkxJTkVfQ0xBU1NfTkFNRSk7XHJcbiAgICB9XHJcbiAgICBjaGF0U3RhdGVFbGVtZW50LmlubmVySFRNTCA9IHVzZXIuY2hhdFN0YXRlO1xyXG5cclxuICAgIERNLmFwcGVuZERPTUVsZW1lbnQodXNlckVsZW1lbnQsIHVzZXJOYW1lRWxlbWVudCk7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHVzZXJFbGVtZW50LCBnZW5lcmF0ZWRGaWVsZCk7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHVzZXJFbGVtZW50LCB1c2VyU3RhdHVzRWxlbWVudCk7XHJcbiAgICBETS5hcHBlbmRET01FbGVtZW50KHVzZXJFbGVtZW50LCBjaGF0U3RhdGVFbGVtZW50KTtcclxuICAgIERNLmFkZExpc3RlbmVyKFVTRVJTX0xJU1RfQ09OVEFJTkVSX0lELCBcImNsaWNrXCIsIHNlbGVjdFVzZXIpO1xyXG4gICAgRE0uYXBwZW5kRE9NRWxlbWVudChVU0VSU19MSVNUX0NPTlRBSU5FUl9JRCwgdXNlckVsZW1lbnQpO1xyXG5cclxuICAgIHJldHVybiB1c2VyRWxlbWVudDtcclxuICB9XHJcblxyXG4gIERhc2hib2FyZEZhY3RvcnkucHJvdG90eXBlLmxvYWRVc2Vyc0xpc3QgPSBmdW5jdGlvbiBsb2FkVXNlcnNMaXN0KHVzZXJzKSB7XHJcbiAgICBPYmplY3Qua2V5cyh1c2VycykuZm9yRWFjaChmdW5jdGlvbiBhcHBlbmRVc2VyKGtleSkge1xyXG4gICAgICBhcHBlbmRTaW5nbGVVc2VyKHVzZXJzW2tleV0sIGtleSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBjbGVhclVzZXJzKHVzZXJzQ29udGFpbmVycykge1xyXG4gICAgdmFyIGNvbnRhaW5lcnMgPVxyXG4gICAgICB1c2Vyc0NvbnRhaW5lcnMgfHxcclxuICAgICAgRE0uZ2V0RE9NQ2hpbGRyZW5CeUNsYXNzKFVTRVJTX0xJU1RfQ09OVEFJTkVSX0lELCBTSU5HTEVfVVNFUl9DTEFTU19OQU1FKTtcclxuXHJcbiAgICBjb250YWluZXJzLmZvckVhY2goZnVuY3Rpb24gY2xlYXJVc2Vyc0xpc3QodXNlckNvbnRhaW5lcikge1xyXG4gICAgICBETS5yZW1vdmVET01FbGVtZW50KFVTRVJTX0xJU1RfQ09OVEFJTkVSX0lELCB1c2VyQ29udGFpbmVyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBjb250YWluZXJzO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZmlsdGVyVXNlcnMoZXZlbnQpIHtcclxuICAgIHZhciBmaWx0ZXJWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgdmFyIHVzZXJzQ29udGFpbmVycyA9IERNLmdldERPTUNoaWxkcmVuQnlDbGFzcyhcclxuICAgICAgVVNFUlNfTElTVF9DT05UQUlORVJfSUQsXHJcbiAgICAgIFNJTkdMRV9VU0VSX0NMQVNTX05BTUVcclxuICAgICk7XHJcblxyXG4gICAgaWYgKGZpbHRlclZhbHVlID09PSBcIlwiKSB7XHJcbiAgICAgIGNsZWFyVXNlcnModXNlcnNDb250YWluZXJzKTtcclxuICAgICAgZGFzaGJvYXJkRmFjdG9yeS5sb2FkVXNlcnNMaXN0KHVzZXJzRGF0YSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHVzZXJzQ29udGFpbmVycy5mb3JFYWNoKGZ1bmN0aW9uIGZpbHRlcih1c2VyQ29udGFpbmVyKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBETS5nZXRET01DaGlsZHJlbkJ5VGFnKHVzZXJDb250YWluZXIsIFwibGFiZWxcIilcclxuICAgICAgICAgIC5zaGlmdCgpXHJcbiAgICAgICAgICAuaW5uZXJIVE1MLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgIC5pbmRleE9mKGZpbHRlclZhbHVlKSA9PT0gLTFcclxuICAgICAgKSB7XHJcbiAgICAgICAgRE0ucmVtb3ZlRE9NRWxlbWVudChVU0VSU19MSVNUX0NPTlRBSU5FUl9JRCwgdXNlckNvbnRhaW5lcik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc29ydFVzZXJzQnlVc2VyTmFtZShjb250YWluZXIxLCBjb250YWluZXIyKSB7XHJcbiAgICByZXR1cm4gRE0uZ2V0RE9NQ2hpbGRyZW5CeVRhZyhjb250YWluZXIxLCBcImxhYmVsXCIpXHJcbiAgICAgIC5zaGlmdCgpXHJcbiAgICAgIC5pbm5lckhUTUwudG9Mb3dlckNhc2UoKSA8XHJcbiAgICAgIERNLmdldERPTUNoaWxkcmVuQnlUYWcoY29udGFpbmVyMiwgXCJsYWJlbFwiKVxyXG4gICAgICAgIC5zaGlmdCgpXHJcbiAgICAgICAgLmlubmVySFRNTC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgID8gTEVTU1xyXG4gICAgICA6IE1PUkU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzb3J0VXNlcnNCeU9ubGluZVN0YXR1cyhjb250YWluZXIpIHtcclxuICAgIHJldHVybiBETS5nZXRET01DaGlsZHJlbkJ5VGFnKGNvbnRhaW5lciwgXCJkaXZcIilcclxuICAgICAgLnNoaWZ0KClcclxuICAgICAgLmNsYXNzTGlzdC5jb250YWlucyhPTkxJTkVfQ0xBU1NfTkFNRSlcclxuICAgICAgPyBMRVNTXHJcbiAgICAgIDogTU9SRTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNvcnRVc2Vyc0J5Q2hhdFN0YXRlKGNvbnRhaW5lcikge1xyXG4gICAgcmV0dXJuIERNLmdldERPTUNoaWxkcmVuQnlUYWcoY29udGFpbmVyLCBcImxhYmVsXCIpLnBvcCgpLmlubmVySFRNTCA9PT1cclxuICAgICAgXCJjaGF0LWV4cGFuZGVkXCJcclxuICAgICAgPyBMRVNTXHJcbiAgICAgIDogTU9SRTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNvcnRVc2Vyc0J5VW5yZWFkKGNvbnRhaW5lcikge1xyXG4gICAgcmV0dXJuIGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoVU5SRUFEX0NMQVNTX05BTUUpID8gTEVTUyA6IE1PUkU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzb3J0VXNlcnMoZXZlbnQpIHtcclxuICAgIHZhciBzZWxlY3RlZCA9IERNLmdldERPTUNoaWxkcmVuQnlUYWcoZXZlbnQudGFyZ2V0LCBcIm9wdGlvblwiKS5maW5kKFxyXG4gICAgICBmdW5jdGlvbiBnZXRTZWxlY3RlZChvcHRpb24pIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9uLnNlbGVjdGVkO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgdmFyIGNvbnRhaW5lcnMgPSBjbGVhclVzZXJzKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gc29ydEJ5QW5kQXBwZW5kKHNvcnRGdW5jKSB7XHJcbiAgICAgIGNvbnRhaW5lcnMuc29ydChzb3J0RnVuYyk7XHJcbiAgICAgIGNvbnRhaW5lcnMuZm9yRWFjaChmdW5jdGlvbiBhcHBlbmRDb250YWluZXJzKGNvbnRhaW5lcikge1xyXG4gICAgICAgIERNLmFwcGVuZERPTUVsZW1lbnQoVVNFUlNfTElTVF9DT05UQUlORVJfSUQsIGNvbnRhaW5lcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChzZWxlY3RlZC5pbm5lckhUTUwpIHtcclxuICAgICAgY2FzZSBcIlVzZXIgTmFtZVwiOlxyXG4gICAgICAgIHNvcnRCeUFuZEFwcGVuZChzb3J0VXNlcnNCeVVzZXJOYW1lKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIk9ubGluZVwiOlxyXG4gICAgICAgIHNvcnRCeUFuZEFwcGVuZChzb3J0VXNlcnNCeU9ubGluZVN0YXR1cyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJDaGF0IHN0YXRlXCI6XHJcbiAgICAgICAgc29ydEJ5QW5kQXBwZW5kKHNvcnRVc2Vyc0J5Q2hhdFN0YXRlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIlVucmVhZFwiOlxyXG4gICAgICAgIHNvcnRCeUFuZEFwcGVuZChzb3J0VXNlcnNCeVVucmVhZCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgZGFzaGJvYXJkRmFjdG9yeS5sb2FkVXNlcnNMaXN0KHVzZXJzRGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbGVhckZpbHRlcihldmVudCkge1xyXG4gICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gXCJcIjtcclxuICAgIGNsZWFyVXNlcnMoKTtcclxuICAgIGRhc2hib2FyZEZhY3RvcnkubG9hZFVzZXJzTGlzdCh1c2Vyc0RhdGEpO1xyXG4gIH1cclxuXHJcbiAgRGFzaGJvYXJkRmFjdG9yeS5wcm90b3R5cGUuaW5pdExpc3RlbmVycyA9IGZ1bmN0aW9uIGluaXRMaXN0ZW5lcnMoKSB7XHJcbiAgICBETS5hZGRMaXN0ZW5lcihcclxuICAgICAgXCJvcGVyYXRvcnMtZGFzaGJvYXJkLXVzZXJzLWZpbHRlci1iYXJcIixcclxuICAgICAgXCJjaGFuZ2VcIixcclxuICAgICAgZmlsdGVyVXNlcnNcclxuICAgICk7XHJcbiAgICBETS5hZGRMaXN0ZW5lcihcclxuICAgICAgXCJvcGVyYXRvcnMtZGFzaGJvYXJkLXVzZXJzLWZpbHRlci1iYXJcIixcclxuICAgICAgXCJmb2N1c1wiLFxyXG4gICAgICBjbGVhckZpbHRlclxyXG4gICAgKTtcclxuICAgIERNLmFkZExpc3RlbmVyKFwib3BlcmF0b3JzLWRhc2hib2FyZC11c2Vycy1zb3J0LWJhclwiLCBcImNoYW5nZVwiLCBzb3J0VXNlcnMpO1xyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIGdldFVzZXIoa2V5KSB7XHJcbiAgICBpZiAoIXVzZXJzRGF0YVtrZXldKSB7XHJcbiAgICAgIHVzZXJzRGF0YVtrZXldID0ge1xyXG4gICAgICAgIGNoYXRTdGF0ZTogXCJjaGF0LWNvbGxhcHNlZFwiLFxyXG4gICAgICAgIHJlYWQ6IFwidHJ1ZVwiXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVzZXJzRGF0YVtrZXldO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0VXNlckNvbnRhaW5lcih1c2VyS2V5LCB1c2VyKSB7XHJcbiAgICB2YXIgdXNlckNvbnRhaW5lcjtcclxuXHJcbiAgICB1c2VyQ29udGFpbmVyID0gRE0uZ2V0RE9NQ2hpbGRyZW5CeUNsYXNzKFxyXG4gICAgICBVU0VSU19MSVNUX0NPTlRBSU5FUl9JRCxcclxuICAgICAgU0lOR0xFX1VTRVJfQ0xBU1NfTkFNRVxyXG4gICAgKS5maW5kKGZ1bmN0aW9uIGZpbmRDb250YWluZXIoY29udGFpbmVyKSB7XHJcbiAgICAgIHJldHVybiBnZXRVc2VySUQoY29udGFpbmVyKSA9PT0gdXNlcktleTtcclxuICAgIH0pO1xyXG4gICAgaWYgKCF1c2VyQ29udGFpbmVyKSB7XHJcbiAgICAgIHVzZXJDb250YWluZXIgPSBhcHBlbmRTaW5nbGVVc2VyKHVzZXIsIHVzZXJLZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1c2VyQ29udGFpbmVyO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbWFuYWdlVXNlck9ubGluZShrZXkpIHtcclxuICAgIHZhciB1c2VyU3RhdHVzRWxlbWVudCA9IERNLmdldERPTUNoaWxkcmVuQnlUYWcoXHJcbiAgICAgIGdldFVzZXJDb250YWluZXIoa2V5LCB1c2Vyc0RhdGFba2V5XSksXHJcbiAgICAgIFwiZGl2XCJcclxuICAgICkuc2hpZnQoKTtcclxuICAgIHNldFVzZXJTdGF0dXModXNlclN0YXR1c0VsZW1lbnQsIE9GRkxJTkVfQ0xBU1NfTkFNRSwgT05MSU5FX0NMQVNTX05BTUUpO1xyXG4gICAgc2V0VGltZW91dChcclxuICAgICAgc2V0VXNlclN0YXR1cy5iaW5kKFxyXG4gICAgICAgIHRoaXMsXHJcbiAgICAgICAgdXNlclN0YXR1c0VsZW1lbnQsXHJcbiAgICAgICAgT05MSU5FX0NMQVNTX05BTUUsXHJcbiAgICAgICAgT0ZGTElORV9DTEFTU19OQU1FXHJcbiAgICAgICksXHJcbiAgICAgIFVTRVJfT05MSU5FX1RJTUVPVVRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1cGRhdGVVc2VyUmVhZFN0YXR1cyhrZXksIHZhbHVlKSB7XHJcbiAgICB2YXIgY29udGFpbmVyID0gZ2V0VXNlckNvbnRhaW5lcihrZXksIGdldFVzZXIoa2V5KSk7XHJcblxyXG4gICAgdXNlcnNEYXRhW2tleV0ucmVhZCA9IHZhbHVlO1xyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIERNLnJlbW92ZUNTU0NsYXNzKGNvbnRhaW5lciwgVU5SRUFEX0NMQVNTX05BTUUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgRE0uYWRkQ1NTQ2xhc3MoY29udGFpbmVyLCBVTlJFQURfQ0xBU1NfTkFNRSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1cGRhdGVVc2VyQ2hhdFN0YXRlKGtleSwgdmFsdWUpIHtcclxuICAgIHZhciBjb250YWluZXIgPSBnZXRVc2VyQ29udGFpbmVyKGtleSwgZ2V0VXNlcihrZXkpKTtcclxuXHJcbiAgICB1c2Vyc0RhdGFba2V5XS5jaGF0U3RhdGUgPSB2YWx1ZTtcclxuICAgIERNLmdldERPTUNoaWxkcmVuQnlUYWcoY29udGFpbmVyLCBcImxhYmVsXCIpLnBvcCgpLmlubmVySFRNTCA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlVXNlck1lc3NhZ2VzKGtleSwgbWVzc2FnZSwgbWVzc2FnZUtleSkge1xyXG4gICAgaWYgKCF1c2Vyc0RhdGFba2V5XS5tZXNzYWdlcykge1xyXG4gICAgICB1c2Vyc0RhdGFba2V5XS5tZXNzYWdlcyA9IHt9O1xyXG4gICAgfVxyXG4gICAgdXNlcnNEYXRhW2tleV0ubWVzc2FnZXNbbWVzc2FnZUtleV0gPSBtZXNzYWdlO1xyXG4gICAgaWYgKCFETS5nZXRET01FbGVtZW50KFNFTEVDVEVEX1VTRVJfSU5ORVJfSUQpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChnZXRVc2VySUQoU0VMRUNURURfVVNFUl9JTk5FUl9JRCkgPT09IGtleSkge1xyXG4gICAgICBzZW5kUmVhZE1hcmtUb1N0b3JhZ2UoZ2V0VXNlckNvbnRhaW5lcihrZXksIHVzZXJzRGF0YVtrZXldKSk7XHJcbiAgICAgIGFwcGVuZFNpbmdsZU1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1cGRhdGVVc2VyTmFtZShrZXksIG5hbWUpIHtcclxuICAgIHZhciBjb250YWluZXIgPSBnZXRVc2VyQ29udGFpbmVyKGtleSwgZ2V0VXNlcihrZXkpKTtcclxuXHJcbiAgICB1c2Vyc0RhdGFba2V5XS51c2VyTmFtZSA9IG5hbWU7XHJcbiAgICBETS5nZXRET01DaGlsZHJlbkJ5VGFnKGNvbnRhaW5lciwgXCJsYWJlbFwiKS5zaGlmdCgpLmlubmVySFRNTCA9IG5hbWU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1cGRhdGVDb21tYW5kcyhrZXksIGNvbW1hbmRSZXN1bHQsIGNvbW1hbmRLZXkpIHtcclxuICAgIHZhciB1c2VyQ29tbWFuZHMgPSB1c2Vyc0RhdGFba2V5XS5jb21tYW5kcztcclxuXHJcbiAgICB1c2VyQ29tbWFuZHNbY29tbWFuZEtleV0ucmVzdWx0ID0gY29tbWFuZFJlc3VsdDtcclxuICAgIGlmICghRE0uZ2V0RE9NRWxlbWVudChTRUxFQ1RFRF9VU0VSX0lOTkVSX0lEKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoZ2V0VXNlcklEKFNFTEVDVEVEX1VTRVJfSU5ORVJfSUQpICE9PSBrZXkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgYXBwZW5kU2luZ2xlQ29tbWFuZChcclxuICAgICAgRE0uZ2V0RE9NRWxlbWVudChMT0dfUEFORUxfSUQpLFxyXG4gICAgICB1c2VyQ29tbWFuZHNbY29tbWFuZEtleV1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzYXZlRW1wdHlDb21tYW5kKHVzZXJLZXksIGNvbW1hbmRLZXksIHVzZXJDb21tYW5kKSB7XHJcbiAgICB2YXIgdXNlciA9IHVzZXJzRGF0YVt1c2VyS2V5XTtcclxuXHJcbiAgICBpZiAoIXVzZXIuY29tbWFuZHMpIHtcclxuICAgICAgdXNlci5jb21tYW5kcyA9IHt9O1xyXG4gICAgfVxyXG4gICAgdXNlci5jb21tYW5kc1tjb21tYW5kS2V5XSA9IHVzZXJDb21tYW5kO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYXBwbHlVcGRhdGVzKGV2ZW50KSB7XHJcbiAgICB2YXIgcGF0aEZyYWdtZW50cyA9IGV2ZW50LmRhdGEucGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMSk7XHJcbiAgICB2YXIgZnJhZ21lbnQgPSBwYXRoRnJhZ21lbnRzLnNoaWZ0KCk7XHJcbiAgICB2YXIgY29tbWFuZEtleTtcclxuICAgIHZhciBkYXRhID0gZXZlbnQuZGF0YS5kYXRhO1xyXG4gICAgdmFyIGlzVXBkYXRlRnJvbVVzZXIgPSB0cnVlO1xyXG5cclxuICAgIGlmIChmcmFnbWVudCA9PT0gXCJcIikge1xyXG4gICAgICBkYXNoYm9hcmRGYWN0b3J5LmxvYWRVc2Vyc0xpc3QoZGF0YSk7XHJcbiAgICAgIHVzZXJzRGF0YSA9IGRhdGE7XHJcbiAgICB9IGVsc2UgaWYgKGZyYWdtZW50Lm1hdGNoKC91c2VyXFxkezEzLH0vKSkge1xyXG4gICAgICBzd2l0Y2ggKHBhdGhGcmFnbWVudHMuc2hpZnQoKSkge1xyXG4gICAgICAgIGNhc2UgXCJyZWFkXCI6XHJcbiAgICAgICAgICBpZiAoZGF0YSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBpc1VwZGF0ZUZyb21Vc2VyID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB1cGRhdGVVc2VyUmVhZFN0YXR1cyhmcmFnbWVudCwgZGF0YSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiY2hhdFN0YXRlXCI6XHJcbiAgICAgICAgICB1cGRhdGVVc2VyQ2hhdFN0YXRlKGZyYWdtZW50LCBkYXRhKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJtZXNzYWdlc1wiOlxyXG4gICAgICAgICAgaWYgKGRhdGEuc2VuZGVyLmluZGV4T2YoY29uZmlnLm9wZXJhdG9yTmFtZSkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIGlzVXBkYXRlRnJvbVVzZXIgPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHVwZGF0ZVVzZXJNZXNzYWdlcyhmcmFnbWVudCwgZGF0YSwgcGF0aEZyYWdtZW50cy5zaGlmdCgpKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJ1c2VyTmFtZVwiOlxyXG4gICAgICAgICAgdXBkYXRlVXNlck5hbWUoZnJhZ21lbnQsIGRhdGEpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcImNvbW1hbmRzXCI6XHJcbiAgICAgICAgICBjb21tYW5kS2V5ID0gcGF0aEZyYWdtZW50cy5wb3AoKTtcclxuICAgICAgICAgIGlmIChjb21tYW5kS2V5ICE9PSBcInJlc3VsdFwiKSB7XHJcbiAgICAgICAgICAgIHNhdmVFbXB0eUNvbW1hbmQoZnJhZ21lbnQsIGNvbW1hbmRLZXksIGRhdGEpO1xyXG4gICAgICAgICAgICBpc1VwZGF0ZUZyb21Vc2VyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlzVXBkYXRlRnJvbVVzZXIgPSB0cnVlO1xyXG4gICAgICAgICAgdXBkYXRlQ29tbWFuZHMoZnJhZ21lbnQsIGRhdGEsIHBhdGhGcmFnbWVudHMuc2hpZnQoKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICB9XHJcbiAgICAgIGlmIChpc1VwZGF0ZUZyb21Vc2VyKSB7XHJcbiAgICAgICAgbWFuYWdlVXNlck9ubGluZShmcmFnbWVudCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIERhc2hib2FyZEZhY3RvcnkucHJvdG90eXBlLnN1YnNjcmliZU9uVXBkYXRlcyA9IGZ1bmN0aW9uIHN1YnNjcmliZU9uVXBkYXRlcygpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBhcHBseVVwZGF0ZXMsIGZhbHNlKTtcclxuICAgIHVwZGF0ZXNNYW5hZ2VyLmdldERhdGFGcm9tU3RvcmFnZShcIlwiKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gbmV3IERhc2hib2FyZEZhY3RvcnkoKTtcclxufSkoY29uZmlnKTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbiBpbml0RGFzaGJvYXJkKCkge1xyXG4gIGRhc2hib2FyZEZhY3RvcnkuaW5pdExpc3RlbmVycygpO1xyXG4gIGRhc2hib2FyZEZhY3Rvcnkuc3Vic2NyaWJlT25VcGRhdGVzKCk7XHJcbn0pOyJdfQ==
